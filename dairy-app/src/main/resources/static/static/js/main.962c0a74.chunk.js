(this["webpackJsonpreact-pagination"]=this["webpackJsonpreact-pagination"]||[]).push([[0],{104:function(e,t,a){},106:function(e,t,a){},134:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),o=a(43),i=a.n(o),l=(a(104),a(18)),c=a(19),s=a(32),u=a(31),d=a(27),m=a(21),h=(a(105),a(106),a(20)),b=a.n(h),v=a(11),f=a(88),y=a.n(f).a.create({baseURL:"http://192.168.43.137:8080/api",headers:{"Content-type":"application/json","Access-Control-Allow-Origin":"*"}}),g=new(function(){function e(){Object(l.a)(this,e)}return Object(c.a)(e,[{key:"getAll",value:function(e){return y.get("/customers",{params:e})}},{key:"get",value:function(e){return y.get("/customers/".concat(e))}},{key:"create",value:function(e){return y.post("/customers",e)}},{key:"update",value:function(e,t){return y.put("/customers/".concat(e),t)}},{key:"delete",value:function(e){return y.delete("/customers/".concat(e))}},{key:"deleteAll",value:function(){return y.delete("/customers")}}]),e}()),p=new(function(){function e(){Object(l.a)(this,e)}return Object(c.a)(e,[{key:"getAll",value:function(e){return y.get("/routes",{params:e})}},{key:"get",value:function(e){return y.get("/routes/".concat(e))}},{key:"create",value:function(e){return y.post("/routes",e)}},{key:"update",value:function(e,t){return y.put("/routes/".concat(e),t)}},{key:"delete",value:function(e){return y.delete("/routes/".concat(e))}},{key:"deleteAll",value:function(){return y.delete("/routes")}}]),e}()),k=function(e){Object(s.a)(a,e);var t=Object(u.a)(a);function a(e){var n;Object(l.a)(this,a),(n=t.call(this,e)).onChangeName=n.onChangeName.bind(Object(v.a)(n)),n.onChangeAddress=n.onChangeAddress.bind(Object(v.a)(n)),n.onChangeStartDate=n.onChangeStartDate.bind(Object(v.a)(n)),n.onChangeActive=n.onChangeActive.bind(Object(v.a)(n)),n.onChangeRoute=n.onChangeRoute.bind(Object(v.a)(n)),n.onChangeDefaultQuantity=n.onChangeDefaultQuantity.bind(Object(v.a)(n)),n.onChangeRouteSeq=n.onChangeRouteSeq.bind(Object(v.a)(n)),n.saveTutorial=n.saveTutorial.bind(Object(v.a)(n)),n.newTutorial=n.newTutorial.bind(Object(v.a)(n)),n.getRoute=n.getRoute.bind(Object(v.a)(n)),n.myRef=r.a.createRef();var o=b()();return n.state={id:null,name:"",address:"",active:!0,startDate:o.format("DD-MMM-YYYY"),routeId:"",defaultQuantity:1,routes:[],routeSeq:null,submitted:!1},n}return Object(c.a)(a,[{key:"onChangeName",value:function(e){this.setState({name:e.target.value})}},{key:"onChangeAddress",value:function(e){this.setState({address:e.target.value})}},{key:"onChangeRouteSeq",value:function(e){this.setState({routeSeq:e.target.value})}},{key:"onChangeStartDate",value:function(e){this.setState({startDate:e.target.value})}},{key:"onChangeActive",value:function(e){this.setState({active:e.target.checked})}},{key:"onChangeRoute",value:function(e){this.setState({routeId:e.target.value})}},{key:"onChangeDefaultQuantity",value:function(e){this.setState({defaultQuantity:e.target.value})}},{key:"saveTutorial",value:function(){var e=this,t={name:this.state.name,address:this.state.address,startDate:this.state.startDate,active:this.state.active,routeId:this.myRef.current.value,defaultQuantity:this.state.defaultQuantity,routeSeq:this.state.routeSeq};g.create(t).then((function(t){e.setState({id:t.data.id,name:t.data.name,address:t.data.address,active:t.data.active,startDate:t.data.startDate,routeId:t.data.routeId,defaultQuantity:t.data.defaultQuantity,routeSeq:t.data.routeSeq,submitted:!0}),console.log(t.data)})).catch((function(e){console.log(e)}))}},{key:"newTutorial",value:function(){this.setState({id:null,name:"",address:"",startDate:b()().format("DD-MMM-YYYY"),active:!0,routeId:"",defaultQuantity:1,routeSeq:null,submitted:!1})}},{key:"componentDidMount",value:function(){this.getRoute()}},{key:"getRoute",value:function(){var e=this;p.getAll().then((function(t){e.setState({routes:t.data}),console.log(t.data)})).catch((function(e){console.log(e)}))}},{key:"render",value:function(){var e=this.state.routes;return r.a.createElement("div",{className:"submit-form"},this.state.submitted?r.a.createElement("div",null,r.a.createElement("h4",null,"You submitted successfully!"),r.a.createElement("button",{className:"btn btn-success",onClick:this.newTutorial},"Add")):r.a.createElement("div",null,r.a.createElement("div",{className:"form-group"},r.a.createElement("label",{htmlFor:"name"},"Customer Name"),r.a.createElement("input",{type:"text",className:"form-control",id:"name",required:!0,value:this.state.name,onChange:this.onChangeName,name:"name"})),r.a.createElement("div",{className:"form-group"},r.a.createElement("label",{htmlFor:"address"},"Address"),r.a.createElement("input",{type:"text",className:"form-control",id:"address",required:!0,value:this.state.address,onChange:this.onChangeAddress,name:"address"})),r.a.createElement("div",{className:"form-group"},r.a.createElement("label",{htmlFor:"startDate"},"Start Date"),r.a.createElement("input",{type:"text",className:"form-control",id:"startDate",required:!0,value:this.state.startDate,onChange:this.onChangeStartDate,name:"startDate"})),r.a.createElement("div",{className:"form-group"},r.a.createElement("label",{htmlFor:"defaultQuantity"},"Default Quantity"),r.a.createElement("input",{type:"text",className:"form-control",id:"defaultQuantity",required:!0,value:this.state.defaultQuantity,onChange:this.onChangeDefaultQuantity,name:"defaultQuantity"})),r.a.createElement("div",{className:"form-group"},r.a.createElement("label",{htmlFor:"routeId"},"Route"),r.a.createElement("div",{className:"select-container"},r.a.createElement("select",{className:"form-control",value:this.state.routeId,onChange:this.onChangeRoute,ref:this.myRef,name:"routeId"},e.map((function(e){return r.a.createElement("option",{value:e.id},e.name)}))))),r.a.createElement("div",{className:"form-group"},r.a.createElement("label",{htmlFor:"routeSeq"},"Route Sequene"),r.a.createElement("input",{type:"text",className:"form-control",id:"routeSeq",required:!0,value:this.state.routeSeq,onChange:this.onChangeRouteSeq,name:"routeSeq"})),r.a.createElement("div",{className:"form-group"},r.a.createElement("label",{htmlFor:"active"},"Active"),r.a.createElement("input",{type:"checkbox",className:"form-control",id:"active",name:"active",onChange:this.onChangeActive,defaultChecked:this.state.active})),r.a.createElement("button",{onClick:this.saveTutorial,className:"btn btn-success"},"Submit")))}}]),a}(n.Component),E=a(12),C=a(7),j=a(173),D=a(172),Y=new(function(){function e(){Object(l.a)(this,e)}return Object(c.a)(e,[{key:"getAll",value:function(e){return y.get("/customerDeliverys",{params:e})}},{key:"get",value:function(e){return y.get("/customerDeliverys/".concat(e))}},{key:"create",value:function(e){return y.post("/customerDeliverys",e)}},{key:"update",value:function(e,t){return y.put("/customerDeliverys/".concat(e),t)}},{key:"delete",value:function(e){return y.delete("/customerDeliverys/".concat(e))}},{key:"deleteAll",value:function(){return y.delete("/customerDeliverys")}}]),e}()),O=a(175),M=a(179),S=a(178),N=a(174),w=a(176),q=a(177),x=a(170),I=a(169),A=a(182),z=a(180),P=a(181),W=a(167),Q=new(function(){function e(){Object(l.a)(this,e)}return Object(c.a)(e,[{key:"getAll",value:function(e){return y.get("/bills",{params:e})}},{key:"get",value:function(e){return y.get("/bills/".concat(e))}},{key:"create",value:function(e){return y.post("/bills",e)}},{key:"update",value:function(e,t){return y.put("/bills/".concat(e),t)}},{key:"delete",value:function(e){return y.delete("/bills/".concat(e))}},{key:"deleteAll",value:function(){return y.delete("/bills")}}]),e}()),R=function(e){Object(s.a)(a,e);var t=Object(u.a)(a);function a(e){var n;return Object(l.a)(this,a),(n=t.call(this,e)).handleClickOpen=function(){n.setState({open:!0})},n.handleClose=function(){n.setState({open:!1})},n.getCustomerBill=n.getCustomerBill.bind(Object(v.a)(n)),n.savePayment=n.savePayment.bind(Object(v.a)(n)),n.onChangePayment=n.onChangePayment.bind(Object(v.a)(n)),n.handleClickOpen=n.handleClickOpen.bind(Object(v.a)(n)),n.handleClose=n.handleClose.bind(Object(v.a)(n)),n.state={payment:null,prevBill:{},currentBill:{},open:!1},n.getCustomerBill(e),n}return Object(c.a)(a,[{key:"onChangePayment",value:function(e){this.setState({payment:+e.target.value})}},{key:"savePayment",value:function(){var e=this;if(this.state.payment){var t={customerId:this.props.customerId,month:b()(this.props.date,"DD-MMM-YYYY").format("MMM-YYYY"),quantity:this.state.currentBill.quantity,rate:this.state.currentBill.rate,bill:this.state.currentBill.bill,dues:this.state.currentBill.dues,payment:this.state.payment};Q.create(t).then((function(t){e.setState({currentBill:{quantity:e.state.currentBill.quantity,rate:e.state.currentBill.rate,bill:e.state.currentBill.bill,dues:e.state.currentBill.dues,month:b()(e.props.date,"DD-MMM-YYYY").format("MMM-YYYY"),payment:(e.state.currentBill.payment?e.state.currentBill.payment:0)+t.data.payment}}),console.log(t.data),e.handleClickOpen(),e.state.payment=""})).catch((function(e){console.log(e)}))}}},{key:"getCustomerBill",value:function(e){var t=this,a=b()(e.date,"DD-MMM-YYYY"),n=a.format("MMM-YYYY"),r={customerId:e.customerId,month:n},o={month:n};Q.getAll(r).then((function(e){var a=e.data;console.log(a),a&&a.map((function(e){o.quantity=e.quantity,o.rate=e.rate,o.bill=e.bill,o.dues=e.dues,o.payment?o.payment=o.payment+e.payment:o.payment=e.payment})),t.setState({currentBill:o})})).catch((function(e){console.log(e)}));var i=a.subtract(1,"months").format("MMM-YYYY");r={customerId:e.customerId,month:i};var l={month:i};Q.getAll(r).then((function(e){var a=e.data;a&&a.map((function(e){l.quantity=e.quantity,l.rate=e.rate,l.bill=e.bill,l.dues=e.dues,l.payment?l.payment=l.payment+e.payment:l.payment=e.payment})),t.setState({prevBill:l}),console.log(t.state)})).catch((function(e){console.log(e)}))}},{key:"render",value:function(){var e=this.state,t=e.prevBill,a=e.currentBill;return r.a.createElement("div",null,r.a.createElement("h1",{align:"center"},this.props.name),r.a.createElement(D.a,{container:!0,spacing:{xs:4}},r.a.createElement(D.a,{item:!0,xs:12,sm:6},r.a.createElement("div",{className:"form-group"},r.a.createElement("label",{htmlFor:"date"}," Date"),r.a.createElement("input",{type:"text",className:"form-control",id:"date",required:!0,value:this.props.date,onChange:this.props.onDate,name:"date"})),r.a.createElement("div",{className:"form-group"},r.a.createElement("label",{htmlFor:"defaultQuantity"},"Quantity"),r.a.createElement("input",{type:"text",className:"form-control",id:"defaultQuantity",required:!0,value:this.props.defaultQuantity,onChange:this.props.onQuantity,name:"defaultQuantity"})),r.a.createElement("div",{className:"form-group"},r.a.createElement("button",{className:"btn btn-success",onClick:this.props.onPrev},"\u2b05",this.props.previousTitle," ")," ",r.a.createElement("button",{className:"btn btn-success",onClick:this.props.onUpdate},"Update & Next")," ",r.a.createElement("button",{className:"btn btn-success",onClick:this.props.onNext},this.props.nextTitle," ","\u27a1")),r.a.createElement("div",{className:"form-group"},r.a.createElement("button",{className:"btn btn-success",onClick:this.props.onModalClose},"Close Route Delivery"))),r.a.createElement(D.a,{item:!0,xs:12,sm:6},r.a.createElement("div",{className:"form-group"},r.a.createElement(N.a,{component:j.a},r.a.createElement(O.a,{sx:{minWidth:200},"aria-label":"simple table"},r.a.createElement(w.a,null,r.a.createElement(q.a,null,r.a.createElement(S.a,null,"Billing"),r.a.createElement(S.a,{align:"right"},"Prev Month (",t.month,")"),r.a.createElement(S.a,{align:"right"},"Current Month (",a.month,")"))),r.a.createElement(M.a,null,r.a.createElement(q.a,null,r.a.createElement(S.a,{component:"th",scope:"row"},"Quantity"),r.a.createElement(S.a,{align:"right"},t.quantity),r.a.createElement(S.a,{align:"right"},a.quantity)),r.a.createElement(q.a,null,r.a.createElement(S.a,{component:"th",scope:"row"},"Rate"),r.a.createElement(S.a,{align:"right"},t.rate),r.a.createElement(S.a,{align:"right"},a.rate)),r.a.createElement(q.a,null,r.a.createElement(S.a,{component:"th",scope:"row"},"Bill"),r.a.createElement(S.a,{align:"right"},t.bill),r.a.createElement(S.a,{align:"right"},a.bill)),r.a.createElement(q.a,null,r.a.createElement(S.a,{component:"th",scope:"row"},"Payment"),r.a.createElement(S.a,{align:"right"},t.payment),r.a.createElement(S.a,{align:"right"},a.payment)),r.a.createElement(q.a,null,r.a.createElement(S.a,{component:"th",scope:"row"},"Dues"),r.a.createElement(S.a,{align:"right"},t.dues),r.a.createElement(S.a,{align:"right"},a.dues)))))),r.a.createElement("div",{className:"form-group"},r.a.createElement("label",{htmlFor:"payment"},"Payment"),r.a.createElement("input",{type:"text",className:"form-control",id:"payment",required:!0,value:this.state.payment,onChange:this.onChangePayment,name:"payment"})),r.a.createElement("button",{className:"btn btn-success",onClick:this.savePayment},"Payment Received"))),r.a.createElement(I.a,{open:this.state.open,onClose:this.handleClose,"aria-labelledby":"alert-dialog-title","aria-describedby":"alert-dialog-description"},r.a.createElement(W.a,{id:"alert-dialog-title"},"Payments"),r.a.createElement(z.a,null,r.a.createElement(P.a,{id:"alert-dialog-description"},"Payment of amount ",this.state.payment," is confirmed.")),r.a.createElement(A.a,null,r.a.createElement(x.a,{onClick:this.handleClose},"Close"))))}}]),a}(r.a.Component),B=function(e){Object(s.a)(a,e);var t=Object(u.a)(a);function a(e){var n;return Object(l.a)(this,a),(n=t.call(this,e)).handleModalOpen=function(e){n.setState({activeProject:e,modalTitle:n.state.projects[e].name,quantity:n.state.projects[e].defaultQuantity,date:n.state.date,customerId:n.state.projects[e].id})},n.handleModalClose=function(){n.setState({activeProject:""})},n.handleNextProject=function(){var e=n.state.projects.length,t=(t=n.state.activeProject+1)%e;n.setState({activeProject:t,modalTitle:n.state.projects[t].name,quantity:n.state.projects[t].defaultQuantity,date:n.state.date,customerId:n.state.projects[t].id})},n.handlePrevProject=function(){var e=n.state.projects.length;if(0===(t=n.state.activeProject))var t=e-1;else t=t-1;n.setState({activeProject:t,modalTitle:n.state.projects[t].name,quantity:n.state.projects[t].defaultQuantity,date:n.state.date,customerId:n.state.projects[t].id})},n.handleModalUpdate=function(){n.saveDelivery(n.state.customerId,n.state.date,n.state.quantity),n.handleNextProject()},n.getProjects=n.getProjects.bind(Object(v.a)(n)),n.saveDelivery=n.saveDelivery.bind(Object(v.a)(n)),n.onChangeDate=n.onChangeDate.bind(Object(v.a)(n)),n.handleNextProject=n.handleNextProject.bind(Object(v.a)(n)),n.onChangeDefaultQuantity=n.onChangeDefaultQuantity.bind(Object(v.a)(n)),n.state={projects:[],activeProject:"",modalTitle:"",customerId:null,quantity:"",date:b()().format("DD-MMM-YYYY")},n}return Object(c.a)(a,[{key:"componentDidMount",value:function(){this.getProjects(this.props.match.params.id)}},{key:"getProjects",value:function(e){var t=this,a={routeId:e};g.getAll(a).then((function(e){t.setState({projects:e.data}),console.log(e.data)})).catch((function(e){console.log(e)}))}},{key:"onChangeDefaultQuantity",value:function(e){this.setState({quantity:e.target.value})}},{key:"onChangeDate",value:function(e){this.setState({date:e.target.value})}},{key:"saveDelivery",value:function(e,t,a){var n=b()(t,"DD-MMM-YYYY"),r={customerId:e,date:n.format("DD"),month:n.format("MMM-YYYY"),quantity:a},o={customerId:e,date:r.date,month:r.month};Y.getAll(o).then((function(e){e.data&&e.data.length>0?(r.id=e.data[0].id,Y.update(r.id,r).then((function(e){console.log(e.data)})).catch((function(e){console.log(e)}))):Y.create(r).then((function(e){console.log(e.data)})).catch((function(e){console.log(e)}))})).catch((function(e){console.log(e)})),this.state.date=b()().format("DD-MMM-YYYY")}},{key:"render",value:function(){var e=this,t=this.state.projects;var a,n,o=t.map((function(t,a,n){return r.a.createElement(F,{key:"project-"+t.id,index:a,name:t.name,url:t.address,onModalOpen:e.handleModalOpen})}));return""===this.state.activeProject?r.a.createElement("div",null,r.a.createElement(D.a,{container:!0,spacing:{xs:1,md:1},columns:{xs:4,sm:8,md:12}},o)):r.a.createElement("div",null,r.a.createElement(R,{name:this.state.modalTitle,defaultQuantity:this.state.quantity,date:this.state.date,customerId:this.state.customerId,previousTitle:function(e,t){if(0===e)var a=t.length-1;else a=e-1;return t[a].name}(this.state.activeProject,t),nextTitle:(a=this.state.activeProject,n=t,n[(a+1)%n.length].name),onModalClose:this.handleModalClose,onNext:this.handleNextProject,onPrev:this.handlePrevProject,onDate:this.onChangeDate,onQuantity:this.onChangeDefaultQuantity,onUpdate:this.handleModalUpdate}))}}]),a}(n.Component),T=Object(C.a)(j.a)((function(e){var t=e.theme;return Object(E.a)(Object(E.a)({},t.typography.body2),{},{padding:t.spacing(2),textAlign:"center",color:t.palette.text.secondary})})),F=function(e){Object(s.a)(a,e);var t=Object(u.a)(a);function a(){return Object(l.a)(this,a),t.apply(this,arguments)}return Object(c.a)(a,[{key:"render",value:function(){return r.a.createElement(D.a,{item:!0,xs:2,sm:4,md:4,key:this.props.index,onClick:this.props.onModalOpen.bind(this,this.props.index)},r.a.createElement(T,null,r.a.createElement("h1",null,this.props.name," - ",this.props.url)))}}]),a}(r.a.Component),U=function(e){Object(s.a)(a,e);var t=Object(u.a)(a);function a(e){var n;Object(l.a)(this,a),(n=t.call(this,e)).onChangeName=n.onChangeName.bind(Object(v.a)(n)),n.onChangeAddress=n.onChangeAddress.bind(Object(v.a)(n)),n.onChangeStartDate=n.onChangeStartDate.bind(Object(v.a)(n)),n.onChangeActive=n.onChangeActive.bind(Object(v.a)(n)),n.saveTutorial=n.saveTutorial.bind(Object(v.a)(n)),n.newTutorial=n.newTutorial.bind(Object(v.a)(n));var r=new Date;return n.state={id:null,name:"",address:"",active:!0,startDate:r.getDate()+"-"+parseInt(r.getMonth()+1)+"-"+r.getFullYear(),submitted:!1},n}return Object(c.a)(a,[{key:"onChangeName",value:function(e){this.setState({name:e.target.value})}},{key:"onChangeAddress",value:function(e){this.setState({address:e.target.value})}},{key:"onChangeStartDate",value:function(e){this.setState({startDate:e.target.value})}},{key:"onChangeActive",value:function(e){console.log(e.target.checked),this.setState({active:e.target.checked})}},{key:"saveTutorial",value:function(){var e=this,t={name:this.state.name,address:this.state.address,startDate:this.state.startDate,active:this.state.active};console.log(this.state.active),p.create(t).then((function(t){e.setState({id:t.data.id,name:t.data.name,address:t.data.address,active:t.data.active,startDate:t.data.startDate,submitted:!0}),console.log(t.data)})).catch((function(e){console.log(e)}))}},{key:"newTutorial",value:function(){this.today=new Date,this.setState({id:null,name:"",address:"",startDate:this.today.getDate()+"-"+parseInt(this.today.getMonth()+1)+"-"+this.today.getFullYear(),active:!0,submitted:!1})}},{key:"render",value:function(){return r.a.createElement("div",{className:"submit-form"},this.state.submitted?r.a.createElement("div",null,r.a.createElement("h4",null,"You submitted successfully!"),r.a.createElement("button",{className:"btn btn-success",onClick:this.newTutorial},"Add")):r.a.createElement("div",null,r.a.createElement("div",{className:"form-group"},r.a.createElement("label",{htmlFor:"name"},"Route Name"),r.a.createElement("input",{type:"text",className:"form-control",id:"name",required:!0,value:this.state.name,onChange:this.onChangeName,name:"name"})),r.a.createElement("div",{className:"form-group"},r.a.createElement("label",{htmlFor:"address"},"Address"),r.a.createElement("input",{type:"text",className:"form-control",id:"address",required:!0,value:this.state.address,onChange:this.onChangeAddress,name:"address"})),r.a.createElement("button",{onClick:this.saveTutorial,className:"btn btn-success"},"Submit")))}}]),a}(n.Component),L=a(29),J=new(function(){function e(){Object(l.a)(this,e)}return Object(c.a)(e,[{key:"getAll",value:function(e){return y.get("/routeStocks",{params:e})}},{key:"get",value:function(e){return y.get("/routeStocks/".concat(e))}},{key:"create",value:function(e){return y.post("/routeStocks",e)}},{key:"update",value:function(e,t){return y.put("/routeStocks/".concat(e),t)}},{key:"delete",value:function(e){return y.delete("/routeStocks/".concat(e))}},{key:"deleteAll",value:function(){return y.delete("/routeStocks")}}]),e}()),_=a(5),G=[{key:"quantity",name:"Stock (L)",width:40,editor:_.b,resizable:!0},{key:"routeId",name:"Action",width:40,resizable:!0,formatter:function(e){return r.a.createElement(r.a.Fragment,null,r.a.createElement(d.b,{disable:"true",to:e.row.quantity?"/dailyDelivery/"+e.row.id:"",className:"badge badge-warning"},"Start"))}},{key:"delivered",name:"Delivered (L)",width:120,resizable:!0},{key:"served",name:"Customer Served",width:140,resizable:!0},{key:"totalCustomer",name:"Total Customer",width:130,resizable:!0},{key:"id",name:"Route ID",width:80,resizable:!0},{key:"name",name:"Name",editor:_.b,resizable:!0},{key:"address",name:"Address",editor:_.b,resizable:!0}],$=function(e){Object(s.a)(a,e);var t=Object(u.a)(a);function a(e){var n;return Object(l.a)(this,a),(n=t.call(this,e)).rowChange=n.rowChange.bind(Object(v.a)(n)),n.saveRoute=n.saveRoute.bind(Object(v.a)(n)),n.state={rows:[]},n}return Object(c.a)(a,[{key:"componentDidMount",value:function(){this.retrieveRoutes()}},{key:"retrieveRoutes",value:function(){var e=this,t=b()(),a=null;p.getAll().then((function(e){var t=e.data;console.log(t),a=new Array(t.length),t.map((function(e,t){a[t]={},a[t].id=e.id,a[t].name=e.name,a[t].address=e.address})),console.log(a)})).catch((function(e){console.log(e)}));var n={date:t.format("DD"),month:t.format("MMM-YYYY")};J.getAll(n).then((function(e){var t=e.data;t&&t.map((function(e,t){var n,r=Object(L.a)(a);try{for(r.s();!(n=r.n()).done;){var o=n.value;if(o.id==e.routeId){o.quantity=e.quantity,o.routeStockId=e.id;break}}}catch(i){r.e(i)}finally{r.f()}}))})).catch((function(e){console.log(e)}));var r=null;g.getAll({active:!0}).then((function(e){r=e.data,a.map((function(e,t){var a,n=0,o=Object(L.a)(r);try{for(o.s();!(a=o.n()).done;){var i=a.value;e.id==i.routeId&&(e.customerId?e.customerId[e.customerId.length]=i.id:(e.customerId=[],e.customerId[0]=i.id),n++)}}catch(l){o.e(l)}finally{o.f()}e.totalCustomer=n}))})).catch((function(e){console.log(e)})),Y.getAll(n).then((function(t){var n=t.data;n&&a.map((function(e,t){var a=0,r=0;n.map((function(t){if(e.customerId)for(var n=0;n<e.customerId.length;n++)if(e.customerId[n]==t.customerId){r++,a+=+t.quantity;break}})),e.served=r,e.delivered=a})),console.log(a),e.setState({rows:a})})).catch((function(e){console.log(e)}))}},{key:"rowChange",value:function(e,t){this.saveRoute(e[t.indexes],t),this.setState({rows:e})}},{key:"saveRoute",value:function(e,t){if("quantity"!=t.column.key){var a={id:e.id,name:e.name,address:e.address};p.update(e.id,a).then((function(e){console.log(e.data)})).catch((function(e){console.log(e)}))}else{(a={id:e.routeStockId,routeId:e.id,quantity:+e.quantity,date:b()().format("DD"),month:b()().format("MMM-YYYY")}).id?J.update(a.id,a).then((function(t){console.log(t.data),e.routeStockId=t.data.id})).catch((function(e){console.log(e)})):J.create(a).then((function(t){console.log(t.data),e.routeStockId=t.data.id})).catch((function(e){console.log(e)}))}}},{key:"render",value:function(){var e=this.state.rows;return r.a.createElement("div",null,r.a.createElement(D.a,{container:!0,spacing:{xs:4}},r.a.createElement(D.a,{item:!0,xs:6,sm:6},r.a.createElement(d.b,{to:"/route",className:"nav-link"},"Add Route")),r.a.createElement(D.a,{item:!0,xs:6,sm:6},r.a.createElement(d.b,{className:"nav-link"},b()().format("DD-MMM-YYYY")))),r.a.createElement(_.c,{columns:G,rows:e,onRowsChange:this.rowChange}))}}]),a}(n.Component),H=a(8),K=[{key:"id",name:"ID",minWidth:40,resizable:!0},{key:"name",name:"Name",width:200,resizable:!0},{key:"01",name:"1",editor:_.b,minWidth:40,resizable:!0},{key:"02",name:"2",editor:_.b,minWidth:40,resizable:!0},{key:"03",name:"3",editor:_.b,minWidth:40,resizable:!0},{key:"04",name:"4",editor:_.b,minWidth:40,resizable:!0},{key:"05",name:"5",editor:_.b,minWidth:40,resizable:!0},{key:"06",name:"6",editor:_.b,minWidth:40,resizable:!0},{key:"07",name:"7",editor:_.b,minWidth:40,resizable:!0},{key:"08",name:"8",editor:_.b,minWidth:40,resizable:!0},{key:"09",name:"9",editor:_.b,minWidth:40,resizable:!0},{key:"10",name:"10",editor:_.b,minWidth:40,resizable:!0},{key:"11",name:"11",editor:_.b,minWidth:40,resizable:!0},{key:"12",name:"12",editor:_.b,minWidth:40,resizable:!0},{key:"13",name:"13",editor:_.b,minWidth:40,resizable:!0},{key:"14",name:"14",editor:_.b,minWidth:40,resizable:!0},{key:"15",name:"15",editor:_.b,minWidth:40,resizable:!0},{key:"16",name:"16",editor:_.b,minWidth:40,resizable:!0},{key:"17",name:"17",editor:_.b,minWidth:40,resizable:!0},{key:"18",name:"18",editor:_.b,minWidth:40,resizable:!0},{key:"19",name:"19",editor:_.b,minWidth:40,resizable:!0},{key:"20",name:"20",editor:_.b,minWidth:40,resizable:!0},{key:"21",name:"21",editor:_.b,minWidth:40,resizable:!0},{key:"22",name:"22",editor:_.b,minWidth:40,resizable:!0},{key:"23",name:"23",editor:_.b,minWidth:40,resizable:!0},{key:"24",name:"24",editor:_.b,minWidth:40,resizable:!0},{key:"25",name:"25",editor:_.b,minWidth:40,resizable:!0},{key:"26",name:"26",editor:_.b,minWidth:40,resizable:!0},{key:"27",name:"27",editor:_.b,minWidth:40,resizable:!0},{key:"28",name:"28",editor:_.b,minWidth:40,resizable:!0},{key:"29",name:"29",editor:_.b,minWidth:40,resizable:!0},{key:"30",name:"30",editor:_.b,minWidth:40,resizable:!0},{key:"31",name:"31",editor:_.b,minWidth:40,resizable:!0},{key:"qty",name:"Qty",minWidth:40,resizable:!0},{key:"rate",name:"Rate",minWidth:40,resizable:!0},{key:"bill",name:"Bill",minWidth:40,resizable:!0},{key:"dues",name:"Dues",minWidth:40,resizable:!0},{key:"totalBill",name:"Total",minWidth:60,resizable:!0},{key:"paid",name:"Paid",minWidth:60,resizable:!0}],V=function(e){var t,a={currentDate:b()()},o=Object(n.useState)([]),i=Object(H.a)(o,2),l=i[0],c=i[1],s=Object(n.useState)(a),u=Object(H.a)(s,2),m=u[0],h=u[1];return Object(n.useEffect)((function(){var t={currentDate:b()(e.match.params.date,"MMM-YYYY")};h(t);var a=null;g.getAll({active:!0}).then((function(e){var t=e.data;a=new Array(t.length),t.map((function(e,t){a[t]={},a[t].id=e.id,a[t].name=e.name}))})).catch((function(e){console.log(e)}));var n={month:t.currentDate.format("MMM-YYYY")};console.log(n),Y.getAll(n).then((function(e){e.data.map((function(e){var t,n=Object(L.a)(a);try{for(n.s();!(t=n.n()).done;){var r=t.value;if(r.id==e.customerId){r[e.date]=e.quantity,r["id"+e.date]=e.id;break}}}catch(o){n.e(o)}finally{n.f()}})),console.log(a),c(a)})).catch((function(e){console.log(e)}));var r={month:t.currentDate.format("MMM-YYYY")};console.log(r),Q.getAll(r).then((function(e){var t=e.data;console.log(t),t.map((function(e){var t,n=Object(L.a)(a);try{for(n.s();!(t=n.n()).done;){var r=t.value;if(r.id==e.customerId){r.qty=e.quantity,r.rate=e.rate,r.bill=e.bill,r.dues=e.dues,r.totalBill=r.bill+(r.dues?r.dues:0),r.paid?r.paid=r.paid+e.payment:r.paid=+e.payment;break}}}catch(o){n.e(o)}finally{n.f()}}))})).catch((function(e){console.log(e)}))}),[e.match.params.date]),r.a.createElement("div",null,m?r.a.createElement("div",{className:"list row"},r.a.createElement(D.a,{container:!0,spacing:{xs:4}},r.a.createElement(D.a,{item:!0,xs:6,sm:6},r.a.createElement(d.b,{to:"/customerCalendar/"+m.currentDate.clone().subtract(1,"months").format("MMM-YYYY"),className:"badge badge-warning"},"Prev"),m.currentDate.format("DD-MMM-YYYY"),r.a.createElement(d.b,{to:"/customerCalendar/"+m.currentDate.clone().add(1,"months").format("MMM-YYYY"),className:"badge badge-warning"},"Next")),r.a.createElement(D.a,{item:!0,xs:6,sm:6},r.a.createElement(d.b,{onClick:(t=m.currentDate.format("DD-MMM-YYYY"),void console.log(t)),className:"badge"},"Generate Bill For this Month")))):r.a.createElement("div",null,r.a.createElement("br",null),r.a.createElement("p",null,"Please click on a Customer...")),r.a.createElement(_.c,{columns:K,rows:l,onRowsChange:function(e,t){!function(e,t){var a=e[t.indexes][t.column.key],n=e[t.indexes]["id"+t.column.key];console.log(e[t.indexes].id+" - "+a+" - "+n),function(e,t,a,n,r,o){var i={customerId:e,date:t,month:a.format("MMM-YYYY"),quantity:n};r?Y.update(r,i).then((function(e){console.log(e.data)})).catch((function(e){console.log(e)})):Y.create(i).then((function(e){o["id"+t]=e.data.id,console.log(o)})).catch((function(e){console.log(e)}))}(e[t.indexes].id,t.column.key,m.currentDate,a,n,e[t.indexes])}(e,t),c(e)}}))};function X(e){e.stopPropagation()}var Z=[{key:"id",name:"ID",width:40,resizable:!0},{key:"name",name:"Name",editor:_.b,resizable:!0},{key:"address",name:"Address",editor:_.b,resizable:!0},{key:"startDate",name:"StartDate",editor:_.b,resizable:!0},{key:"endDate",name:"EndDate",editor:_.b,resizable:!0},{key:"defaultQuantity",name:"Quantity",width:40,editor:_.b,resizable:!0},{key:"active",name:"Active",width:40,formatter:function(e){var t=e.row,a=e.onRowChange,n=e.isCellSelected;return r.a.createElement(_.a,{value:t.active,onChange:function(){a(Object(E.a)(Object(E.a)({},t),{},{active:!t.active}))},onClick:X,isCellSelected:n})}},{key:"routeId",name:"Route",resizable:!0,formatter:function(e){return r.a.createElement(r.a.Fragment,null,e.row.routeName)},editor:function(e){var t=e.row,a=e.onRowChange,o=function(){var e=Object(n.useState)(),t=Object(H.a)(e,2),a=t[0],r=t[1];return Object(n.useEffect)((function(){a&&0!==a.length||p.getAll().then((function(e){r(e.data),console.log(a)})).catch((function(e){console.log(e)}))}),[a]),{selectData:a}}().selectData;return r.a.createElement("select",{className:_.b.textEditorClassname,value:t.routeId,onChange:function(e){return a(Object(E.a)(Object(E.a)({},t),{},{routeId:e.target.value}),!0)},autoFocus:!0},o&&o.map((function(e){return r.a.createElement("option",{key:e.id,value:e.id},e.name)})))},editorOptions:{editOnClick:!0}},{key:"routeSeq",name:"Seq",width:40,editor:_.b,resizable:!0}],ee=function(e){var t=Object(n.useState)([]),a=Object(H.a)(t,2),o=a[0],i=a[1];return Object(n.useEffect)((function(){var e=null;g.getAll({_sort:"routeId",_order:"asc"}).then((function(t){var a=t.data;e=new Array(a.length),a.map((function(t,a){e[a]={},e[a].id=t.id,e[a].name=t.name,e[a].address=t.address,e[a].startDate=t.startDate,e[a].endDate=t.endDate,e[a].defaultQuantity=t.defaultQuantity,e[a].active=t.active,e[a].routeId=t.routeId,e[a].routeSeq=t.routeSeq,t.route&&(e[a].routeName=t.route.name)})),i(e)})).catch((function(e){console.log(e)}))}),[]),r.a.createElement("div",null,r.a.createElement(d.b,{to:"/addCustomer",className:"nav-link"},"Add Customer"),r.a.createElement("div",null,r.a.createElement(_.c,{columns:Z,rows:o,onRowsChange:function(e,t){!function(e,t){console.log(e[t.indexes].id+" - "+e[t.indexes][t.column.key]),function(e){var t={id:e.id,name:e.name,address:e.address,startDate:e.startDate,endDate:e.endDate,active:e.active,routeId:e.routeId,defaultQuantity:e.defaultQuantity,routeSeq:e.routeSeq};g.update(e.id,t).then((function(e){console.log(e.data)})).catch((function(e){console.log(e)}))}(e[t.indexes])}(e,t),i(e)}})))},te=function(e){Object(s.a)(a,e);var t=Object(u.a)(a);function a(){return Object(l.a)(this,a),t.apply(this,arguments)}return Object(c.a)(a,[{key:"render",value:function(){return r.a.createElement(d.a,null,r.a.createElement("div",null,r.a.createElement("nav",{className:"navbar navbar-expand navbar-dark bg-dark"},r.a.createElement("div",{className:"navbar-nav mr-auto"},r.a.createElement("li",{className:"nav-item"},r.a.createElement(d.b,{to:"/routes",className:"nav-link"},"Routes")),r.a.createElement("li",{className:"nav-item"},r.a.createElement(d.b,{to:"/customers",className:"nav-link"},"Customers")),r.a.createElement("li",{className:"nav-item"},r.a.createElement(d.b,{to:"/customerCalendar/"+b()().format("MMM-YYYY"),className:"nav-link"},"Customer-Calendar")))),r.a.createElement("div",{className:"container mt-3"},r.a.createElement(m.c,null,r.a.createElement(m.a,{exact:!0,path:["/","/routes"],component:$}),r.a.createElement(m.a,{exact:!0,path:"/customers",component:ee}),r.a.createElement(m.a,{exact:!0,path:"/addCustomer",component:k}),r.a.createElement(m.a,{exact:!0,path:"/dailyDelivery/:id",component:B}),r.a.createElement(m.a,{exact:!0,path:"/route",component:U}),r.a.createElement(m.a,{exact:!0,path:"/routes",component:$}),r.a.createElement(m.a,{exact:!0,path:"/customerCalendar/:date",component:V})))))}}]),a}(n.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var ae=a(168);i.a.render(r.a.createElement(ae.a,{injectFirst:!0},r.a.createElement(te,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))},99:function(e,t,a){e.exports=a(134)}},[[99,1,2]]]);
//# sourceMappingURL=main.962c0a74.chunk.js.map