(this["webpackJsonpreact-pagination"]=this["webpackJsonpreact-pagination"]||[]).push([[0],{108:function(e,t,n){},110:function(e,t,n){},143:function(e,t,n){"use strict";n.r(t);var a=n(1),i=n.n(a),c=n(41),r=n.n(c),o=(n(108),n(11)),s=n(12),l=n(22),d=n(23),u=n(16),j=n(25),h=(n(109),n(110),n(10)),b=n.n(h),m=n(5),O=n(92),f=n.n(O).a.create({baseURL:"http://dairyweb-env.eba-rp2mcr7k.ap-south-1.elasticbeanstalk.com/api",headers:{"Content-type":"application/json","Access-Control-Allow-Origin":"*"}}),p=new(function(){function e(){Object(o.a)(this,e)}return Object(s.a)(e,[{key:"getAll",value:function(e){return f.get("/partys",{params:e})}},{key:"get",value:function(e){return f.get("/partys/".concat(e))}},{key:"create",value:function(e){return f.post("/partys",e)}},{key:"update",value:function(e,t){return f.put("/partys/".concat(e),t)}},{key:"updateMobNo",value:function(e,t,n){return f.put("/partys/".concat(e,"/").concat(t),n)}},{key:"delete",value:function(e){return f.delete("/partys/".concat(e))}},{key:"deleteAll",value:function(){return f.delete("/partys")}}]),e}()),y=new(function(){function e(){Object(o.a)(this,e)}return Object(s.a)(e,[{key:"getAll",value:function(e){return f.get("/routes",{params:e})}},{key:"get",value:function(e){return f.get("/routes/".concat(e))}},{key:"create",value:function(e){return f.post("/routes",e)}},{key:"update",value:function(e,t){return f.put("/routes/".concat(e),t)}},{key:"delete",value:function(e){return f.delete("/routes/".concat(e))}},{key:"deleteAll",value:function(){return f.delete("/routes")}}]),e}()),x=n(0),v=function(e){Object(l.a)(n,e);var t=Object(d.a)(n);function n(e){var a;Object(o.a)(this,n),(a=t.call(this,e)).onChangeName=a.onChangeName.bind(Object(m.a)(a)),a.onChangeAddress=a.onChangeAddress.bind(Object(m.a)(a)),a.onChangeMobNo=a.onChangeMobNo.bind(Object(m.a)(a)),a.onChangeStartDate=a.onChangeStartDate.bind(Object(m.a)(a)),a.onChangeActive=a.onChangeActive.bind(Object(m.a)(a)),a.onChangeRoute=a.onChangeRoute.bind(Object(m.a)(a)),a.onChangeType=a.onChangeType.bind(Object(m.a)(a)),a.onChangeDefaultQuantity=a.onChangeDefaultQuantity.bind(Object(m.a)(a)),a.onChangeRouteSeq=a.onChangeRouteSeq.bind(Object(m.a)(a)),a.saveTutorial=a.saveTutorial.bind(Object(m.a)(a)),a.newTutorial=a.newTutorial.bind(Object(m.a)(a)),a.getRoute=a.getRoute.bind(Object(m.a)(a)),a.myRef=i.a.createRef(),a.myRefType=i.a.createRef();var c=b()();return a.state={id:null,name:"",address:"",mobNo:"",type:"",active:!0,startDate:c.format("DD-MMM-YYYY"),routeId:"",defaultQuantity:1,routes:[],routeSeq:null,submitted:!1},a}return Object(s.a)(n,[{key:"onChangeType",value:function(e){this.setState({type:e.target.value})}},{key:"onChangeName",value:function(e){this.setState({name:e.target.value})}},{key:"onChangeAddress",value:function(e){this.setState({address:e.target.value})}},{key:"onChangeMobNo",value:function(e){e.target.value.length<11&&this.setState({mobNo:e.target.value})}},{key:"onChangeRouteSeq",value:function(e){this.setState({routeSeq:e.target.value})}},{key:"onChangeStartDate",value:function(e){this.setState({startDate:e.target.value})}},{key:"onChangeActive",value:function(e){this.setState({active:e.target.checked})}},{key:"onChangeRoute",value:function(e){this.setState({routeId:e.target.value})}},{key:"onChangeDefaultQuantity",value:function(e){this.setState({defaultQuantity:e.target.value})}},{key:"saveTutorial",value:function(e){var t=this;e.target.disabled=!0;var n={name:this.state.name,address:this.state.address,mobNo:this.state.mobNo,startDate:this.state.startDate,active:this.state.active,routeId:this.myRef.current.value,type:this.myRefType.current.value,defaultQuantity:this.state.defaultQuantity,routeSeq:this.state.routeSeq};console.log(n),this.setState({submitted:!0}),p.create(n).then((function(n){t.setState({id:n.data.id,name:n.data.name,address:n.data.address,mobNo:Response.data.mobNo,active:n.data.active,startDate:n.data.startDate,routeId:n.data.routeId,type:n.data.type,defaultQuantity:n.data.defaultQuantity,routeSeq:n.data.routeSeq,submitted:!0}),e.target.disabled=!1,console.log(n.data)})).catch((function(e){console.log(e)}))}},{key:"newTutorial",value:function(){this.setState({id:null,name:"",address:"",mobNo:"",startDate:b()().format("DD-MMM-YYYY"),active:!0,routeId:"",type:"",defaultQuantity:1,routeSeq:null,submitted:!1})}},{key:"componentDidMount",value:function(){this.getRoute()}},{key:"getRoute",value:function(){var e=this;y.getAll().then((function(t){e.setState({routes:t.data}),console.log(t.data)})).catch((function(e){console.log(e)}))}},{key:"render",value:function(){var e=this.state.routes;return Object(x.jsx)("div",{className:"submit-form",children:this.state.submitted?Object(x.jsxs)("div",{children:[Object(x.jsx)("h4",{children:"You submitted successfully!"}),Object(x.jsx)("button",{className:"btn btn-success",onClick:this.newTutorial,children:"Add"})]}):Object(x.jsxs)("div",{children:[Object(x.jsxs)("div",{className:"form-group",children:[Object(x.jsx)("label",{htmlFor:"name",children:"Customer Name"}),Object(x.jsx)("input",{type:"text",className:"form-control",id:"name",required:!0,value:this.state.name,onChange:this.onChangeName,name:"name"})]}),Object(x.jsxs)("div",{className:"form-group",children:[Object(x.jsx)("label",{htmlFor:"address",children:"Address"}),Object(x.jsx)("input",{type:"text",className:"form-control",id:"address",required:!0,value:this.state.address,onChange:this.onChangeAddress,name:"address"})]}),Object(x.jsxs)("div",{className:"form-group",children:[Object(x.jsx)("label",{htmlFor:"mobNo",children:"MobNo"}),Object(x.jsx)("input",{type:"number",className:"form-control phone validate",id:"mobNo",required:!0,value:this.state.mobNo,onChange:this.onChangeMobNo,name:"mobNo"})]}),Object(x.jsxs)("div",{className:"form-group",children:[Object(x.jsx)("label",{htmlFor:"startDate",children:"Start Date"}),Object(x.jsx)("input",{type:"text",className:"form-control",id:"startDate",required:!0,value:this.state.startDate,onChange:this.onChangeStartDate,name:"startDate"})]}),Object(x.jsxs)("div",{className:"form-group",children:[Object(x.jsx)("label",{htmlFor:"defaultQuantity",children:"Default Quantity"}),Object(x.jsx)("input",{type:"number",className:"form-control",id:"defaultQuantity",required:!0,value:this.state.defaultQuantity,onChange:this.onChangeDefaultQuantity,name:"defaultQuantity"})]}),Object(x.jsxs)("div",{className:"form-group",children:[Object(x.jsx)("label",{htmlFor:"routeId",children:"Route"}),Object(x.jsx)("div",{className:"select-container",children:Object(x.jsx)("select",{className:"form-control",value:this.state.routeId,onChange:this.onChangeRoute,ref:this.myRef,name:"routeId",children:e.map((function(e){return Object(x.jsx)("option",{value:e.id,children:e.name})}))})})]}),Object(x.jsxs)("div",{className:"form-group",children:[Object(x.jsx)("label",{htmlFor:"routeSeq",children:"Route Sequene"}),Object(x.jsx)("input",{type:"number",className:"form-control",id:"routeSeq",required:!0,value:this.state.routeSeq,onChange:this.onChangeRouteSeq,name:"routeSeq"})]}),Object(x.jsxs)("div",{className:"form-group",children:[Object(x.jsx)("label",{htmlFor:"type",children:"Type"}),Object(x.jsx)("div",{className:"select-container",children:Object(x.jsxs)("select",{className:"form-control",value:this.state.type,onChange:this.onChangeType,ref:this.myRefType,name:"type",children:[Object(x.jsx)("option",{value:"customer",children:"Customer"}),Object(x.jsx)("option",{value:"staff",children:"Staff"}),Object(x.jsx)("option",{value:"vendor",children:"Vendor"}),Object(x.jsx)("option",{value:"farmer",children:"Farmer"}),Object(x.jsx)("option",{value:"chicken",children:"Chicken"}),Object(x.jsx)("option",{value:"car",children:"Car"}),Object(x.jsx)("option",{value:"ace",children:"Ace"}),Object(x.jsx)("option",{value:"vegetable",children:"Vegetable"}),Object(x.jsx)("option",{value:"grains",children:"Grains"}),Object(x.jsx)("option",{value:"fuel",children:"Fuel"})]})})]}),Object(x.jsxs)("div",{className:"form-group",children:[Object(x.jsx)("label",{htmlFor:"active",children:"Active"}),Object(x.jsx)("input",{type:"checkbox",className:"form-control",id:"active",name:"active",onChange:this.onChangeActive,defaultChecked:this.state.active})]}),Object(x.jsx)("button",{onClick:this.saveTutorial,className:"btn btn-success",children:"Submit"})]})})}}]),n}(a.Component),g=new(function(){function e(){Object(o.a)(this,e)}return Object(s.a)(e,[{key:"getAll",value:function(e){return f.get("/products",{params:e})}},{key:"get",value:function(e){return f.get("/products/".concat(e))}},{key:"create",value:function(e){return f.post("/products",e)}},{key:"update",value:function(e,t){return f.put("/products/".concat(e),t)}},{key:"delete",value:function(e){return f.delete("/products/".concat(e))}},{key:"deleteAll",value:function(){return f.delete("/products")}}]),e}()),C=function(e){Object(l.a)(n,e);var t=Object(d.a)(n);function n(e){var a;Object(o.a)(this,n),(a=t.call(this,e)).onChangeName=a.onChangeName.bind(Object(m.a)(a)),a.onChangeminRate=a.onChangeminRate.bind(Object(m.a)(a)),a.onChangemaxRate=a.onChangemaxRate.bind(Object(m.a)(a)),a.onChangephoto=a.onChangephoto.bind(Object(m.a)(a)),a.onChangedescription=a.onChangedescription.bind(Object(m.a)(a)),a.onChangeunitOfQuantity=a.onChangeunitOfQuantity.bind(Object(m.a)(a)),a.onChangeType=a.onChangeType.bind(Object(m.a)(a)),a.saveTutorial=a.saveTutorial.bind(Object(m.a)(a)),a.newTutorial=a.newTutorial.bind(Object(m.a)(a));b()();return a.state={id:null,name:"",minRate:"",maxRate:"",photo:"",description:"",unitOfQuantity:"",submitted:!1},a}return Object(s.a)(n,[{key:"onChangeType",value:function(e){this.setState({type:e.target.value})}},{key:"onChangeName",value:function(e){this.setState({name:e.target.value})}},{key:"onChangeminRate",value:function(e){this.setState({minRate:e.target.value})}},{key:"onChangemaxRate",value:function(e){this.setState({maxRate:e.target.value})}},{key:"onChangephoto",value:function(e){this.setState({photo:e.target.value})}},{key:"onChangedescription",value:function(e){this.setState({description:e.target.value})}},{key:"onChangeunitOfQuantity",value:function(e){this.setState({unitOfQuantity:e.target.checked})}},{key:"saveTutorial",value:function(e){var t=this;e.target.disabled=!0;var n={name:this.state.name,minRate:this.state.minRate,maxRate:this.state.maxRate,photo:this.state.photo,description:this.state.description,unitOfQuantity:this.state.unitOfQuantity};console.log(n),this.setState({submitted:!0}),g.create(n).then((function(n){t.setState({id:n.data.id,name:n.data.name,minRate:n.data.minRate,maxRate:Response.data.maxRate,photo:n.data.photo,description:n.data.description,submitted:!0}),e.target.disabled=!1,console.log(n.data)})).catch((function(e){console.log(e)}))}},{key:"newTutorial",value:function(){this.setState({id:null,name:"",minRate:"",maxRate:"",photo:"",description:"",unitOfQuantity:"",submitted:!1})}},{key:"componentDidMount",value:function(){}},{key:"render",value:function(){this.state.products;return Object(x.jsx)("div",{className:"submit-form",children:this.state.submitted?Object(x.jsxs)("div",{children:[Object(x.jsx)("h4",{children:"You submitted successfully!"}),Object(x.jsx)("button",{className:"btn btn-success",onClick:this.newTutorial,children:"Add"})]}):Object(x.jsxs)("div",{children:[Object(x.jsxs)("div",{className:"form-group",children:[Object(x.jsx)("label",{htmlFor:"name",children:"Product Name"}),Object(x.jsx)("input",{type:"text",className:"form-control",id:"name",required:!0,value:this.state.name,onChange:this.onChangeName,name:"name"})]}),Object(x.jsxs)("div",{className:"form-group",children:[Object(x.jsx)("label",{htmlFor:"minRate",children:"MinRate"}),Object(x.jsx)("input",{type:"number",className:"form-control",id:"minRate",required:!0,value:this.state.minRate,onChange:this.onChangeminRate,name:"minRate"})]}),Object(x.jsxs)("div",{className:"form-group",children:[Object(x.jsx)("label",{htmlFor:"maxRate",children:"MaxRate"}),Object(x.jsx)("input",{type:"number",className:"form-control",id:"maxRate",required:!0,value:this.state.maxRate,onChange:this.onChangemaxRate,name:"maxRate"})]}),Object(x.jsxs)("div",{className:"form-group",children:[Object(x.jsx)("label",{htmlFor:"photo",children:"Photo"}),Object(x.jsx)("input",{type:"text",className:"form-control",id:"photo",required:!0,value:this.state.photo,onChange:this.onChangephoto,name:"photo"})]}),Object(x.jsxs)("div",{className:"form-group",children:[Object(x.jsx)("label",{htmlFor:"description",children:"Description"}),Object(x.jsx)("input",{type:"text",className:"form-control",id:"description",required:!0,value:this.state.description,onChange:this.onChangedescription,name:"description"})]}),Object(x.jsxs)("div",{className:"form-group",children:[Object(x.jsx)("label",{htmlFor:"unitOfQuantity",children:"Unit Of Quantity Quantity"}),Object(x.jsx)("input",{type:"text",className:"form-control",id:"unitOfQuantity",required:!0,value:this.state.unitOfQuantity,onChange:this.onChangeunitOfQuantity,name:"unitOfQuantity"})]}),Object(x.jsx)("button",{onClick:this.saveTutorial,className:"btn btn-success",children:"Submit"})]})})}}]),n}(a.Component),k=n(15),D=n(13),M=n(3),Y=n(26),N=n(4),S=n(20),w=new(function(){function e(){Object(o.a)(this,e)}return Object(s.a)(e,[{key:"getAll",value:function(e){return f.get("/dailyBills",{params:e})}},{key:"get",value:function(e){return f.get("/dailyBills/".concat(e))}},{key:"create",value:function(e){return f.post("/dailyBills",e)}},{key:"update",value:function(e,t){return f.put("/dailyBills/".concat(e),t)}},{key:"delete",value:function(e){return f.delete("/dailyBills/".concat(e))}},{key:"deleteAll",value:function(){return f.delete("/dailyBills")}}]),e}()),R=new(function(){function e(){Object(o.a)(this,e)}return Object(s.a)(e,[{key:"getAll",value:function(e){return f.get("/routeStocks",{params:e})}},{key:"get",value:function(e){return f.get("/routeStocks/".concat(e))}},{key:"create",value:function(e){return f.post("/routeStocks",e)}},{key:"update",value:function(e,t){return f.put("/routeStocks/".concat(e),t)}},{key:"delete",value:function(e){return f.delete("/routeStocks/".concat(e))}},{key:"deleteAll",value:function(){return f.delete("/routeStocks")}}]),e}()),I=n(8);function q(e){e&&e.select(),e&&e.focus()}function A(e){var t=e.row,n=e.column,a=e.onRowChange,i=e.onClose;return Object(x.jsx)("input",{type:"number",inputmode:"numeric",className:"rdg-text-editor textEditor",ref:q,value:t[n.key],onChange:function(e){return a(Object(M.a)(Object(M.a)({},t),{},Object(I.a)({},n.key,e.target.value)))},onBlur:function(){return i(!0)}})}var B=n(176),P=[{key:"quantity",name:"Stock Q",width:40,editor:A,editorOptions:{editOnClick:!0},resizable:!0},{key:"routeId",name:"Action",width:40,resizable:!0,formatter:function(e){return Object(x.jsx)(x.Fragment,{children:Object(x.jsx)(u.b,{disable:"true",to:e.row.quantity?"/gui/dailyDelivery/"+e.row.id:"",className:"badge badge-warning",children:"Start"})})}},{key:"delivered",name:"Delivered Q",width:100,resizable:!0},{key:"pending",name:"Pending",width:80,resizable:!0,formatter:function(e){return Object(x.jsx)(x.Fragment,{children:Object(x.jsxs)(u.b,{disable:"true",to:e.row.quantity?"/gui/dailyDelivery/"+e.row.id+"/"+e.row.pending:"",className:"badge badge-warning",children:["Pending - ",e.row.pending]})})}},{key:"served",name:"Customer Served",width:140,resizable:!0},{key:"totalCustomer",name:"Total Customer",width:130,resizable:!0},{key:"customerQuantity",name:"Required Q",width:100,resizable:!0},{key:"id",name:"Route ID",width:80,resizable:!0},{key:"name",name:"Name",editor:S.b,editorOptions:{editOnClick:!0},resizable:!0},{key:"address",name:"Address",editor:S.b,editorOptions:{editOnClick:!0},resizable:!0}],z=function(e){Object(l.a)(n,e);var t=Object(d.a)(n);function n(e){var a;return Object(o.a)(this,n),(a=t.call(this,e)).rowChange=a.rowChange.bind(Object(m.a)(a)),a.saveRoute=a.saveRoute.bind(Object(m.a)(a)),a.routeStockService=a.routeStockService.bind(Object(m.a)(a)),a.customerService=a.customerService.bind(Object(m.a)(a)),a.deliveryService=a.deliveryService.bind(Object(m.a)(a)),a.state={rows:[]},a}return Object(s.a)(n,[{key:"componentDidMount",value:function(){this.retrieveRoutes()}},{key:"retrieveRoutes",value:function(){var e=this,t=b()(),n=null;y.getAll().then((function(a){var i=a.data;console.log(i),n=new Array(i.length),i.map((function(e,t){n[t]={},n[t].id=e.id,n[t].name=e.name,n[t].address=e.address}));var c={date:t.format("DD"),month:t.format("MMM-YYYY"),type:"income"};e.routeStockService(c,n),e.customerService(c,n)})).catch((function(e){console.log(e)}))}},{key:"routeStockService",value:function(e,t){R.getAll(e).then((function(e){var n=e.data;n&&n.map((function(e,n){var a,i=Object(k.a)(t);try{for(i.s();!(a=i.n()).done;){var c=a.value;if(c.id==e.routeId){c.quantity=e.quantity,c.routeStockId=e.id;break}}}catch(r){i.e(r)}finally{i.f()}}))})).catch((function(e){console.log(e)}))}},{key:"customerService",value:function(e,t){var n=this,a=null;p.getAll({active:!0,type:"customer"}).then((function(i){a=i.data,t.map((function(e,t){var n,i=0,c=0,r=Object(k.a)(a);try{for(r.s();!(n=r.n()).done;){var o=n.value;e.id==o.routeId&&(e.partyId?e.partyId[e.partyId.length]=o.id:(e.partyId=[],e.partyId[0]=o.id),i++,c+=o.defaultQuantity)}}catch(s){r.e(s)}finally{r.f()}e.totalCustomer=i,e.customerQuantity=c})),n.deliveryService(e,t)})).catch((function(e){console.log(e)}))}},{key:"deliveryService",value:function(e,t){var n=this;w.getAll(e).then((function(e){var a=e.data;a&&t.map((function(e,t){var n=0,i=0;a.map((function(t){if(e.partyId)for(var a=0;a<e.partyId.length;a++)if(e.partyId[a]==t.partyId){i++,n+=+t.quantity;break}})),e.served=i,e.delivered=n,e.pending=e.totalCustomer-i})),console.log(t),n.setState({rows:t})})).catch((function(e){console.log(e)}))}},{key:"rowChange",value:function(e,t){this.saveRoute(e[t.indexes],t),this.setState({rows:e})}},{key:"saveRoute",value:function(e,t){if("quantity"!=t.column.key){var n={id:e.id,name:e.name,address:e.address};y.update(e.id,n).then((function(e){console.log(e.data)})).catch((function(e){console.log(e)}))}else{(n={id:e.routeStockId,routeId:e.id,quantity:+e.quantity,date:b()().format("DD"),month:b()().format("MMM-YYYY")}).id?R.update(n.id,n).then((function(t){console.log(t.data),e.routeStockId=t.data.id})).catch((function(e){console.log(e)})):R.create(n).then((function(t){console.log(t.data),e.routeStockId=t.data.id})).catch((function(e){console.log(e)}))}}},{key:"render",value:function(){var e=this.state.rows;return Object(x.jsxs)("div",{children:[Object(x.jsxs)(B.a,{container:!0,spacing:{xs:4},children:[Object(x.jsx)(B.a,{item:!0,xs:6,sm:6,children:Object(x.jsx)(u.b,{to:"/gui/route",className:"nav-link",children:"Add Route"})}),Object(x.jsx)(B.a,{item:!0,xs:6,sm:6,children:Object(x.jsx)(u.b,{className:"nav-link",children:b()().format("DD-MMM-YYYY")})})]}),Object(x.jsx)(S.c,{columns:P,rows:e,onRowsChange:this.rowChange})]})}}]),n}(a.Component);function T(e){var t=e.row,n=e.onRowChange,i=function(){var e=Object(a.useState)(),t=Object(N.a)(e,2),n=t[0],i=t[1];return Object(a.useEffect)((function(){n&&0!==n.length||y.getAll().then((function(e){i(e.data),console.log(n)})).catch((function(e){console.log(e)}))}),[n]),{selectData:n}}(),c=i.selectData;return Object(x.jsx)("select",{className:S.b.textEditorClassname,value:t.routeId,onChange:function(e){return n(Object(M.a)(Object(M.a)({},t),{},{routeId:e.target.value}),!0)},autoFocus:!0,children:c&&c.map((function(e){return Object(x.jsx)("option",{value:e.id,children:e.name},e.id)}))})}var Q=["filters"],W=Object(a.createContext)(void 0);function F(e){["ArrowLeft","ArrowRight"].includes(e.key)&&e.stopPropagation()}function E(e){switch(e){case"name":case"description":return function(t,n){return t[e].localeCompare(n[e])};default:return function(t,n){return t[e]-n[e]}}}var L=function(e){var t=Object(a.useState)([]),n=Object(N.a)(t,2),i=n[0],c=n[1],r=Object(a.useState)([]),o=Object(N.a)(r,2),s=o[0],l=o[1],d=Object(a.useState)({name:"",enabled:!0}),j=Object(N.a)(d,2),h=j[0],b=j[1],m=[{key:"id",name:"ID",width:40,resizable:!0,headerCellClass:"filter-cell",headerRenderer:function(e){return Object(x.jsx)(U,Object(M.a)(Object(M.a)({},e),{},{children:function(e){var t=e.filters,n=Object(Y.a)(e,Q);return Object(x.jsx)("input",Object(M.a)(Object(M.a)({},n),{},{className:"filterClassname",value:t.name,onChange:function(e){return b(Object(M.a)(Object(M.a)({},t),{},{name:e.target.value}))},onKeyDown:F}))}}))}},{key:"name",name:"Name",editor:S.b,editorOptions:{editOnClick:!0},resizable:!0},{key:"minRate",name:"minRate",editor:A,editorOptions:{editOnClick:!0},resizable:!0},{key:"maxRate",name:"maxRate",editor:A,editorOptions:{editOnClick:!0},resizable:!0},{key:"photo",name:"Photo",editor:S.b,editorOptions:{editOnClick:!0},resizable:!0},{key:"description",name:"Description",editor:S.b,editorOptions:{editOnClick:!0},resizable:!0}];Object(a.useEffect)((function(){var e=null;g.getAll({_sort:"routeId",_order:"asc"}).then((function(t){var n=t.data;e=new Array(n.length),n.map((function(t,n){e[n]={},e[n].id=t.id,e[n].name=t.name,e[n].minRate=t.minRate,e[n].maxRate=t.maxRate,e[n].photo=t.photo,e[n].description=t.description})),c(e)})).catch((function(e){console.log(e)}))}),[]);var O=Object(a.useMemo)((function(){return function(){var e=null;return e=i.filter((function(e){return!h.name||e.name.includes(h.name)})),0===s.length?e:e=Object(D.a)(e).sort((function(e,t){var n,a=Object(k.a)(s);try{for(a.s();!(n=a.n()).done;){var i=n.value,c=E(i.columnKey)(e,t);if(0!==c)return"ASC"===i.direction?c:-c}}catch(r){a.e(r)}finally{a.f()}return 0}))}()}),[i,h,s]);return Object(x.jsxs)("div",{children:[Object(x.jsx)(u.b,{to:"/gui/addProduct",className:"nav-link",children:"Add Product"}),Object(x.jsx)("div",{className:"rootClassname",children:Object(x.jsx)(W.Provider,{value:h,children:Object(x.jsx)(S.c,{columns:m,onRowsChange:function(e,t){!function(e,t){console.log(e[t.indexes].id+" - "+e[t.indexes][t.column.key]),function(e){var t={id:e.id,name:e.name,minRate:e.minRate,maxRate:e.maxRate,photo:e.photo,description:e.description};console.log(t),g.update(e.id,t).then((function(e){console.log(e.data)})).catch((function(e){console.log(e)}))}(e[t.indexes])}(e,t),c(e)},defaultColumnOptions:{sortable:!0,resizable:!0},className:h.enabled?"filterContainerClassname":void 0,rows:O,sortColumns:s,onSortColumnsChange:l,headerRowHeight:h.enabled?50:void 0})})})]})};function U(e){var t=e.isCellSelected,n=e.column,i=e.children,c=Object(a.useContext)(W),r=function(e){var t=Object(a.useRef)(null);return Object(a.useLayoutEffect)((function(){e&&t.current&&t.current.focus({preventScroll:!0})}),[e]),{ref:t,tabIndex:e?0:-1}}(t),o=r.ref,s=r.tabIndex;return Object(x.jsxs)(x.Fragment,{children:[Object(x.jsx)("div",{children:n.name}),c.enabled&&Object(x.jsx)("div",{children:i({ref:o,tabIndex:s,filters:c})})]})}var K=new(function(){function e(){Object(o.a)(this,e)}return Object(s.a)(e,[{key:"getAll",value:function(e){return f.get("/sellerProducts",{params:e})}},{key:"get",value:function(e){return f.get("/sellerProducts/".concat(e))}},{key:"create",value:function(e){return f.post("/sellerProducts",e)}},{key:"update",value:function(e,t){return f.put("/sellerProducts/".concat(e),t)}},{key:"delete",value:function(e){return f.delete("/sellerProducts/".concat(e))}},{key:"deleteAll",value:function(){return f.delete("/sellerProducts")}}]),e}()),G=function(e){Object(l.a)(n,e);var t=Object(d.a)(n);function n(e){var a;Object(o.a)(this,n),(a=t.call(this,e)).onChangeName=a.onChangeName.bind(Object(m.a)(a)),a.onChangeDescription=a.onChangeDescription.bind(Object(m.a)(a)),a.onChangeBrand=a.onChangeBrand.bind(Object(m.a)(a)),a.onChangeCompany=a.onChangeCompany.bind(Object(m.a)(a)),a.onChangeMRP=a.onChangeMRP.bind(Object(m.a)(a)),a.onChangeUnit=a.onChangeUnit.bind(Object(m.a)(a)),a.onChangeWeight=a.onChangeWeight.bind(Object(m.a)(a)),a.onChangeMeasurment=a.onChangeMeasurment.bind(Object(m.a)(a)),a.onChangeQuantity=a.onChangeQuantity.bind(Object(m.a)(a)),a.onChangeRate=a.onChangeRate.bind(Object(m.a)(a)),a.onChangeDiscount=a.onChangeDiscount.bind(Object(m.a)(a)),a.onChangeDiscountType=a.onChangeDiscountType.bind(Object(m.a)(a)),a.onChangeDeliveryCharge=a.onChangeDeliveryCharge.bind(Object(m.a)(a)),a.saveTutorial=a.saveTutorial.bind(Object(m.a)(a)),a.newTutorial=a.newTutorial.bind(Object(m.a)(a)),a.onChangeproduct=a.onChangeproduct.bind(Object(m.a)(a)),a.getproduct=a.getproduct.bind(Object(m.a)(a)),a.myRef=i.a.createRef();b()();return a.state={id:null,name:"",description:"",brand:"",company:"",MRP:"",unit:"",weight:"",measurment:"",quantity:"",rate:"",discount:"",discountType:"",deliveryCharge:"",products:[],productId:"",submitted:!1},a}return Object(s.a)(n,[{key:"onChangeType",value:function(e){this.setState({type:e.target.value})}},{key:"onChangeName",value:function(e){this.setState({name:e.target.value})}},{key:"onChangeDescription",value:function(e){this.setState({description:e.target.value})}},{key:"onChangeBrand",value:function(e){e.target.value.length<11&&this.setState({brand:e.target.value})}},{key:"onChangeCompany",value:function(e){this.setState({company:e.target.value})}},{key:"onChangeMRP",value:function(e){this.setState({MRP:e.target.value})}},{key:"onChangeUnit",value:function(e){this.setState({unit:e.target.value})}},{key:"onChangeWeight",value:function(e){this.setState({weight:e.target.value})}},{key:"onChangeMeasurment",value:function(e){this.setState({measurment:e.target.value})}},{key:"onChangeQuantity",value:function(e){this.setState({quantity:e.target.value})}},{key:"onChangeRate",value:function(e){this.setState({rate:e.target.value})}},{key:"onChangeDiscount",value:function(e){this.setState({discount:e.target.value})}},{key:"onChangeDiscountType",value:function(e){this.setState({discountType:e.target.value})}},{key:"onChangeDeliveryCharge",value:function(e){this.setState({deliveryCharge:e.target.value})}},{key:"onChangeproduct",value:function(e){this.setState({productId:e.target.value})}},{key:"onChangeActive",value:function(e){this.setState({active:e.target.checked})}},{key:"saveTutorial",value:function(e){var t=this;e.target.disabled=!0;var n={name:this.myRef.current.value,description:this.state.description,brand:this.state.brand,company:this.state.company,MRP:this.state.MRP,unit:this.state.unit,weight:this.state.weight,measurment:this.state.measurment,quantity:this.state.quantity,rate:this.state.rate,discount:this.state.discount,discountType:this.state.discountType,deliveryCharge:this.state.deliveryCharge,active:this.state.active,productId:this.myRef.current.value};console.log(n),this.setState({submitted:!0}),K.create(n).then((function(n){var a;t.setState((a={id:n.data.id,name:n.data.name},Object(I.a)(a,"name",n.data.name),Object(I.a)(a,"description",n.data.description),Object(I.a)(a,"brand",n.data.brand),Object(I.a)(a,"company",n.data.company),Object(I.a)(a,"MRP",n.data.MRP),Object(I.a)(a,"unit",n.data.unit),Object(I.a)(a,"weight",n.data.weight),Object(I.a)(a,"measurment",n.data.measurment),Object(I.a)(a,"quantity",n.data.quantity),Object(I.a)(a,"rate",n.data.rate),Object(I.a)(a,"discount",n.data.discount),Object(I.a)(a,"discountType",n.data.discountType),Object(I.a)(a,"deliveryCharge",n.data.deliveryCharge),Object(I.a)(a,"active",n.data.active),Object(I.a)(a,"productId",n.data.productId),Object(I.a)(a,"submitted",!0),a)),e.target.disabled=!1,console.log(n.data)})).catch((function(e){console.log(e)}))}},{key:"newTutorial",value:function(){this.setState({id:null,name:"",description:"",brand:"",company:"",MRP:"",unit:"",weight:"",measurment:"",quantity:"",rate:"",discount:"",discountType:"",deliveryCharge:"",productId:"",submitted:!1})}},{key:"componentDidMount",value:function(){this.getproduct()}},{key:"getproduct",value:function(){var e=this;g.getAll().then((function(t){e.setState({products:t.data}),console.log(t.data)})).catch((function(e){console.log(e)}))}},{key:"render",value:function(){var e=this.state.products;return Object(x.jsx)("div",{className:"submit-form",children:this.state.submitted?Object(x.jsxs)("div",{children:[Object(x.jsx)("h4",{children:"You submitted successfully!"}),Object(x.jsx)("button",{className:"btn btn-success",onClick:this.newTutorial,children:"Add"})]}):Object(x.jsxs)("div",{children:[Object(x.jsxs)("div",{className:"form-group",children:[Object(x.jsx)("label",{htmlFor:"productId",children:"Product Name"}),Object(x.jsx)("div",{className:"select-container",children:Object(x.jsx)("select",{className:"form-control",value:this.state.productId,onChange:this.onChangeproduct,ref:this.myRef,name:"productId",children:e&&e.map((function(e){return Object(x.jsx)("option",{value:e.name,children:e.name})}))})})]}),Object(x.jsxs)("div",{className:"form-group",children:[Object(x.jsx)("label",{htmlFor:"description",children:"Description"}),Object(x.jsx)("input",{type:"text",className:"form-control",id:"description",required:!0,value:this.state.description,onChange:this.onChangeDescription,name:"description"})]}),Object(x.jsxs)("div",{className:"form-group",children:[Object(x.jsx)("label",{htmlFor:"brand",children:"Brand"}),Object(x.jsx)("input",{type:"text",className:"form-control",id:"brand",required:!0,value:this.state.brand,onChange:this.onChangeBrand,name:"brand"})]}),Object(x.jsxs)("div",{className:"form-group",children:[Object(x.jsx)("label",{htmlFor:"company",children:"Company Name"}),Object(x.jsx)("input",{type:"text",className:"form-control",id:"company",required:!0,value:this.state.company,onChange:this.onChangeCompany,name:"company"})]}),Object(x.jsxs)("div",{className:"form-group",children:[Object(x.jsx)("label",{htmlFor:"MRP",children:"MRP"}),Object(x.jsx)("input",{type:"text",className:"form-control",id:"MRP",required:!0,value:this.state.MRP,onChange:this.onChangeMRP,name:"MRP"})]}),Object(x.jsxs)("div",{className:"form-group",children:[Object(x.jsx)("label",{htmlFor:"unit",children:"unit"}),Object(x.jsx)("input",{type:"text",className:"form-control",id:"unit",required:!0,value:this.state.unit,onChange:this.onChangeUnit,name:"unit"})]}),Object(x.jsxs)("div",{className:"form-group",children:[Object(x.jsx)("label",{htmlFor:"weight",children:"Weight"}),Object(x.jsx)("input",{type:"text",className:"form-control",id:"weight",required:!0,value:this.state.weight,onChange:this.onChangeWeight,name:"unit"})]}),Object(x.jsxs)("div",{className:"form-group",children:[Object(x.jsx)("label",{htmlFor:"measurment",children:"Measurment"}),Object(x.jsx)("input",{type:"text",className:"form-control",id:"measurment",required:!0,value:this.state.measurment,onChange:this.onChangeMeasurment,name:"measurment"})]}),Object(x.jsxs)("div",{className:"form-group",children:[Object(x.jsx)("label",{htmlFor:"quantity",children:"Quantity"}),Object(x.jsx)("input",{type:"text",className:"form-control",id:"quantity",required:!0,value:this.state.quantity,onChange:this.onChangeQuantity,name:"quantity"})]}),Object(x.jsxs)("div",{className:"form-group",children:[Object(x.jsx)("label",{htmlFor:"rate",children:"Product Rate"}),Object(x.jsx)("input",{type:"text",className:"form-control",id:"rate",required:!0,value:this.state.rate,onChange:this.onChangeRate,name:"rate"})]}),Object(x.jsxs)("div",{className:"form-group",children:[Object(x.jsx)("label",{htmlFor:"discount",children:"Discount "}),Object(x.jsx)("input",{type:"text",className:"form-control",id:"discount",required:!0,value:this.state.discount,onChange:this.onChangeDiscount,name:"discount"})]}),Object(x.jsxs)("div",{className:"form-group",children:[Object(x.jsx)("label",{htmlFor:"discountType",children:"DiscountType "}),Object(x.jsx)("input",{type:"text",className:"form-control",id:"discountType",required:!0,value:this.state.discountType,onChange:this.onChangeDiscountType,name:"discountType"})]}),Object(x.jsxs)("div",{className:"form-group",children:[Object(x.jsx)("label",{htmlFor:"deliveryCharge",children:"DeliveryCharge "}),Object(x.jsx)("input",{type:"text",className:"form-control",id:"deliveryCharge",required:!0,value:this.state.deliveryCharge,onChange:this.onChangeDeliveryCharge,name:"deliveryCharge"})]}),Object(x.jsx)("button",{onClick:this.saveTutorial,className:"btn btn-success",children:"Submit"})]})})}}]),n}(a.Component),V=n(14),_=n(177),H=n(182),J=n(186),$=n(185),X=n(181),Z=n(183),ee=n(184),te=n(174),ne=n(173),ae=n(180),ie=n(178),ce=n(179),re=n(171),oe=new(function(){function e(){Object(o.a)(this,e)}return Object(s.a)(e,[{key:"getAll",value:function(e){return f.get("/bills",{params:e})}},{key:"generateBillsCollection",value:function(e){return f.get("/generateBillsCollection",{params:e})}},{key:"validateCollectionBillsGeneration",value:function(e,t){return f.get("/generateBillsCollection/".concat(e),{params:t})}},{key:"generateBills",value:function(e){return f.get("/generateBills",{params:e})}},{key:"validateBillGeneration",value:function(e,t){return f.get("/generateBills/".concat(e,"/").concat(t))}},{key:"get",value:function(e){return f.get("/bills/".concat(e))}},{key:"create",value:function(e){return f.post("/bills",e)}},{key:"update",value:function(e,t){return f.put("/bills/".concat(e),t)}},{key:"delete",value:function(e){return f.delete("/bills/".concat(e))}},{key:"deleteAll",value:function(){return f.delete("/bills")}}]),e}()),se=new(function(){function e(){Object(o.a)(this,e)}return Object(s.a)(e,[{key:"getAll",value:function(e){return f.get("/payments",{params:e})}},{key:"get",value:function(e){return f.get("/payments/".concat(e))}},{key:"create",value:function(e){return f.post("/payments",e)}},{key:"update",value:function(e,t){return f.put("/payments/".concat(e),t)}},{key:"delete",value:function(e){return f.delete("/payments/".concat(e))}},{key:"deleteAll",value:function(){return f.delete("/payments")}}]),e}()),le=function(e){Object(l.a)(n,e);var t=Object(d.a)(n);function n(e){var a;return Object(o.a)(this,n),(a=t.call(this,e)).handleClickOpen=function(){a.setState({open:!0})},a.handleClose=function(){a.setState({open:!1})},a.getCustomerBill=a.getCustomerBill.bind(Object(m.a)(a)),a.savePayment=a.savePayment.bind(Object(m.a)(a)),a.saveMobNo=a.saveMobNo.bind(Object(m.a)(a)),a.onChangePayment=a.onChangePayment.bind(Object(m.a)(a)),a.onChangeMobNo=a.onChangeMobNo.bind(Object(m.a)(a)),a.handleClickOpen=a.handleClickOpen.bind(Object(m.a)(a)),a.handleClose=a.handleClose.bind(Object(m.a)(a)),a.getPayment=a.getPayment.bind(Object(m.a)(a)),a.getBill=a.getBill.bind(Object(m.a)(a)),a.state={partyId:e.partyId,payment:null,prevBill:{},currentBill:{},open:!1,mobNo:null},a}return Object(s.a)(n,[{key:"componentDidMount",value:function(){this.getCustomerBill(this.props)}},{key:"onChangePayment",value:function(e){this.setState({payment:+e.target.value})}},{key:"onChangeMobNo",value:function(e){e.target.value.length<11&&this.setState({mobNo:+e.target.value})}},{key:"saveMobNo",value:function(e){if(e.target.disabled=!0,this.state.mobNo){var t={id:this.props.partyId};p.updateMobNo(this.props.partyId,this.state.mobNo,t).then((function(t){console.log(t.data),e.target.disabled=!1})).catch((function(e){console.log(e)}))}}},{key:"savePayment",value:function(e){var t=this;if(e.target.disabled=!0,this.state.payment){var n={partyId:this.props.partyId,month:b()(this.props.date,"DD-MMM-YYYY").format("MMM-YYYY"),date:b()(this.props.date,"DD-MMM-YYYY").format("DD"),active:!0,payment:this.state.payment,type:"income"};se.create(n).then((function(n){t.setState({currentBill:{quantity:t.state.currentBill.quantity,rate:t.state.currentBill.rate,bill:t.state.currentBill.bill,dues:t.state.currentBill.dues,month:b()(t.props.date,"DD-MMM-YYYY").format("MMM-YYYY"),payment:(t.state.currentBill.payment?t.state.currentBill.payment:0)+n.data.payment}}),console.log(n.data),e.target.disabled=!1,t.handleClickOpen(),t.state.payment=""})).catch((function(e){console.log(e)}))}}},{key:"getCustomerBill",value:function(e){var t=b()(e.date,"DD-MMM-YYYY"),n=t.format("MMM-YYYY"),a={month:n};this.getPayment(n,e.partyId,a),this.getBill(n,e.partyId,"currentBill",a);var i=t.clone().subtract(1,"months").format("MMM-YYYY"),c={month:i};this.getPayment(i,e.partyId,c),this.getBill(i,e.partyId,"prevBill",c)}},{key:"getBill",value:function(e,t,n,a){var i=this,c={partyId:t,month:e,active:!0,type:"income"};oe.getAll(c).then((function(e){var t=e.data;t&&t.map((function(e){a.quantity=e.quantity,a.rate=e.rate,a.bill=e.bill,a.dues=e.dues})),i.setState(Object(I.a)({},n,a)),console.log(i.state)})).catch((function(e){console.log(e)}))}},{key:"getPayment",value:function(e,t,n){var a={partyId:t,month:e,active:!0,type:"income"};se.getAll(a).then((function(e){var t=e.data;t&&t.map((function(e){"discount"==e.category?n.discount=e.payment:n.payment?n.payment=n.payment+e.payment:n.payment=+e.payment}))})).catch((function(e){console.log(e)}))}},{key:"render",value:function(){var e=this.state,t=e.prevBill,n=e.currentBill;return this.props.partyId!=this.state.partyId&&(this.getCustomerBill(this.props),this.setState({partyId:this.props.partyId})),Object(x.jsxs)("div",{children:[Object(x.jsx)("h1",{align:"center",children:this.props.name}),Object(x.jsxs)(B.a,{container:!0,spacing:{xs:4},children:[Object(x.jsxs)(B.a,{item:!0,xs:12,sm:6,children:[Object(x.jsxs)("div",{className:"form-group",children:[Object(x.jsx)("label",{htmlFor:"date",children:" Date"}),Object(x.jsx)("input",{type:"text",className:"form-control",id:"date",required:!0,readOnly:"readOnly",value:this.props.date,onChange:this.props.onDate,name:"date"})]}),Object(x.jsxs)("div",{className:"form-group",children:[Object(x.jsx)("label",{htmlFor:"amount",children:"Amount"}),Object(x.jsx)("input",{type:"number",className:"form-control",id:"amount",required:!0,value:this.props.amount,onChange:this.props.onAmount,name:"amount"})]}),Object(x.jsxs)("div",{className:"form-group",children:[Object(x.jsx)("label",{htmlFor:"defaultQuantity",children:"Quantity"}),Object(x.jsx)("input",{type:"number",className:"form-control",id:"defaultQuantity",required:!0,value:this.props.defaultQuantity,onChange:this.props.onQuantity,name:"defaultQuantity"})]}),Object(x.jsxs)("div",{className:"form-group",children:[Object(x.jsxs)("button",{className:"btn btn-success",onClick:this.props.onPrev,children:["\u2b05",this.props.previousTitle," "]})," ",Object(x.jsx)("button",{className:"btn btn-success",onClick:this.props.onUpdate,children:"Update & Next"})," ",Object(x.jsxs)("button",{className:"btn btn-success",onClick:this.props.onNext,children:[this.props.nextTitle," ","\u27a1"]})]}),Object(x.jsx)("div",{className:"form-group",children:Object(x.jsx)("button",{className:"btn btn-success",onClick:this.props.onModalClose,children:"Close Route Delivery"})})]}),Object(x.jsxs)(B.a,{item:!0,xs:12,sm:6,children:[Object(x.jsx)("div",{className:"form-group",children:Object(x.jsx)(X.a,{component:_.a,children:Object(x.jsxs)(H.a,{sx:{minWidth:200},"aria-label":"simple table",children:[Object(x.jsx)(Z.a,{children:Object(x.jsxs)(ee.a,{children:[Object(x.jsx)($.a,{children:"Billing"}),Object(x.jsxs)($.a,{align:"right",children:["Prev Month (",t.month,")"]}),Object(x.jsxs)($.a,{align:"right",children:["Current Month (",n.month,")"]})]})}),Object(x.jsxs)(J.a,{children:[Object(x.jsxs)(ee.a,{children:[Object(x.jsx)($.a,{component:"th",scope:"row",children:"Quantity"}),Object(x.jsx)($.a,{align:"right",children:t.quantity}),Object(x.jsx)($.a,{align:"right",children:n.quantity})]}),Object(x.jsxs)(ee.a,{children:[Object(x.jsx)($.a,{component:"th",scope:"row",children:"Rate"}),Object(x.jsx)($.a,{align:"right",children:t.rate}),Object(x.jsx)($.a,{align:"right",children:n.rate})]}),Object(x.jsxs)(ee.a,{children:[Object(x.jsx)($.a,{component:"th",scope:"row",children:"Bill"}),Object(x.jsx)($.a,{align:"right",children:t.bill}),Object(x.jsx)($.a,{align:"right",children:n.bill})]}),Object(x.jsxs)(ee.a,{children:[Object(x.jsx)($.a,{component:"th",scope:"row",children:"Payment"}),Object(x.jsx)($.a,{align:"right",children:t.payment}),Object(x.jsx)($.a,{align:"right",children:n.payment})]}),Object(x.jsxs)(ee.a,{children:[Object(x.jsx)($.a,{component:"th",scope:"row",children:"Dues"}),Object(x.jsx)($.a,{align:"right",children:t.dues}),Object(x.jsx)($.a,{align:"right",children:n.dues})]})]})]})})}),Object(x.jsxs)("div",{className:"form-group",children:[Object(x.jsx)("label",{htmlFor:"payment",children:"Payment"}),Object(x.jsx)("input",{className:"form-control",id:"payment",required:!0,value:this.state.payment,onChange:this.onChangePayment,name:"payment",type:"number"})]}),Object(x.jsx)("button",{className:"btn btn-success",onClick:this.savePayment,children:"Payment Received"}),Object(x.jsxs)("div",{className:"form-group",children:[Object(x.jsx)("label",{htmlFor:"mobNo",children:"MobileNo"}),Object(x.jsx)("input",{className:"form-control",id:"mobNo",required:!0,value:this.state.mobNo,onChange:this.onChangeMobNo,name:"mobNo",type:"number"})]}),Object(x.jsx)("button",{className:"btn btn-success",onClick:this.saveMobNo,children:"Set Mob No"})]})]}),Object(x.jsxs)(ne.a,{open:this.state.open,onClose:this.handleClose,"aria-labelledby":"alert-dialog-title","aria-describedby":"alert-dialog-description",children:[Object(x.jsx)(re.a,{id:"alert-dialog-title",children:"Payments"}),Object(x.jsx)(ie.a,{children:Object(x.jsxs)(ce.a,{id:"alert-dialog-description",children:["Payment of amount ",this.state.payment," is confirmed."]})}),Object(x.jsx)(ae.a,{children:Object(x.jsx)(te.a,{onClick:this.handleClose,children:"Close"})})]})]})}}]),n}(i.a.Component),de=function(e){Object(l.a)(n,e);var t=Object(d.a)(n);function n(e){var a;return Object(o.a)(this,n),(a=t.call(this,e)).handleModalOpen=function(e){a.setState({activeProject:e,modalTitle:a.state.projects[e].name,quantity:a.state.projects[e].defaultQuantity,amount:a.state.projects[e].amount,date:a.state.date,partyId:a.state.projects[e].id})},a.handleModalClose=function(){a.setState({activeProject:""})},a.handleNextProject=function(){var e=a.state.projects.length,t=(t=a.state.activeProject+1)%e;a.setState({activeProject:t,modalTitle:a.state.projects[t].name,quantity:a.state.projects[t].defaultQuantity,amount:a.state.projects[t].amount,date:a.state.date,partyId:a.state.projects[t].id})},a.handlePrevProject=function(){var e=a.state.projects.length;if(0===(t=a.state.activeProject))var t=e-1;else t=t-1;a.setState({activeProject:t,modalTitle:a.state.projects[t].name,quantity:a.state.projects[t].defaultQuantity,amount:a.state.projects[t].amount,date:a.state.date,partyId:a.state.projects[t].id})},a.handleModalUpdate=function(e){e.target.disabled=!0,a.saveDelivery(a.state.partyId,a.state.date,a.state.quantity,a.state.amount,e)},a.getProjects=a.getProjects.bind(Object(m.a)(a)),a.saveDelivery=a.saveDelivery.bind(Object(m.a)(a)),a.onChangeDate=a.onChangeDate.bind(Object(m.a)(a)),a.handleNextProject=a.handleNextProject.bind(Object(m.a)(a)),a.onChangeDefaultQuantity=a.onChangeDefaultQuantity.bind(Object(m.a)(a)),a.onChangeAmount=a.onChangeAmount.bind(Object(m.a)(a)),a.state={projects:[],activeProject:"",modalTitle:"",partyId:null,quantity:null,amount:null,date:b()().format("DD-MMM-YYYY")},a}return Object(s.a)(n,[{key:"componentDidMount",value:function(){this.getProjects(this.props.match.params.id,this.props.match.params.pending)}},{key:"getProjects",value:function(e,t){var n=this;if(t){var a={routeId:e,type:"customer",searchFlag:"pending"};p.getAll(a).then((function(e){console.log(e.data),n.setState({projects:e.data})})).catch((function(e){console.log(e)}))}else{var i={routeId:e,type:"customer"};p.getAll(i).then((function(e){console.log(e.data),n.setState({projects:e.data})})).catch((function(e){console.log(e)}))}}},{key:"onChangeDefaultQuantity",value:function(e){this.setState({quantity:e.target.value})}},{key:"onChangeAmount",value:function(e){this.setState({amount:e.target.value})}},{key:"onChangeDate",value:function(e){this.setState({date:e.target.value})}},{key:"saveDelivery",value:function(e,t,n,a,i){var c=this,r=b()(t,"DD-MMM-YYYY"),o={partyId:e,date:r.format("DD"),month:r.format("MMM-YYYY"),quantity:n,amount:a,type:"income"},s={partyId:e,date:o.date,month:o.month,type:"income"};w.getAll(s).then((function(e){e.data&&e.data.length>0?(o.id=e.data[0].id,w.update(o.id,o).then((function(e){console.log(e.data),i.target.disabled=!1,c.handleNextProject()})).catch((function(e){console.log(e)}))):w.create(o).then((function(e){console.log(e.data),i.target.disabled=!1,c.handleNextProject()})).catch((function(e){console.log(e)}))})).catch((function(e){console.log(e)})),this.state.date=b()().format("DD-MMM-YYYY")}},{key:"render",value:function(){var e=this,t=this.state.projects;var n,a,i=t&&t.map((function(t,n,a){return Object(x.jsx)(je,{index:n,name:t.name,url:t.address,onModalOpen:e.handleModalOpen},"project-"+t.id)}));return""===this.state.activeProject?Object(x.jsx)("div",{children:Object(x.jsx)(B.a,{container:!0,spacing:{xs:1,md:1},columns:{xs:4,sm:8,md:12},children:i})}):Object(x.jsx)("div",{children:Object(x.jsx)(le,{name:this.state.modalTitle,defaultQuantity:this.state.quantity,amount:this.state.amount,date:this.state.date,partyId:this.state.partyId,previousTitle:function(e,t){if(0===e)var n=t.length-1;else n=e-1;return t[n].name}(this.state.activeProject,t),nextTitle:(n=this.state.activeProject,a=t,a[(n+1)%a.length].name),onModalClose:this.handleModalClose,onNext:this.handleNextProject,onPrev:this.handlePrevProject,onDate:this.onChangeDate,onQuantity:this.onChangeDefaultQuantity,onAmount:this.onChangeAmount,onUpdate:this.handleModalUpdate})})}}]),n}(a.Component),ue=Object(V.a)(_.a)((function(e){var t=e.theme;return Object(M.a)(Object(M.a)({},t.typography.body2),{},{padding:t.spacing(2),textAlign:"center",color:t.palette.text.secondary})})),je=function(e){Object(l.a)(n,e);var t=Object(d.a)(n);function n(){return Object(o.a)(this,n),t.apply(this,arguments)}return Object(s.a)(n,[{key:"render",value:function(){return Object(x.jsx)(B.a,{item:!0,xs:2,sm:4,md:4,onClick:this.props.onModalOpen.bind(this,this.props.index),children:Object(x.jsx)(ue,{children:Object(x.jsxs)("h1",{children:[this.props.name," - ",this.props.url]})})},this.props.index)}}]),n}(i.a.Component),he=function(e){Object(l.a)(n,e);var t=Object(d.a)(n);function n(e){var a;Object(o.a)(this,n),(a=t.call(this,e)).onChangeName=a.onChangeName.bind(Object(m.a)(a)),a.onChangeAddress=a.onChangeAddress.bind(Object(m.a)(a)),a.onChangeStartDate=a.onChangeStartDate.bind(Object(m.a)(a)),a.onChangeActive=a.onChangeActive.bind(Object(m.a)(a)),a.saveTutorial=a.saveTutorial.bind(Object(m.a)(a)),a.newTutorial=a.newTutorial.bind(Object(m.a)(a));var i=new Date;return a.state={id:null,name:"",address:"",active:!0,startDate:i.getDate()+"-"+parseInt(i.getMonth()+1)+"-"+i.getFullYear(),submitted:!1},a}return Object(s.a)(n,[{key:"onChangeName",value:function(e){this.setState({name:e.target.value})}},{key:"onChangeAddress",value:function(e){this.setState({address:e.target.value})}},{key:"onChangeStartDate",value:function(e){this.setState({startDate:e.target.value})}},{key:"onChangeActive",value:function(e){console.log(e.target.checked),this.setState({active:e.target.checked})}},{key:"saveTutorial",value:function(){var e=this,t={name:this.state.name,address:this.state.address,startDate:this.state.startDate,active:this.state.active};console.log(this.state.active),y.create(t).then((function(t){e.setState({id:t.data.id,name:t.data.name,address:t.data.address,active:t.data.active,startDate:t.data.startDate,submitted:!0}),console.log(t.data)})).catch((function(e){console.log(e)}))}},{key:"newTutorial",value:function(){this.today=new Date,this.setState({id:null,name:"",address:"",startDate:this.today.getDate()+"-"+parseInt(this.today.getMonth()+1)+"-"+this.today.getFullYear(),active:!0,submitted:!1})}},{key:"render",value:function(){return Object(x.jsx)("div",{className:"submit-form",children:this.state.submitted?Object(x.jsxs)("div",{children:[Object(x.jsx)("h4",{children:"You submitted successfully!"}),Object(x.jsx)("button",{className:"btn btn-success",onClick:this.newTutorial,children:"Add"})]}):Object(x.jsxs)("div",{children:[Object(x.jsxs)("div",{className:"form-group",children:[Object(x.jsx)("label",{htmlFor:"name",children:"Route Name"}),Object(x.jsx)("input",{type:"text",className:"form-control",id:"name",required:!0,value:this.state.name,onChange:this.onChangeName,name:"name"})]}),Object(x.jsxs)("div",{className:"form-group",children:[Object(x.jsx)("label",{htmlFor:"address",children:"Address"}),Object(x.jsx)("input",{type:"text",className:"form-control",id:"address",required:!0,value:this.state.address,onChange:this.onChangeAddress,name:"address"})]}),Object(x.jsx)("button",{onClick:this.saveTutorial,className:"btn btn-success",children:"Submit"})]})})}}]),n}(a.Component),be=new(function(){function e(){Object(o.a)(this,e)}return Object(s.a)(e,[{key:"getAll",value:function(e){return f.get("/rates",{params:e})}},{key:"get",value:function(e){return f.get("/rates/".concat(e))}},{key:"create",value:function(e){return f.post("/rates",e)}},{key:"update",value:function(e,t){return f.put("/rates/".concat(e),t)}},{key:"delete",value:function(e){return f.delete("/rates/".concat(e))}},{key:"deleteAll",value:function(){return f.delete("/rates")}}]),e}()),me=n(36),Oe=["filters"],fe=["filters"],pe="filter-cell",ye="filterClassname",xe=Object(a.createContext)(void 0);function ve(e){["ArrowLeft","ArrowRight"].includes(e.key)&&e.stopPropagation()}function ge(e){return"name"===e?function(t,n){return t[e].localeCompare(n[e])}:function(t,n){return t[e]-n[e]}}var Ce=function(e){var t=Object(a.useState)({name:"",route:"",enabled:!0}),n=Object(N.a)(t,2),i=n[0],c=n[1],r={currentDate:b()()},o=Object(a.useState)([]),s=Object(N.a)(o,2),l=s[0],d=s[1],j=Object(a.useState)(),h=Object(N.a)(j,2),m=h[0],O=h[1],f=Object(a.useState)({}),y=Object(N.a)(f,2),v=y[0],g=y[1],C=Object(a.useState)(!1),R=Object(N.a)(C,2),I=R[0],q=R[1],P=Object(a.useState)(!1),z=Object(N.a)(P,2),T=z[0],Q=z[1],W=Object(a.useState)(r),F=Object(N.a)(W,2),E=F[0],L=F[1],U=Object(a.useState)([]),K=Object(N.a)(U,2),G=K[0],V=K[1],_=[{key:"id",name:"ID",minWidth:60,resizable:!0,frozen:!0,headerCellClass:pe,headerRenderer:function(e){return Object(x.jsx)(ke,Object(M.a)(Object(M.a)({},e),{},{children:function(e){var t=e.filters,n=Object(Y.a)(e,Oe);return Object(x.jsx)("input",Object(M.a)(Object(M.a)({},n),{},{className:ye,value:t.name,onChange:function(e){return c(Object(M.a)(Object(M.a)({},t),{},{name:e.target.value}))},onKeyDown:ve}))}}))}},{key:"name",name:"Name",width:200,resizable:!0,frozen:!0},{key:"route",name:"Route",minWidth:100,resizable:!0,headerCellClass:pe,headerRenderer:function(e){return Object(x.jsx)(ke,Object(M.a)(Object(M.a)({},e),{},{children:function(e){var t=e.filters,n=Object(Y.a)(e,fe);return Object(x.jsx)("input",Object(M.a)(Object(M.a)({},n),{},{className:ye,value:t.route,onChange:function(e){return c(Object(M.a)(Object(M.a)({},t),{},{route:e.target.value}))},onKeyDown:ve}))}}))}},{key:"01",name:"1",editor:A,editorOptions:{editOnClick:!0},minWidth:40,resizable:!0},{key:"02",name:"2",editor:A,editorOptions:{editOnClick:!0},minWidth:40,resizable:!0},{key:"03",name:"3",editor:A,editorOptions:{editOnClick:!0},minWidth:40,resizable:!0},{key:"04",name:"4",editor:A,editorOptions:{editOnClick:!0},minWidth:40,resizable:!0},{key:"05",name:"5",editor:A,editorOptions:{editOnClick:!0},minWidth:40,resizable:!0},{key:"06",name:"6",editor:A,editorOptions:{editOnClick:!0},minWidth:40,resizable:!0},{key:"07",name:"7",editor:A,editorOptions:{editOnClick:!0},minWidth:40,resizable:!0},{key:"08",name:"8",editor:A,editorOptions:{editOnClick:!0},minWidth:40,resizable:!0},{key:"09",name:"9",editor:A,editorOptions:{editOnClick:!0},minWidth:40,resizable:!0},{key:"10",name:"10",editor:A,editorOptions:{editOnClick:!0},minWidth:40,resizable:!0},{key:"11",name:"11",editor:A,editorOptions:{editOnClick:!0},minWidth:40,resizable:!0},{key:"12",name:"12",editor:A,editorOptions:{editOnClick:!0},minWidth:40,resizable:!0},{key:"13",name:"13",editor:A,editorOptions:{editOnClick:!0},minWidth:40,resizable:!0},{key:"14",name:"14",editor:A,editorOptions:{editOnClick:!0},minWidth:40,resizable:!0},{key:"15",name:"15",editor:A,editorOptions:{editOnClick:!0},minWidth:40,resizable:!0},{key:"16",name:"16",editor:A,editorOptions:{editOnClick:!0},minWidth:40,resizable:!0},{key:"17",name:"17",editor:A,editorOptions:{editOnClick:!0},minWidth:40,resizable:!0},{key:"18",name:"18",editor:A,editorOptions:{editOnClick:!0},minWidth:40,resizable:!0},{key:"19",name:"19",editor:A,editorOptions:{editOnClick:!0},minWidth:40,resizable:!0},{key:"20",name:"20",editor:A,editorOptions:{editOnClick:!0},minWidth:40,resizable:!0},{key:"21",name:"21",editor:A,editorOptions:{editOnClick:!0},minWidth:40,resizable:!0},{key:"22",name:"22",editor:A,editorOptions:{editOnClick:!0},minWidth:40,resizable:!0},{key:"23",name:"23",editor:A,editorOptions:{editOnClick:!0},minWidth:40,resizable:!0},{key:"24",name:"24",editor:A,editorOptions:{editOnClick:!0},minWidth:40,resizable:!0},{key:"25",name:"25",editor:A,editorOptions:{editOnClick:!0},minWidth:40,resizable:!0},{key:"26",name:"26",editor:A,editorOptions:{editOnClick:!0},minWidth:40,resizable:!0},{key:"27",name:"27",editor:A,editorOptions:{editOnClick:!0},minWidth:40,resizable:!0},{key:"28",name:"28",editor:A,editorOptions:{editOnClick:!0},minWidth:40,resizable:!0},{key:"29",name:"29",editor:A,editorOptions:{editOnClick:!0},minWidth:40,resizable:!0},{key:"30",name:"30",editor:A,editorOptions:{editOnClick:!0},minWidth:40,resizable:!0},{key:"31",name:"31",editor:A,editorOptions:{editOnClick:!0},minWidth:40,resizable:!0},{key:"qty",name:"Qty",minWidth:40,resizable:!0},{key:"rate",name:"Rate",minWidth:40,resizable:!0},{key:"bill",name:"Bill",minWidth:60,resizable:!0},{key:"dues",name:"Dues",minWidth:40,resizable:!0},{key:"totalBill",name:"Total",minWidth:60,resizable:!0},{key:"prevBill",name:"P-Bill",minWidth:75,resizable:!0},{key:"paid",name:"Paid",minWidth:60,resizable:!0},{key:"currentDue",name:"C-Due",minWidth:60,resizable:!0},{key:"discount",name:"Discount",width:80,editor:A,editorOptions:{editOnClick:!0},minWidth:40,resizable:!0}];function H(){q(!0)}function J(){Q(!1),q(!1)}function $(e){var t={month:e,type:"income"};oe.generateBills(t).then((function(t){var n=t.data;n&&n.map((function(e){var t,n=Object(k.a)(l);try{for(n.s();!(t=n.n()).done;){var a=t.value;if(a.id==e.partyId){a.qty=e.quantity,a.rate=e.rate,a.bill=e.bill,a.dues=e.dues,a.totalBill=a.bill+(a.dues?a.dues:0);break}}}catch(i){n.e(i)}finally{n.f()}})),O("Bill generated for the month "+e+"."),H(),console.log(l),d(l)})).catch((function(e){console.log(e)}))}Object(a.useEffect)((function(){var t={currentDate:b()(e.match.params.date,"MMM-YYYY")};L(t);var n=null,a={active:!0,type:"customer"};be.getAll(a).then((function(e){var t=e.data,n={};t&&t.map((function(e,t){n={id:e.id,rate:e.rate,startDate:e.startDate}})),g(n)})).catch((function(e){console.log(e)})),p.getAll(a).then((function(e){var a=e.data;n=new Array(a.length),a.map((function(e,t){n[t]={},n[t].id=e.id,n[t].name=e.name,n[t].route=e.route.name})),function(e,t){var n={month:e.currentDate.format("MMM-YYYY"),active:!0,type:"income"};se.getAll(n).then((function(n){var a=n.data;t&&t.map((function(e){a&&a.map((function(t){t.partyId==e.id&&("discount"==t.category?(e.discount=t.payment,e.iddiscount=t.id):e.paid?e.paid=e.paid+t.payment:e.paid=+t.payment)}))})),function(e,t){var n={month:e.currentDate.format("MMM-YYYY"),active:!0,type:"income"};oe.getAll(n).then((function(n){var a=n.data;a&&a.map((function(e){var n,a=Object(k.a)(t);try{for(a.s();!(n=a.n()).done;){var i=n.value;if(i.id==e.partyId){e.rate&&(i.qty=e.quantity,i.rate=e.rate,i.bill=e.bill,i.dues=e.dues,i.totalBill=i.bill+(i.dues?i.dues:0),i.prevBill=e.lastBillTotal,i.currentDue=i.prevBill-(i.paid?i.paid:0));break}}}catch(c){a.e(c)}finally{a.f()}}));var i={month:e.currentDate.clone().subtract(1,"months").format("MMM-YYYY"),active:!0,type:"income"};oe.getAll(i).then((function(e){var n=e.data;n&&n.map((function(e){var n,a=Object(k.a)(t);try{for(a.s();!(n=a.n()).done;){var i=n.value;if(i.id==e.partyId){e.rate&&(i.prevBill=e.bill+e.dues,i.prevDues=e.dues,i.currentDue=i.prevBill-(i.paid?i.paid:0));break}}}catch(c){a.e(c)}finally{a.f()}}))})).catch((function(e){console.log(e)}))})).catch((function(e){console.log(e)}))}(e,t),function(e,t){var n={month:e.currentDate.format("MMM-YYYY"),type:"income"};w.getAll(n).then((function(e){var n=e.data;n&&n.map((function(e){var n,a=Object(k.a)(t);try{for(a.s();!(n=a.n()).done;){var i=n.value;if(i.id==e.partyId){i[e.date]=e.quantity,i["id"+e.date]=e.id;break}}}catch(c){a.e(c)}finally{a.f()}})),console.log(t),d(t)})).catch((function(e){console.log(e)}))}(e,t)})).catch((function(e){console.log(e)}))}(t,n)})).catch((function(e){console.log(e)}))}),[e.match.params.date]);var X=Object(a.useMemo)((function(){return function(){var e=null;return e=l.filter((function(e){return(!i.name||e.name.includes(i.name))&&(!i.route||e.route.includes(i.route))})),0===G.length?e:e=Object(D.a)(e).sort((function(e,t){var n,a=Object(k.a)(G);try{for(a.s();!(n=a.n()).done;){var i=n.value,c=ge(i.columnKey)(e,t);if(0!==c)return"ASC"===i.direction?c:-c}}catch(r){a.e(r)}finally{a.f()}return 0}))}()}),[l,i,G]);return Object(x.jsxs)("div",{children:[E?Object(x.jsx)("div",{children:Object(x.jsxs)(B.a,{container:!0,spacing:{xs:1},children:[Object(x.jsxs)(B.a,{item:!0,xs:6,sm:3,children:[Object(x.jsx)(u.b,{to:"/gui/customerCalendar/"+E.currentDate.clone().subtract(1,"months").format("MMM-YYYY"),className:"badge badge-warning",children:"Prev"}),E.currentDate.format("DD-MMM-YYYY"),Object(x.jsx)(u.b,{to:"/gui/customerCalendar/"+E.currentDate.clone().add(1,"months").format("MMM-YYYY"),className:"badge badge-warning",children:"Next"})]}),Object(x.jsx)(B.a,{item:!0,xs:6,sm:3,children:Object(x.jsxs)(u.b,{onClick:function(){return e=E.currentDate.format("MMM-YYYY"),void oe.validateBillGeneration(e,"income").then((function(t){console.log(t.data),t.data.rate?(Q(!0),O("Bill already generated for the month "+e+". Do you want to continue? Please confirm to proceed."),H()):$(e)})).catch((function(t){console.log(t),404==t.response.status&&$(e)}));var e},className:"badge",children:["Generate Bill Month - ",E.currentDate.format("MMM-YYYY")]})}),Object(x.jsxs)(B.a,{item:!0,xs:6,sm:3,children:[Object(x.jsx)("input",{type:"number",id:"rate",required:!0,defaultValue:v.rate,onChange:function(e){v.rate=e.target.value,g(v)},name:"rate",style:{width:60,height:20}}),Object(x.jsx)(u.b,{onClick:function(){var e={id:v.id,rate:v.rate,active:!1,startDate:v.startDate,endDate:E.currentDate.format("DD-MMM-YYYY")};v.id&&be.update(e.id,e).then((function(e){console.log(e.data)})).catch((function(e){console.log(e)}));var t={rate:v.rate,active:!0,startDate:E.currentDate.format("DD-MMM-YYYY")};be.create(t).then((function(e){g(e.data),O("New rate saved."),H(),console.log(v)})).catch((function(e){console.log(e)}))},className:"badge",children:"Set Rate"})]}),Object(x.jsx)(B.a,{item:!0,xs:3,sm:2,children:Object(x.jsxs)(u.b,{to:"/gui/bills/"+E.currentDate.format("MMM-YYYY"),className:"badge",children:["Print - ",E.currentDate.format("MMM-YYYY")]})}),Object(x.jsxs)(B.a,{item:!0,xs:3,sm:1,children:["\xa0",Object(x.jsx)(te.a,{variant:"warning",className:"badge",children:Object(x.jsx)(me.CSVLink,{data:X,filename:"income.txt",children:"Export"})})]})]})}):Object(x.jsxs)("div",{children:[Object(x.jsx)("br",{}),Object(x.jsx)("p",{children:"Please click on a Customer..."})]}),Object(x.jsx)("div",{className:"rootClassname",children:Object(x.jsx)(xe.Provider,{value:i,children:Object(x.jsx)(S.c,{columns:_,onRowsChange:function(e,t){!function(e,t){var n=e[t.indexes][t.column.key],a=e[t.indexes]["id"+t.column.key];console.log(e[t.indexes].id+" - "+n+" - "+a),function(e,t,n,a,i,c){var r={id:i,partyId:e,date:t,month:n.format("MMM-YYYY"),quantity:a,type:"income",category:null,active:!0,payment:null};"discount"!=t?i?w.update(i,r).then((function(e){console.log(e.data)})).catch((function(e){console.log(e)})):w.create(r).then((function(e){c["id"+t]=e.data.id,console.log(c)})).catch((function(e){console.log(e)})):(r.category="discount",r.payment=a,r.date=b()().format("DD"),i?se.update(i,r).then((function(e){console.log(e.data)})).catch((function(e){console.log(e)})):se.create(r).then((function(e){c["id"+t]=e.data.id,console.log(c)})).catch((function(e){console.log(e)})))}(e[t.indexes].id,t.column.key,E.currentDate,n,a,e[t.indexes]),l[t.indexes]=e[t.indexes],d(l.slice())}(e,t)},defaultColumnOptions:{sortable:!0,resizable:!0},className:i.enabled?"filterContainerClassname":void 0,rows:X,sortColumns:G,onSortColumnsChange:V,headerRowHeight:i.enabled?50:void 0})})}),Object(x.jsxs)(ne.a,{open:I,onClose:J,"aria-labelledby":"alert-dialog-title","aria-describedby":"alert-dialog-description",children:[Object(x.jsx)(re.a,{id:"alert-dialog-title",children:"Bills"}),Object(x.jsx)(ie.a,{children:Object(x.jsx)(ce.a,{id:"alert-dialog-description",children:m})}),Object(x.jsxs)(ae.a,{children:[T?Object(x.jsx)(te.a,{onClick:function(){Q(!1),$(E.currentDate.format("MMM-YYYY")),q(!1)},children:"Confirm"}):"",Object(x.jsx)(te.a,{onClick:J,children:"Close"})]})]})]})};function ke(e){var t=e.isCellSelected,n=e.column,i=e.children,c=Object(a.useContext)(xe),r=function(e){var t=Object(a.useRef)(null);return Object(a.useLayoutEffect)((function(){e&&t.current&&t.current.focus({preventScroll:!0})}),[e]),{ref:t,tabIndex:e?0:-1}}(t),o=r.ref,s=r.tabIndex;return Object(x.jsxs)(x.Fragment,{children:[Object(x.jsx)("div",{children:n.name}),c.enabled&&Object(x.jsx)("div",{children:i({ref:o,tabIndex:s,filters:c})})]})}var De=["filters"],Me=["filters"],Ye="filter-cell",Ne="filterClassname",Se=Object(a.createContext)(void 0);function we(e){["ArrowLeft","ArrowRight"].includes(e.key)&&e.stopPropagation()}function Re(e){return"name"===e?function(t,n){return t[e].localeCompare(n[e])}:function(t,n){return t[e]-n[e]}}var Ie=function(e){var t=Object(a.useState)({name:"",route:"",enabled:!0}),n=Object(N.a)(t,2),i=n[0],c=n[1],r={currentDate:b()()},o=Object(a.useState)([]),s=Object(N.a)(o,2),l=s[0],d=s[1],u=Object(a.useState)(r),j=Object(N.a)(u,2),h=j[0],m=j[1],O=Object(a.useState)([]),f=Object(N.a)(O,2),y=f[0],v=f[1],g=[{key:"id",name:"ID",minWidth:40,resizable:!0,headerCellClass:Ye,headerRenderer:function(e){return Object(x.jsx)(qe,Object(M.a)(Object(M.a)({},e),{},{children:function(e){var t=e.filters,n=Object(Y.a)(e,De);return Object(x.jsx)("input",Object(M.a)(Object(M.a)({},n),{},{className:Ne,value:t.name,onChange:function(e){return c(Object(M.a)(Object(M.a)({},t),{},{name:e.target.value}))},onKeyDown:we}))}}))}},{key:"name",name:"Name",width:200,resizable:!0},{key:"today",name:"Today Quantity",editor:A,editorOptions:{editOnClick:!0},minWidth:80,resizable:!0},{key:"dailyQuantity",name:"Daily Quantity",minWidth:80,resizable:!0},{key:"route",name:"Route",minWidth:100,resizable:!0,headerCellClass:Ye,headerRenderer:function(e){return Object(x.jsx)(qe,Object(M.a)(Object(M.a)({},e),{},{children:function(e){var t=e.filters,n=Object(Y.a)(e,Me);return Object(x.jsx)("input",Object(M.a)(Object(M.a)({},n),{},{className:Ne,value:t.route,onChange:function(e){return c(Object(M.a)(Object(M.a)({},t),{},{route:e.target.value}))},onKeyDown:we}))}}))}},{key:"qty",name:"Qty",minWidth:40,resizable:!0},{key:"rate",name:"Rate",minWidth:40,resizable:!0},{key:"bill",name:"Bill",minWidth:40,resizable:!0},{key:"dues",name:"Dues",minWidth:40,resizable:!0},{key:"totalBill",name:"Total",minWidth:60,resizable:!0},{key:"prevBill",name:"P-Bill",minWidth:75,resizable:!0},{key:"prevDues",name:"P-Dues",minWidth:70,resizable:!0},{key:"paid",name:"Paid",minWidth:60,resizable:!0}];Object(a.useEffect)((function(){var t={currentDate:b()(e.match.params.date,"DD-MMM-YYYY")};m(t);var n=null;p.getAll({active:!0,type:"customer"}).then((function(e){var a=e.data;n=new Array(a.length),a.map((function(e,t){n[t]={},n[t].id=e.id,n[t].name=e.name,n[t].dailyQuantity=e.defaultQuantity,n[t].route=e.route.name})),function(e,t){var n={month:e.currentDate.format("MMM-YYYY"),active:!0,type:"income"};se.getAll(n).then((function(e){var n=e.data;t&&t.map((function(e){n&&n.map((function(t){t.partyId==e.id&&("discount"==t.category?(e.discount=t.payment,e.iddiscount=t.id):e.paid?e.paid=e.paid+t.payment:e.paid=+t.payment)}))}))})).catch((function(e){console.log(e)}))}(t,n),function(e,t){var n={date:e.currentDate.format("DD"),month:e.currentDate.format("MMM-YYYY"),type:"income"};w.getAll(n).then((function(e){var n=e.data;n&&n.map((function(e){var n,a=Object(k.a)(t);try{for(a.s();!(n=a.n()).done;){var i=n.value;if(i.id==e.partyId){i.today=e.quantity,i.idtoday=e.id;break}}}catch(c){a.e(c)}finally{a.f()}})),console.log(t),d(t)})).catch((function(e){console.log(e)}))}(t,n),function(e,t){var n={month:e.currentDate.format("MMM-YYYY"),active:!0,type:"income"};oe.getAll(n).then((function(e){var n=e.data;n&&n.map((function(e){var n,a=Object(k.a)(t);try{for(a.s();!(n=a.n()).done;){var i=n.value;if(i.id==e.partyId){e.rate&&(i.qty=e.quantity,i.rate=e.rate,i.bill=e.bill,i.dues=e.dues,i.totalBill=i.bill+(i.dues?i.dues:0));break}}}catch(c){a.e(c)}finally{a.f()}}))})).catch((function(e){console.log(e)}));var a={month:e.currentDate.clone().subtract(1,"months").format("MMM-YYYY"),active:!0,type:"income"};oe.getAll(a).then((function(e){var n=e.data;n&&n.map((function(e){var n,a=Object(k.a)(t);try{for(a.s();!(n=a.n()).done;){var i=n.value;if(i.id==e.partyId){e.rate&&(i.prevBill=e.bill,i.prevDues=e.dues);break}}}catch(c){a.e(c)}finally{a.f()}}))})).catch((function(e){console.log(e)}))}(t,n)})).catch((function(e){console.log(e)}))}),[e.match.params.date]);var C=Object(a.useMemo)((function(){return function(){var e=null;return e=l.filter((function(e){return(!i.name||e.name.includes(i.name))&&(!i.route||e.route.includes(i.route))})),0===y.length?e:e=Object(D.a)(e).sort((function(e,t){var n,a=Object(k.a)(y);try{for(a.s();!(n=a.n()).done;){var i=n.value,c=Re(i.columnKey)(e,t);if(0!==c)return"ASC"===i.direction?c:-c}}catch(r){a.e(r)}finally{a.f()}return 0}))}()}),[l,i,y]);return Object(x.jsxs)("div",{children:[h?Object(x.jsx)("div",{children:Object(x.jsx)(B.a,{container:!0,spacing:{xs:1},children:Object(x.jsxs)(B.a,{item:!0,xs:3,sm:1,children:["\xa0",Object(x.jsx)(te.a,{variant:"warning",className:"badge",children:Object(x.jsx)(me.CSVLink,{data:C,filename:"dailyIncome.txt",children:"Export"})})]})})}):Object(x.jsxs)("div",{children:[Object(x.jsx)("br",{}),Object(x.jsx)("p",{children:"Please click on a Customer..."})]}),Object(x.jsx)("div",{className:"rootClassname",children:Object(x.jsx)(Se.Provider,{value:i,children:Object(x.jsx)(S.c,{columns:g,onRowsChange:function(e,t){!function(e,t){var n=e[t.indexes][t.column.key],a=e[t.indexes].idtoday;console.log(e[t.indexes].id+" - "+n+" - "+a+" - "+t.column.key),function(e,t,n,a,i,c){var r={id:i,partyId:e,date:t.format("DD"),month:n.format("MMM-YYYY"),quantity:a,type:"income"};i?w.update(i,r).then((function(e){console.log(e.data)})).catch((function(e){console.log(e)})):w.create(r).then((function(e){c.idtoday=e.data.id,console.log(c)})).catch((function(e){console.log(e)}))}(e[t.indexes].id,h.currentDate,h.currentDate,n,a,e[t.indexes]),l[t.indexes]=e[t.indexes],d(l.slice())}(e,t)},defaultColumnOptions:{sortable:!0,resizable:!0},className:i.enabled?"filterContainerClassname":void 0,rows:C,sortColumns:y,onSortColumnsChange:v,headerRowHeight:i.enabled?50:void 0})})})]})};function qe(e){var t=e.isCellSelected,n=e.column,i=e.children,c=Object(a.useContext)(Se),r=function(e){var t=Object(a.useRef)(null);return Object(a.useLayoutEffect)((function(){e&&t.current&&t.current.focus({preventScroll:!0})}),[e]),{ref:t,tabIndex:e?0:-1}}(t),o=r.ref,s=r.tabIndex;return Object(x.jsxs)(x.Fragment,{children:[Object(x.jsx)("div",{children:n.name}),c.enabled&&Object(x.jsx)("div",{children:i({ref:o,tabIndex:s,filters:c})})]})}var Ae=["filters"],Be=Object(a.createContext)(void 0);function Pe(e){["ArrowLeft","ArrowRight"].includes(e.key)&&e.stopPropagation()}function ze(e){return"name"===e?function(t,n){return t[e].localeCompare(n[e])}:function(t,n){return t[e]-n[e]}}var Te=function(e){var t=Object(a.useState)({enabled:!0}),n=Object(N.a)(t,2),i=n[0],c=n[1],r={currentDate:b()()},o=Object(a.useState)([]),s=Object(N.a)(o,2),l=s[0],d=s[1],j=Object(a.useState)(r),h=Object(N.a)(j,2),m=h[0],O=h[1],f=Object(a.useState)([]),p=Object(N.a)(f,2),y=p[0],v=p[1],g=Object(a.useState)(),C=Object(N.a)(g,2),R=C[0],I=C[1],q=Object(a.useState)(),A=Object(N.a)(q,2),P=A[0],z=A[1],T=Object(a.useState)(!1),Q=Object(N.a)(T,2),W=Q[0],F=Q[1],E=Object(a.useState)(!1),L=Object(N.a)(E,2),U=L[0],K=L[1],G=Object(a.useState)(),V=Object(N.a)(G,2),_=V[0],H=V[1],J=[{key:"print",name:"PRINT",width:70,resizable:!0,formatter:function(e){return Object(x.jsx)(x.Fragment,{children:Object(x.jsx)(u.b,{disable:"true",to:"/gui/collectionBills/"+b()(e.row.from,"YYYY-MMM-DD").format("YYYY-MM-DD")+"/"+b()(e.row.to,"YYYY-MMM-DD").format("YYYY-MM-DD")+"/"+e.row.partyId,className:"badge badge-warning",children:"Print"})})}},{key:"id",name:"ID",width:50,resizable:!0,headerCellClass:"filter-cell",headerRenderer:function(e){return Object(x.jsx)(Qe,Object(M.a)(Object(M.a)({},e),{},{children:function(e){var t=e.filters,n=Object(Y.a)(e,Ae);return Object(x.jsx)("input",Object(M.a)(Object(M.a)({},n),{},{className:"filterClassname",value:t.name,onChange:function(e){return c(Object(M.a)(Object(M.a)({},t),{},{name:e.target.value}))},onKeyDown:Pe}))}}))}},{key:"name",name:"Name",resizable:!0},{key:"from",name:"FROM",resizable:!0},{key:"to",name:"TO",resizable:!0},{key:"qty",name:"Quantity",resizable:!0},{key:"bill",name:"Total",resizable:!0}];function $(){var t={currentDate:b()(e.match.params.date,"DD-MMM-YYYY")};O(t);var n=null;oe.getAll({active:!0,type:"expense",category:"collection"}).then((function(e){var a=e.data;console.log(a),n=new Array(a.length),a&&a.map((function(e,t){n[t]={},n[t].id=e.id,n[t].name=e.customer.name,n[t].qty=e.quantity,n[t].rate=e.rate,n[t].from=e.from,n[t].to=e.to,n[t].bill=e.bill,n[t].partyId=e.partyId})),function(e,t){var n={active:!0,type:"expense",category:"collection"};oe.getAll(n).then((function(n){var a=n.data;console.log(a),a&&a.map((function(e){var n,a=Object(k.a)(t);try{for(a.s();!(n=a.n()).done;){var i=n.value;if(i.id==e.partyId){e.from&&(i.qty=e.quantity,i.rate=e.rate,i.bill=e.bill,i.from=e.from,i.to=e.to);break}}}catch(c){a.e(c)}finally{a.f()}})),function(e,t){var n={date:e.currentDate.format("DD"),type:"expence"};w.getAll(n).then((function(e){var n=e.data;n&&n.map((function(e){var n,a=Object(k.a)(t);try{for(a.s();!(n=a.n()).done;){var i=n.value;if(i.id==e.partyId){i.today=e.quantity,i.idtoday=e.id;break}}}catch(c){a.e(c)}finally{a.f()}})),console.log(t),d(t)})).catch((function(e){console.log(e)}))}(e,t)})).catch((function(e){console.log(e)}))}(t,n)})).catch((function(e){console.log(e)}))}function X(){K(!0)}function Z(){F(!1),K(!1)}function ee(){var e={type:"expense",from:R,to:P,category:"collection"};oe.generateBillsCollection(e).then((function(e){var t=e.data;t&&t.map((function(e){var t,n=Object(k.a)(l);try{for(n.s();!(t=n.n()).done;){var a=t.value;if(a.id==e.partyId){a.qty=e.quantity,a.rate=e.rate,a.bill=e.bill;break}}}catch(i){n.e(i)}finally{n.f()}})),$(),H("Bill generated for the period ."),X(),console.log(l),d(l)})).catch((function(e){404==e.response.status&&(H("Bill could not be generated for the period as there are overlapping bills."),F(!1),X())}))}Object(a.useEffect)((function(){$()}),[e.match.params.date]);var se=Object(a.useMemo)((function(){return function(){var e=null;return e=l.filter((function(e){return!i.name||e.name.includes(i.name)})),0===y.length?e:e=Object(D.a)(e).sort((function(e,t){var n,a=Object(k.a)(y);try{for(a.s();!(n=a.n()).done;){var i=n.value,c=ze(i.columnKey)(e,t);if(0!==c)return"ASC"===i.direction?c:-c}}catch(r){a.e(r)}finally{a.f()}return 0}))}()}),[l,i,y]);return Object(x.jsxs)("div",{children:[m?Object(x.jsx)("div",{children:Object(x.jsxs)(B.a,{container:!0,spacing:{xs:1},children:[Object(x.jsxs)(B.a,{item:!0,xs:3,sm:1,children:["\xa0",Object(x.jsx)(te.a,{variant:"warning",className:"badge",children:Object(x.jsx)(me.CSVLink,{data:se,filename:"dailyIncome.txt",children:"Export"})})]}),Object(x.jsx)(B.a,{item:!0,xs:3,sm:2,children:Object(x.jsx)(u.b,{to:R&&P?"/gui/collectionBills/"+R+"/"+P:"",hidden:!R||!P,className:"badge",children:"Print Collection"})}),Object(x.jsx)(B.a,{item:!0,xs:6,sm:3,children:Object(x.jsx)(u.b,{onClick:R&&P?function(){return function(){var e={type:"expense",from:R,to:P};oe.validateCollectionBillsGeneration("expense",e).then((function(e){console.log(e.data),e.data.from?(F(!0),H("Bill already generated for the period. Do you want to continue? Please confirm to proceed."),X()):ee()})).catch((function(e){console.log(e),404==e.response.status&&ee()}))}(m.currentDate.format("DD-MM-YYYY"))}:"",className:"badge",children:"Generate Collection Bill"})}),Object(x.jsxs)(B.a,{item:!0,xs:6,sm:6,children:[Object(x.jsx)("input",{type:"date",id:"from",required:!0,onChange:function(e){I(e.target.value)},name:"from",style:{width:150,height:20},placeholder:"From"}),Object(x.jsx)("input",{type:"date",id:"to",required:!0,onChange:function(e){z(e.target.value)},name:"to",style:{width:150,height:20},placeholder:"To"})]})]})}):Object(x.jsxs)("div",{children:[Object(x.jsx)("br",{}),Object(x.jsx)("p",{children:"Please click on a Customer..."})]}),Object(x.jsx)("div",{className:"rootClassname",children:Object(x.jsx)(Be.Provider,{value:i,children:Object(x.jsx)(S.c,{columns:J,onRowsChange:function(e,t){!function(e,t){var n=e[t.indexes][t.column.key],a=e[t.indexes].idtoday;console.log(e[t.indexes].id+" - "+n+" - "+a+" - "+t.column.key),function(e,t,n,a,i,c){var r={id:i,partyId:e,date:t.format("DD"),month:n.format("MMM-YYYY"),quantity:a,type:"expence"};i?w.update(i,r).then((function(e){console.log(e.data)})).catch((function(e){console.log(e)})):w.create(r).then((function(e){c.idtoday=e.data.id,console.log(c)})).catch((function(e){console.log(e)}))}(e[t.indexes].id,m.currentDate,m.currentDate,n,a,e[t.indexes]),l[t.indexes]=e[t.indexes],d(l.slice())}(e,t)},defaultColumnOptions:{sortable:!0,resizable:!0},className:i.enabled?"filterContainerClassname":void 0,rows:se,sortColumns:y,onSortColumnsChange:v,headerRowHeight:i.enabled?50:void 0})})}),Object(x.jsxs)(ne.a,{open:U,onClose:Z,"aria-labelledby":"alert-dialog-title","aria-describedby":"alert-dialog-description",children:[Object(x.jsx)(re.a,{id:"alert-dialog-title",children:"Bills"}),Object(x.jsx)(ie.a,{children:Object(x.jsx)(ce.a,{id:"alert-dialog-description",children:_})}),Object(x.jsxs)(ae.a,{children:[W?Object(x.jsx)(te.a,{onClick:function(){F(!1),ee(m.currentDate.format("MMM-YYYY")),K(!1)},children:"Confirm"}):"",Object(x.jsx)(te.a,{onClick:Z,children:"Close"})]})]})]})};function Qe(e){var t=e.isCellSelected,n=e.column,i=e.children,c=Object(a.useContext)(Be),r=function(e){var t=Object(a.useRef)(null);return Object(a.useLayoutEffect)((function(){e&&t.current&&t.current.focus({preventScroll:!0})}),[e]),{ref:t,tabIndex:e?0:-1}}(t),o=r.ref,s=r.tabIndex;return Object(x.jsxs)(x.Fragment,{children:[Object(x.jsx)("div",{children:n.name}),c.enabled&&Object(x.jsx)("div",{children:i({ref:o,tabIndex:s,filters:c})})]})}var We=["filters"],Fe=Object(a.createContext)(void 0);function Ee(e){["ArrowLeft","ArrowRight"].includes(e.key)&&e.stopPropagation()}function Le(e){return"name"===e?function(t,n){return t[e].localeCompare(n[e])}:function(t,n){return t[e]-n[e]}}var Ue=function(e){var t=Object(a.useState)({name:"",enabled:!0}),n=Object(N.a)(t,2),i=n[0],c=n[1],r={currentDate:b()()},o=Object(a.useState)([]),s=Object(N.a)(o,2),l=s[0],d=s[1],j=Object(a.useState)(),h=Object(N.a)(j,2),m=(h[0],h[1],Object(a.useState)({})),O=Object(N.a)(m,2),f=(O[0],O[1],Object(a.useState)(!1)),y=Object(N.a)(f,2),v=(y[0],y[1],Object(a.useState)(!1)),g=Object(N.a)(v,2),C=(g[0],g[1],Object(a.useState)(r)),R=Object(N.a)(C,2),I=R[0],q=R[1],P=Object(a.useState)([]),z=Object(N.a)(P,2),T=z[0],Q=z[1],W=Object(a.useState)(),F=Object(N.a)(W,2),E=(F[0],F[1],Object(a.useState)()),L=Object(N.a)(E,2),U=(L[0],L[1],[{key:"id",name:"ID",minWidth:40,resizable:!0,headerCellClass:"filter-cell",headerRenderer:function(e){return Object(x.jsx)(Ke,Object(M.a)(Object(M.a)({},e),{},{children:function(e){var t=e.filters,n=Object(Y.a)(e,We);return Object(x.jsx)("input",Object(M.a)(Object(M.a)({},n),{},{className:"filterClassname",value:t.name,onChange:function(e){return c(Object(M.a)(Object(M.a)({},t),{},{name:e.target.value}))},onKeyDown:Ee}))}}))}},{key:"name",name:"Name",width:200,resizable:!0},{key:"today",name:"Quantity",editor:A,editorOptions:{editOnClick:!0},minWidth:80,resizable:!0},{key:"fat",name:"Fat",minWidth:20,resizable:!0,editor:A,editorOptions:{editOnClick:!0}},{key:"snf",name:"Snf",minWidth:20,resizable:!0,editor:A,editorOptions:{editOnClick:!0}},{key:"water",name:"Water",minWidth:40,resizable:!0,editor:A,editorOptions:{editOnClick:!0}},{key:"rate",name:"Rate",minWidth:40,resizable:!0,editor:A,editorOptions:{editOnClick:!0}},{key:"route",name:"Route",minWidth:40,resizable:!0},{key:"bill",name:"Bill",minWidth:40,resizable:!0},{key:"qty",name:"Bill Qty",minWidth:70,resizable:!0},{key:"paid",name:"Paid",minWidth:60,resizable:!0}]);Object(a.useEffect)((function(){var t={currentDate:b()(e.match.params.date,"DD-MMM-YYYY")};q(t);var n=null;p.getAll({active:!0,type:"farmer"}).then((function(e){var a=e.data;n=new Array(a.length),a.map((function(e,t){n[t]={},n[t].id=e.id,n[t].name=e.name})),function(e,t){var n={month:e.currentDate.format("MMM-YYYY"),active:!0,type:"expense"};se.getAll(n).then((function(e){var n=e.data;t&&t.map((function(e){n&&n.map((function(t){t.partyId==e.id&&(e.paid?e.paid=e.paid+t.payment:e.paid=+t.payment)}))}))})).catch((function(e){console.log(e)}))}(t,n),function(e,t){var n={date:e.currentDate.format("DD"),month:e.currentDate.format("MMM-YYYY"),type:"expense"};w.getAll(n).then((function(e){var n=e.data;n&&n.map((function(e){var n,a=Object(k.a)(t);try{for(a.s();!(n=a.n()).done;){var i=n.value;if(i.id==e.partyId){i.today=e.quantity,i.idtoday=e.id,i.fat=e.fat,i.snf=e.snf,i.water=e.water,i.rate=e.rate;break}}}catch(c){a.e(c)}finally{a.f()}})),console.log(t),d(t)})).catch((function(e){console.log(e)}))}(t,n),function(e,t){var n={month:e.currentDate.format("MMM-YYYY"),active:!0,type:"expense"};oe.getAll(n).then((function(e){var n=e.data;n&&n.map((function(e){var n,a=Object(k.a)(t);try{for(a.s();!(n=a.n()).done;){var i=n.value;if(i.id==e.partyId){e.rate&&(i.qty=e.quantity,i.rate=e.rate,i.bill=e.bill,i.dues=e.dues,i.totalBill=i.bill+(i.dues?i.dues:0));break}}}catch(c){a.e(c)}finally{a.f()}}))})).catch((function(e){console.log(e)}));var a={month:e.currentDate.clone().subtract(1,"months").format("MMM-YYYY"),active:!0,type:"expense"};oe.getAll(a).then((function(e){var n=e.data;n&&n.map((function(e){var n,a=Object(k.a)(t);try{for(a.s();!(n=a.n()).done;){var i=n.value;if(i.id==e.partyId){e.rate&&(i.prevBill=e.bill,i.prevDues=e.dues);break}}}catch(c){a.e(c)}finally{a.f()}}))})).catch((function(e){console.log(e)}))}(t,n)})).catch((function(e){console.log(e)}))}),[e.match.params.date]);var K=Object(a.useMemo)((function(){return function(){var e=null;return e=l.filter((function(e){return!i.name||e.name.includes(i.name)})),0===T.length?e:e=Object(D.a)(e).sort((function(e,t){var n,a=Object(k.a)(T);try{for(a.s();!(n=a.n()).done;){var i=n.value,c=Le(i.columnKey)(e,t);if(0!==c)return"ASC"===i.direction?c:-c}}catch(r){a.e(r)}finally{a.f()}return 0}))}()}),[l,i,T]);return Object(x.jsxs)("div",{children:[I?Object(x.jsx)("div",{children:Object(x.jsxs)(B.a,{container:!0,spacing:{xs:1},children:[Object(x.jsxs)(B.a,{item:!0,xs:6,sm:3,children:[Object(x.jsx)(u.b,{to:"/gui/collectionDaily/"+I.currentDate.clone().subtract(1,"days").format("DD-MMM-YYYY"),className:"badge badge-warning",children:"Prev"}),I.currentDate.format("DD-MMM-YYYY"),Object(x.jsx)(u.b,{to:"/gui/collectionDaily/"+I.currentDate.clone().add(1,"days").format("DD-MMM-YYYY"),className:"badge badge-warning",children:"Next"})]}),Object(x.jsxs)(B.a,{item:!0,xs:3,sm:1,children:["\xa0",Object(x.jsx)(te.a,{variant:"warning",className:"badge",children:Object(x.jsx)(me.CSVLink,{data:K,filename:"dailyCollectionExpense.txt",children:"Export"})})]})]})}):Object(x.jsxs)("div",{children:[Object(x.jsx)("br",{}),Object(x.jsx)("p",{children:"Please click on a Customer..."})]}),Object(x.jsx)("div",{className:"rootClassname",children:Object(x.jsx)(Fe.Provider,{value:i,children:Object(x.jsx)(S.c,{columns:U,onRowsChange:function(e,t){!function(e,t){var n=e[t.indexes],a=n[t.column.key],i=n.idtoday;console.log(n.id+" - "+a+" - "+i+" - "+t.column.key),function(e,t,n,a,i,c,r,o,s,l){var d=0,u=0;l&&(l<30?30:l);a&&(u=a);d=l*u;var j={id:i,partyId:e,date:t.format("DD"),deliveryDate:t.format("DD-MMM-YYYY"),month:n.format("MMM-YYYY"),fat:r,snf:o,water:s,quantity:a,rate:l,type:"expense",amount:d,category:"collection"};console.log(j),i?w.update(i,j).then((function(e){console.log(e.data)})).catch((function(e){console.log(e)})):w.create(j).then((function(e){c.idtoday=e.data.id,console.log(c)})).catch((function(e){console.log(e)}))}(n.id,I.currentDate,I.currentDate,n.today,i,n,n.fat,n.snf,n.water,n.rate)}(e,t),d(e)},defaultColumnOptions:{sortable:!0,resizable:!0},className:i.enabled?"filterContainerClassname":void 0,rows:K,sortColumns:T,onSortColumnsChange:Q,headerRowHeight:i.enabled?50:void 0})})})]})};function Ke(e){var t=e.isCellSelected,n=e.column,i=e.children,c=Object(a.useContext)(Fe),r=function(e){var t=Object(a.useRef)(null);return Object(a.useLayoutEffect)((function(){e&&t.current&&t.current.focus({preventScroll:!0})}),[e]),{ref:t,tabIndex:e?0:-1}}(t),o=r.ref,s=r.tabIndex;return Object(x.jsxs)(x.Fragment,{children:[Object(x.jsx)("div",{children:n.name}),c.enabled&&Object(x.jsx)("div",{children:i({ref:o,tabIndex:s,filters:c})})]})}var Ge=["filters"],Ve=Object(a.createContext)(void 0);function _e(e){["ArrowLeft","ArrowRight"].includes(e.key)&&e.stopPropagation()}function He(e){e.stopPropagation()}function Je(e){switch(e){case"name":case"address":case"startDate":case"endDate":case"type":return function(t,n){return t[e].localeCompare(n[e])};default:return function(t,n){return t[e]-n[e]}}}var $e=function(e){var t=Object(a.useState)([]),n=Object(N.a)(t,2),i=n[0],c=n[1],r=Object(a.useState)([]),o=Object(N.a)(r,2),s=o[0],l=o[1],d=Object(a.useState)({name:"",enabled:!0}),j=Object(N.a)(d,2),h=j[0],b=j[1],m=[{key:"id",name:"ID",width:40,resizable:!0,frozen:!0,headerCellClass:"filter-cell",headerRenderer:function(e){return Object(x.jsx)(Xe,Object(M.a)(Object(M.a)({},e),{},{children:function(e){var t=e.filters,n=Object(Y.a)(e,Ge);return Object(x.jsx)("input",Object(M.a)(Object(M.a)({},n),{},{className:"filterClassname",value:t.name,onChange:function(e){return b(Object(M.a)(Object(M.a)({},t),{},{name:e.target.value}))},onKeyDown:_e}))}}))}},{key:"name",name:"Name",editor:S.b,editorOptions:{editOnClick:!0},resizable:!0,frozen:!0},{key:"address",name:"Address",editor:S.b,editorOptions:{editOnClick:!0},resizable:!0},{key:"mobNo",name:"MobNo",editor:A,editorOptions:{editOnClick:!0},resizable:!0},{key:"startDate",name:"StartDate",editor:S.b,editorOptions:{editOnClick:!0},resizable:!0},{key:"endDate",name:"EndDate",editor:S.b,editorOptions:{editOnClick:!0},resizable:!0},{key:"defaultQuantity",name:"Quantity",width:40,editor:A,editorOptions:{editOnClick:!0},resizable:!0},{key:"active",name:"Active",width:40,formatter:function(e){var t=e.row,n=e.onRowChange,a=e.isCellSelected;return Object(x.jsx)(S.a,{value:t.active,onChange:function(){n(Object(M.a)(Object(M.a)({},t),{},{active:!t.active}))},onClick:He,isCellSelected:a})}},{key:"routeId",name:"Route",resizable:!0,formatter:function(e){return Object(x.jsx)(x.Fragment,{children:e.row.routeName})},editor:T,editorOptions:{editOnClick:!0}},{key:"routeSeq",name:"Seq",width:40,editor:A,editorOptions:{editOnClick:!0},resizable:!0},{key:"type",name:"Type",width:80,editor:S.b,editorOptions:{editOnClick:!0},resizable:!0}];Object(a.useEffect)((function(){var e=null,t={_sort:"routeId",_order:"asc"};console.log(t),p.getAll(t).then((function(t){var n=t.data;e=new Array(n.length),n.map((function(t,n){e[n]={},e[n].id=t.id,e[n].name=t.name,e[n].address=t.address,e[n].mobNo=t.mobNo,e[n].startDate=t.startDate,e[n].endDate=t.endDate,e[n].defaultQuantity=t.defaultQuantity,e[n].active=t.active,e[n].routeId=t.routeId,e[n].routeSeq=t.routeSeq,e[n].type=t.type,t.route&&(e[n].routeName=t.route.name)})),c(e)})).catch((function(e){console.log(e)}))}),[]);var O=Object(a.useMemo)((function(){return function(){var e=null;return e=i.filter((function(e){return!h.name||e.name.includes(h.name)})),0===s.length?e:e=Object(D.a)(e).sort((function(e,t){var n,a=Object(k.a)(s);try{for(a.s();!(n=a.n()).done;){var i=n.value,c=Je(i.columnKey)(e,t);if(0!==c)return"ASC"===i.direction?c:-c}}catch(r){a.e(r)}finally{a.f()}return 0}))}()}),[i,h,s]);return Object(x.jsxs)("div",{children:[Object(x.jsx)(u.b,{to:"/gui/addCustomer",className:"nav-link",children:"Add Customer"}),Object(x.jsx)("div",{className:"rootClassname",children:Object(x.jsx)(Ve.Provider,{value:h,children:Object(x.jsx)(S.c,{columns:m,onRowsChange:function(e,t){!function(e,t){console.log(e[t.indexes].id+" - "+e[t.indexes][t.column.key]),function(e){var t={id:e.id,name:e.name,address:e.address,mobNo:e.mobNo,startDate:e.startDate,endDate:e.endDate,active:e.active,routeId:e.routeId,defaultQuantity:e.defaultQuantity,routeSeq:e.routeSeq,type:e.type};console.log(t),p.update(e.id,t).then((function(e){console.log(e.data)})).catch((function(e){console.log(e)}))}(e[t.indexes])}(e,t),c(e)},defaultColumnOptions:{sortable:!0,resizable:!0},className:h.enabled?"filterContainerClassname":void 0,rows:O,sortColumns:s,onSortColumnsChange:l,headerRowHeight:h.enabled?50:void 0})})})]})};function Xe(e){var t=e.isCellSelected,n=e.column,i=e.children,c=Object(a.useContext)(Ve),r=function(e){var t=Object(a.useRef)(null);return Object(a.useLayoutEffect)((function(){e&&t.current&&t.current.focus({preventScroll:!0})}),[e]),{ref:t,tabIndex:e?0:-1}}(t),o=r.ref,s=r.tabIndex;return Object(x.jsxs)(x.Fragment,{children:[Object(x.jsx)("div",{children:n.name}),c.enabled&&Object(x.jsx)("div",{children:i({ref:o,tabIndex:s,filters:c})})]})}var Ze=function(e){Object(l.a)(n,e);var t=Object(d.a)(n);function n(e){var a;return Object(o.a)(this,n),(a=t.call(this,e)).state={bills:null},a}return Object(s.a)(n,[{key:"componentDidMount",value:function(){this.getBills(this.props.match.params.month)}},{key:"getBills",value:function(e){var t=this,n={month:e,active:!0,type:"income"},a=[];oe.getAll(n).then((function(n){var i=n.data;i&&i.map((function(t,n){if(t.quantity>0||t.dues>0){var i={};i.id=t.id,i.partyId=t.partyId,i.month=e,i.qty=t.quantity,i.rate=t.rate,i.bill=t.bill,i.dues=t.dues,i.totalBill=i.bill+(i.dues?i.dues:0),i.paid=+t.payment,i.discount=+t.discount,i.lastBillTotal=+t.lastBillTotal,t.customer&&(i.name=t.customer.name),a[n]={},a[n]=i}}));var c={month:e,type:"income"};w.getAll(c).then((function(e){var n=e.data;n&&n.map((function(e){var t,n=Object(k.a)(a);try{for(n.s();!(t=n.n()).done;){var i=t.value;if(i&&i.partyId==e.partyId){i[e.date]=e.quantity;break}}}catch(c){n.e(c)}finally{n.f()}})),console.log(a),t.setState({bills:a})})).catch((function(e){console.log(e)})),t.setState({bills:a})})).catch((function(e){console.log(e)}))}},{key:"render",value:function(){var e=this.state.bills;return Object(x.jsx)("div",{className:"container",children:Object(x.jsx)("table",{className:"table",children:e&&e.map((function(e){return Object(x.jsx)("tr",{children:Object(x.jsx)("td",{children:Object(x.jsxs)("table",{className:"table noBorder",border:"1",children:[Object(x.jsxs)("tr",{children:[Object(x.jsx)("th",{children:"Name"}),Object(x.jsx)("td",{children:Object(x.jsx)("b",{children:e.name?e.name:e.id})}),Object(x.jsx)("th",{children:"Month"}),Object(x.jsx)("td",{children:e.month}),Object(x.jsx)("th",{children:"Last Bill"}),Object(x.jsx)("td",{children:e.lastBillTotal}),Object(x.jsx)("th",{children:"Payment"}),Object(x.jsx)("td",{children:e.paid}),Object(x.jsx)("th",{children:"Discount"}),Object(x.jsx)("td",{children:e.discount})]}),Object(x.jsxs)("tr",{children:[Object(x.jsx)("th",{children:"Quantity"}),Object(x.jsx)("td",{children:e.qty+" Ltr"}),Object(x.jsx)("th",{children:"Rate"}),Object(x.jsx)("td",{children:e.rate}),Object(x.jsx)("th",{children:"Bill"}),Object(x.jsx)("td",{children:e.bill}),Object(x.jsx)("th",{children:"Dues"}),Object(x.jsx)("td",{children:e.dues}),Object(x.jsx)("th",{children:"Total Bill"}),Object(x.jsxs)("td",{children:[e.totalBill," "]})]}),Object(x.jsx)("tr",{children:Object(x.jsx)("td",{style:{margin:0,padding:0},colspan:10,children:Object(x.jsxs)("table",{style:{margin:0,padding:0},children:[Object(x.jsxs)("tr",{children:[Object(x.jsx)("td",{children:"Day"}),Object(x.jsx)("td",{children:"1"}),Object(x.jsx)("td",{children:"2"}),Object(x.jsx)("td",{children:"3"}),Object(x.jsx)("td",{children:"4"}),Object(x.jsx)("td",{children:"5"}),Object(x.jsx)("td",{children:"6"}),Object(x.jsx)("td",{children:"7"}),Object(x.jsx)("td",{children:"8"}),Object(x.jsx)("td",{children:"9"}),Object(x.jsx)("td",{children:"10"}),Object(x.jsx)("td",{children:"11"}),Object(x.jsx)("td",{children:"12"}),Object(x.jsx)("td",{children:"13"}),Object(x.jsx)("td",{children:"14"}),Object(x.jsx)("td",{children:"15"}),Object(x.jsx)("td",{children:"16"}),Object(x.jsx)("td",{rowSpan:2,children:Object(x.jsx)("h1",{children:"RAMJI DAIRY"})})]}),Object(x.jsxs)("tr",{children:[Object(x.jsx)("td",{children:"Quantity"}),Object(x.jsx)("td",{children:e["01"]}),Object(x.jsx)("td",{children:e["02"]}),Object(x.jsx)("td",{children:e["03"]}),Object(x.jsx)("td",{children:e["04"]}),Object(x.jsx)("td",{children:e["05"]}),Object(x.jsx)("td",{children:e["06"]}),Object(x.jsx)("td",{children:e["07"]}),Object(x.jsx)("td",{children:e["08"]}),Object(x.jsx)("td",{children:e["09"]}),Object(x.jsx)("td",{children:e[10]}),Object(x.jsx)("td",{children:e[11]}),Object(x.jsx)("td",{children:e[12]}),Object(x.jsx)("td",{children:e[13]}),Object(x.jsx)("td",{children:e[14]}),Object(x.jsx)("td",{children:e[15]}),Object(x.jsx)("td",{children:e[16]})]}),Object(x.jsxs)("tr",{children:[Object(x.jsx)("td",{children:"Day"}),Object(x.jsx)("td",{children:"17"}),Object(x.jsx)("td",{children:"18"}),Object(x.jsx)("td",{children:"19"}),Object(x.jsx)("td",{children:"20"}),Object(x.jsx)("td",{children:"21"}),Object(x.jsx)("td",{children:"22"}),Object(x.jsx)("td",{children:"23"}),Object(x.jsx)("td",{children:"24"}),Object(x.jsx)("td",{children:"25"}),Object(x.jsx)("td",{children:"26"}),Object(x.jsx)("td",{children:"27"}),Object(x.jsx)("td",{children:"28"}),Object(x.jsx)("td",{children:"29"}),Object(x.jsx)("td",{children:"30"}),Object(x.jsx)("td",{children:"31"}),Object(x.jsx)("td",{children:" "}),Object(x.jsx)("td",{rowSpan:2,children:Object(x.jsx)("h3",{children:"9860910995,"})})]}),Object(x.jsxs)("tr",{children:[Object(x.jsx)("td",{children:"quantity"}),Object(x.jsx)("td",{children:e[17]}),Object(x.jsx)("td",{children:e[18]}),Object(x.jsx)("td",{children:e[19]}),Object(x.jsx)("td",{children:e[20]}),Object(x.jsx)("td",{children:e[21]}),Object(x.jsx)("td",{children:e[22]}),Object(x.jsx)("td",{children:e[23]}),Object(x.jsx)("td",{children:e[24]}),Object(x.jsx)("td",{children:e[25]}),Object(x.jsx)("td",{children:e[26]}),Object(x.jsx)("td",{children:e[27]}),Object(x.jsx)("td",{children:e[28]}),Object(x.jsx)("td",{children:e[29]}),Object(x.jsx)("td",{children:e[30]}),Object(x.jsx)("td",{children:e[31]})]})]})})})]})})})}))})})}}]),n}(a.Component),et=function(e){Object(l.a)(n,e);var t=Object(d.a)(n);function n(e){var a;return Object(o.a)(this,n),(a=t.call(this,e)).state={bills:null},a}return Object(s.a)(n,[{key:"componentDidMount",value:function(){this.getBills(this.props.match.params.from,this.props.match.params.to,this.props.match.params.partyId)}},{key:"getBills",value:function(e,t,n){var a=this,i={from:e,to:t,active:!0,type:"expense",category:"collection",partyId:n};console.log(i);var c=[];oe.getAll(i).then((function(n){var i=n.data;console.log(i),i&&i.map((function(e,t){if(e.quantity>0||e.dues>0){var n={};n.id=e.id,n.partyId=e.partyId,n.from=e.from,n.to=e.to,n.qty=e.quantity,n.rate=e.rate,n.bill=e.bill,n.dues=e.dues,n.totalBill=n.bill+(n.dues?n.dues:0),n.paid=+e.payment,n.discount=+e.discount,n.lastBillTotal=+e.lastBillTotal,e.customer&&(n.name=e.customer.name),c[t]={},c[t]=n}}));var r={from:e,to:t,type:"expense",category:"collection"};w.getAll(r).then((function(e){var t=e.data;t&&t.map((function(e){var t,n=Object(k.a)(c);try{for(n.s();!(t=n.n()).done;){var a=t.value;if(a&&a.partyId==e.partyId){a[e.date]=e.quantity;break}}}catch(i){n.e(i)}finally{n.f()}})),console.log(c),a.setState({bills:c})})).catch((function(e){console.log(e)})),a.setState({bills:c})})).catch((function(e){console.log(e)}))}},{key:"render",value:function(){var e=this.state.bills;return Object(x.jsx)("div",{className:"container",children:Object(x.jsx)("table",{className:"table",children:e&&e.map((function(e){return Object(x.jsx)("tr",{children:Object(x.jsx)("td",{children:Object(x.jsxs)("table",{className:"table noBorder",border:"1",children:[Object(x.jsxs)("tr",{children:[Object(x.jsx)("th",{children:"Name"}),Object(x.jsx)("td",{children:Object(x.jsx)("b",{children:e.name?e.name:e.id})}),Object(x.jsx)("th",{children:"From"}),Object(x.jsx)("td",{children:e.from}),Object(x.jsx)("th",{children:"To"}),Object(x.jsx)("td",{children:e.to}),Object(x.jsx)("th",{children:"Last Bill"}),Object(x.jsx)("td",{children:e.lastBillTotal}),Object(x.jsx)("th",{children:"Payment"}),Object(x.jsx)("td",{children:e.paid}),Object(x.jsx)("th",{children:"Discount"}),Object(x.jsx)("td",{children:e.discount})]}),Object(x.jsxs)("tr",{children:[Object(x.jsx)("th",{children:"Quantity"}),Object(x.jsx)("td",{colSpan:3,children:e.qty+" Ltr"}),Object(x.jsx)("th",{children:"Bill"}),Object(x.jsx)("td",{children:e.bill}),Object(x.jsx)("th",{children:"Dues"}),Object(x.jsx)("td",{children:e.dues}),Object(x.jsx)("th",{children:"Total Bill"}),Object(x.jsxs)("td",{children:[e.totalBill," "]})]}),Object(x.jsx)("tr",{children:Object(x.jsx)("td",{style:{margin:0,padding:0},colspan:10,children:Object(x.jsxs)("table",{style:{margin:0,padding:0},children:[Object(x.jsxs)("tr",{children:[Object(x.jsx)("td",{children:"Day"}),Object(x.jsx)("td",{children:"1"}),Object(x.jsx)("td",{children:"2"}),Object(x.jsx)("td",{children:"3"}),Object(x.jsx)("td",{children:"4"}),Object(x.jsx)("td",{children:"5"}),Object(x.jsx)("td",{children:"6"}),Object(x.jsx)("td",{children:"7"}),Object(x.jsx)("td",{children:"8"}),Object(x.jsx)("td",{children:"9"}),Object(x.jsx)("td",{children:"10"}),Object(x.jsx)("td",{children:"11"}),Object(x.jsx)("td",{children:"12"}),Object(x.jsx)("td",{children:"13"}),Object(x.jsx)("td",{children:"14"}),Object(x.jsx)("td",{children:"15"}),Object(x.jsx)("td",{children:"16"}),Object(x.jsx)("td",{rowSpan:2,children:Object(x.jsx)("h1",{children:"RAMJI DAIRY"})})]}),Object(x.jsxs)("tr",{children:[Object(x.jsx)("td",{children:"Rate"}),Object(x.jsx)("td",{children:e["01"]}),Object(x.jsx)("td",{children:e["02"]}),Object(x.jsx)("td",{children:e["03"]}),Object(x.jsx)("td",{children:e["04"]}),Object(x.jsx)("td",{children:e["05"]}),Object(x.jsx)("td",{children:e["06"]}),Object(x.jsx)("td",{children:e["07"]}),Object(x.jsx)("td",{children:e["08"]}),Object(x.jsx)("td",{children:e["09"]}),Object(x.jsx)("td",{children:e[10]}),Object(x.jsx)("td",{children:e[11]}),Object(x.jsx)("td",{children:e[12]}),Object(x.jsx)("td",{children:e[13]}),Object(x.jsx)("td",{children:e[14]}),Object(x.jsx)("td",{children:e[15]}),Object(x.jsx)("td",{children:e[16]})]}),Object(x.jsxs)("tr",{children:[Object(x.jsx)("td",{children:"Fat"}),Object(x.jsx)("td",{children:e["01"]}),Object(x.jsx)("td",{children:e["02"]}),Object(x.jsx)("td",{children:e["03"]}),Object(x.jsx)("td",{children:e["04"]}),Object(x.jsx)("td",{children:e["05"]}),Object(x.jsx)("td",{children:e["06"]}),Object(x.jsx)("td",{children:e["07"]}),Object(x.jsx)("td",{children:e["08"]}),Object(x.jsx)("td",{children:e["09"]}),Object(x.jsx)("td",{children:e[10]}),Object(x.jsx)("td",{children:e[11]}),Object(x.jsx)("td",{children:e[12]}),Object(x.jsx)("td",{children:e[13]}),Object(x.jsx)("td",{children:e[14]}),Object(x.jsx)("td",{children:e[15]}),Object(x.jsx)("td",{children:e[16]})]}),Object(x.jsxs)("tr",{children:[Object(x.jsx)("td",{children:"Snf"}),Object(x.jsx)("td",{children:e["01"]}),Object(x.jsx)("td",{children:e["02"]}),Object(x.jsx)("td",{children:e["03"]}),Object(x.jsx)("td",{children:e["04"]}),Object(x.jsx)("td",{children:e["05"]}),Object(x.jsx)("td",{children:e["06"]}),Object(x.jsx)("td",{children:e["07"]}),Object(x.jsx)("td",{children:e["08"]}),Object(x.jsx)("td",{children:e["09"]}),Object(x.jsx)("td",{children:e[10]}),Object(x.jsx)("td",{children:e[11]}),Object(x.jsx)("td",{children:e[12]}),Object(x.jsx)("td",{children:e[13]}),Object(x.jsx)("td",{children:e[14]}),Object(x.jsx)("td",{children:e[15]}),Object(x.jsx)("td",{children:e[16]})]}),Object(x.jsxs)("tr",{children:[Object(x.jsx)("td",{children:"Water"}),Object(x.jsx)("td",{children:e["01"]}),Object(x.jsx)("td",{children:e["02"]}),Object(x.jsx)("td",{children:e["03"]}),Object(x.jsx)("td",{children:e["04"]}),Object(x.jsx)("td",{children:e["05"]}),Object(x.jsx)("td",{children:e["06"]}),Object(x.jsx)("td",{children:e["07"]}),Object(x.jsx)("td",{children:e["08"]}),Object(x.jsx)("td",{children:e["09"]}),Object(x.jsx)("td",{children:e[10]}),Object(x.jsx)("td",{children:e[11]}),Object(x.jsx)("td",{children:e[12]}),Object(x.jsx)("td",{children:e[13]}),Object(x.jsx)("td",{children:e[14]}),Object(x.jsx)("td",{children:e[15]}),Object(x.jsx)("td",{children:e[16]})]}),Object(x.jsxs)("tr",{children:[Object(x.jsx)("td",{children:"Day"}),Object(x.jsx)("td",{children:"17"}),Object(x.jsx)("td",{children:"18"}),Object(x.jsx)("td",{children:"19"}),Object(x.jsx)("td",{children:"20"}),Object(x.jsx)("td",{children:"21"}),Object(x.jsx)("td",{children:"22"}),Object(x.jsx)("td",{children:"23"}),Object(x.jsx)("td",{children:"24"}),Object(x.jsx)("td",{children:"25"}),Object(x.jsx)("td",{children:"26"}),Object(x.jsx)("td",{children:"27"}),Object(x.jsx)("td",{children:"28"}),Object(x.jsx)("td",{children:"29"}),Object(x.jsx)("td",{children:"30"}),Object(x.jsx)("td",{children:"31"}),Object(x.jsx)("td",{children:" "}),Object(x.jsx)("td",{rowSpan:2,children:Object(x.jsx)("h3",{children:"9860910995"})})]}),Object(x.jsxs)("tr",{children:[Object(x.jsx)("td",{children:"Rate"}),Object(x.jsx)("td",{children:e[17]}),Object(x.jsx)("td",{children:e[18]}),Object(x.jsx)("td",{children:e[19]}),Object(x.jsx)("td",{children:e[20]}),Object(x.jsx)("td",{children:e[21]}),Object(x.jsx)("td",{children:e[22]}),Object(x.jsx)("td",{children:e[23]}),Object(x.jsx)("td",{children:e[24]}),Object(x.jsx)("td",{children:e[25]}),Object(x.jsx)("td",{children:e[26]}),Object(x.jsx)("td",{children:e[27]}),Object(x.jsx)("td",{children:e[28]}),Object(x.jsx)("td",{children:e[29]}),Object(x.jsx)("td",{children:e[30]}),Object(x.jsx)("td",{children:e[31]})]}),Object(x.jsxs)("tr",{children:[Object(x.jsx)("td",{children:"Fat"}),Object(x.jsx)("td",{children:e[17]}),Object(x.jsx)("td",{children:e[18]}),Object(x.jsx)("td",{children:e[19]}),Object(x.jsx)("td",{children:e[20]}),Object(x.jsx)("td",{children:e[21]}),Object(x.jsx)("td",{children:e[22]}),Object(x.jsx)("td",{children:e[23]}),Object(x.jsx)("td",{children:e[24]}),Object(x.jsx)("td",{children:e[25]}),Object(x.jsx)("td",{children:e[26]}),Object(x.jsx)("td",{children:e[27]}),Object(x.jsx)("td",{children:e[28]}),Object(x.jsx)("td",{children:e[29]}),Object(x.jsx)("td",{children:e[30]}),Object(x.jsx)("td",{children:e[31]})]}),Object(x.jsxs)("tr",{children:[Object(x.jsx)("td",{children:"Snf"}),Object(x.jsx)("td",{children:e[17]}),Object(x.jsx)("td",{children:e[18]}),Object(x.jsx)("td",{children:e[19]}),Object(x.jsx)("td",{children:e[20]}),Object(x.jsx)("td",{children:e[21]}),Object(x.jsx)("td",{children:e[22]}),Object(x.jsx)("td",{children:e[23]}),Object(x.jsx)("td",{children:e[24]}),Object(x.jsx)("td",{children:e[25]}),Object(x.jsx)("td",{children:e[26]}),Object(x.jsx)("td",{children:e[27]}),Object(x.jsx)("td",{children:e[28]}),Object(x.jsx)("td",{children:e[29]}),Object(x.jsx)("td",{children:e[30]}),Object(x.jsx)("td",{children:e[31]})]}),Object(x.jsxs)("tr",{children:[Object(x.jsx)("td",{children:"Water"}),Object(x.jsx)("td",{children:e[17]}),Object(x.jsx)("td",{children:e[18]}),Object(x.jsx)("td",{children:e[19]}),Object(x.jsx)("td",{children:e[20]}),Object(x.jsx)("td",{children:e[21]}),Object(x.jsx)("td",{children:e[22]}),Object(x.jsx)("td",{children:e[23]}),Object(x.jsx)("td",{children:e[24]}),Object(x.jsx)("td",{children:e[25]}),Object(x.jsx)("td",{children:e[26]}),Object(x.jsx)("td",{children:e[27]}),Object(x.jsx)("td",{children:e[28]}),Object(x.jsx)("td",{children:e[29]}),Object(x.jsx)("td",{children:e[30]}),Object(x.jsx)("td",{children:e[31]})]})]})})})]})})})}))})})}}]),n}(a.Component),tt=function(e){Object(l.a)(n,e);var t=Object(d.a)(n);function n(e){var a;return Object(o.a)(this,n),(a=t.call(this,e)).state={bills:null},a}return Object(s.a)(n,[{key:"componentDidMount",value:function(){this.getBills(this.props.match.params.month)}},{key:"getBills",value:function(e){var t=this,n={month:e,active:!0,type:"expense"},a=[];oe.getAll(n).then((function(n){var i=n.data;i&&i.map((function(n,i){if(n.quantity>0||n.dues>0||n.payment>0){var c={};c.id=n.id,c.partyId=n.partyId,c.month=e,c.qty=n.quantity,c.rate=n.rate,c.bill=n.bill,c.dues=n.dues,c.totalBill=c.bill+(c.dues?c.dues:0),c.paid=+n.payment,n.customer&&(c.name=n.customer.name),a[i]={},a[i]=c;var r={month:e,type:"expense",partyId:n.partyId};w.getAll(r).then((function(e){var n=e.data;a[i].allBills=n,t.setState({bills:a})})).catch((function(e){console.log(e)})),se.getAll(r).then((function(e){var n=e.data;a[i].allPayments=n,t.setState({bills:a})})).catch((function(e){console.log(e)}))}})),console.log(a),t.setState({bills:a})})).catch((function(e){console.log(e)}))}},{key:"render",value:function(){var e=this.state.bills;return Object(x.jsx)("div",{className:"container",children:Object(x.jsx)("table",{className:"table",children:e&&e.map((function(e){return Object(x.jsx)("tr",{children:Object(x.jsx)("td",{children:Object(x.jsxs)("table",{className:"table noBorder",border:"1",children:[Object(x.jsxs)("tr",{children:[Object(x.jsx)("th",{children:"Name"}),Object(x.jsx)("td",{colspan:"3",children:Object(x.jsx)("b",{children:e.name?e.name:e.id})}),Object(x.jsx)("th",{children:"Month"}),Object(x.jsx)("td",{children:e.month}),Object(x.jsx)("th",{children:"Quantity"}),Object(x.jsx)("td",{children:e.qty})]}),Object(x.jsxs)("tr",{children:[Object(x.jsx)("th",{children:"Bill"}),Object(x.jsx)("td",{children:e.bill}),Object(x.jsx)("th",{children:"Prev Dues"}),Object(x.jsx)("td",{children:e.dues}),Object(x.jsx)("th",{children:"Total Bill"}),Object(x.jsxs)("td",{children:[e.totalBill," "]}),Object(x.jsx)("th",{children:"Payment"}),Object(x.jsxs)("td",{children:[e.paid," "]})]}),Object(x.jsxs)("tr",{children:[Object(x.jsx)("td",{colspan:4,children:Object(x.jsx)("table",{width:"100%",children:e.allBills&&e.allBills.map((function(e){return Object(x.jsxs)("tr",{children:[Object(x.jsxs)("td",{children:[e.date,"-",e.month]}),Object(x.jsx)("td",{children:e.amount})]})}))})}),Object(x.jsx)("td",{colspan:4,children:Object(x.jsx)("table",{width:"100%",children:e.allPayments&&e.allPayments.map((function(e){return Object(x.jsxs)("tr",{children:[Object(x.jsxs)("td",{children:[e.date,"-",e.month]}),Object(x.jsx)("td",{children:e.payment})]})}))})})]})]})})})}))})})}}]),n}(a.Component);function nt(e){switch(e){case"name":case"date":case"month":case"category":return function(t,n){return t[e].localeCompare(n[e])};default:return function(t,n){return t[e]-n[e]}}}var at=[{key:"id",name:"ID",width:40,resizable:!0},{key:"name",name:"Name",width:50,resizable:!0},{key:"date",name:"Date",editor:S.b,width:20,resizable:!0},{key:"month",name:"Month",editor:S.b,width:40,resizable:!0},{key:"payment",name:"Payment Amount",width:140,editor:A,resizable:!0},{key:"amount",name:"Bill Amount",width:120,editor:A,resizable:!0},{key:"quantity",name:"Quantity",width:80,editor:A,resizable:!0},{key:"category",name:"Category",editor:S.b,resizable:!0}],it=function(e){var t={currentDate:b()()},n=Object(a.useState)([]),i=Object(N.a)(n,2),c=i[0],r=i[1],o=Object(a.useState)([]),s=Object(N.a)(o,2),l=s[0],d=s[1],j=Object(a.useState)(t),h=Object(N.a)(j,2),m=h[0],O=h[1],f=Object(a.useState)(!1),p=Object(N.a)(f,2),y=p[0],v=p[1],g=Object(a.useState)(!1),C=Object(N.a)(g,2),M=C[0],Y=C[1],R=Object(a.useState)(),I=Object(N.a)(R,2),q=I[0],A=I[1];Object(a.useEffect)((function(){var t={currentDate:b()(e.match.params.month,"MMM-YYYY")};O(t);var n=null,a={type:"expense",month:e.match.params.month};w.getAll(a).then((function(t){var a=t.data;n=[],a&&a.map((function(e,t){n[t]={},n[t].id=e.id,n[t].partyId=e.partyId,n[t].date=e.date,n[t].month=e.month,n[t].quantity=e.quantity,n[t].amount=e.amount,n[t].type=e.type,n[t].category=e.category,e.party&&(n[t].name=e.party.name)})),console.log(n),function(e,t){var n={month:e,active:!0,type:"expense"};se.getAll(n).then((function(e){var n=e.data;n&&n.map((function(e){var n=t.length;t[t.length]={},t[n].id=e.id,t[n].partyId=e.partyId,t[n].date=e.date,t[n].month=e.month,t[n].payment=e.payment,t[n].type=e.type,t[n].category=e.category,e.party&&(t[n].name=e.party.name)})),r(t),console.log(t)})).catch((function(e){console.log(e)}))}(e.match.params.month,n)})).catch((function(e){console.log(e)}))}),[e.match.params.month]);var P=Object(a.useMemo)((function(){return 0===l.length?c:Object(D.a)(c).sort((function(e,t){var n,a=Object(k.a)(l);try{for(a.s();!(n=a.n()).done;){var i=n.value,c=nt(i.columnKey)(e,t);if(0!==c)return"ASC"===i.direction?c:-c}}catch(r){a.e(r)}finally{a.f()}return 0}))}),[c,l]);function z(e){var t={month:e,type:"expense"};oe.generateBills(t).then((function(t){var n=t.data;A("Bill generated for the month "+e+"."),T(),console.log(n)})).catch((function(e){console.log(e)}))}function T(){v(!0)}function Q(){Y(!1),v(!1)}return Object(x.jsxs)("div",{children:[Object(x.jsx)("div",{children:Object(x.jsxs)(B.a,{container:!0,spacing:{xs:1},children:[Object(x.jsx)(B.a,{item:!0,xs:6,sm:3,children:Object(x.jsx)(u.b,{to:"/gui/addExpense",className:"badge",children:"Add Expense"})}),Object(x.jsx)(B.a,{item:!0,xs:6,sm:3,children:Object(x.jsxs)(u.b,{onClick:function(){return e=m.currentDate.format("MMM-YYYY"),void oe.validateBillGeneration(e,"expense").then((function(t){console.log(t.data),t.data.rate?(Y(!0),A("Bill already generated for the month "+e+". Do you want to continue? Please confirm to proceed."),T()):z(e)})).catch((function(t){console.log(t),404==t.response.status&&z(e)}));var e},className:"badge",children:["Generate Expense Bill Month - ",m.currentDate.format("MMM-YYYY")]})}),Object(x.jsxs)(B.a,{item:!0,xs:6,sm:3,children:[Object(x.jsx)(u.b,{to:"/gui/expense/"+m.currentDate.clone().subtract(1,"months").format("MMM-YYYY"),className:"badge badge-warning",children:"Prev"}),m.currentDate.format("DD-MMM-YYYY"),Object(x.jsx)(u.b,{to:"/gui/expense/"+m.currentDate.clone().add(1,"months").format("MMM-YYYY"),className:"badge badge-warning",children:"Next"})]}),Object(x.jsx)(B.a,{item:!0,xs:3,sm:2,children:Object(x.jsxs)(u.b,{to:"/gui/expenseBills/"+m.currentDate.format("MMM-YYYY"),className:"badge",children:["Print - ",m.currentDate.format("MMM-YYYY")]})}),Object(x.jsxs)(B.a,{item:!0,xs:3,sm:1,children:["\xa0",Object(x.jsx)(te.a,{variant:"warning",className:"badge",children:Object(x.jsx)(me.CSVLink,{data:P,filename:"expense.txt",children:"Export"})})]})]})}),Object(x.jsx)("div",{children:Object(x.jsx)(S.c,{columns:at,onRowsChange:function(e,t){!function(e,t){console.log(e[t.indexes].id+" - "+e[t.indexes][t.column.key]),function(e){var t={id:e.id,partyId:e.partyId,month:e.month,date:e.date,quantity:e.quantity,amount:e.amount,payment:e.payment,type:e.type,cotegory:e.category,active:!0};e.amount>0&&w.update(e.id,t).then((function(e){console.log(e.data)})).catch((function(e){console.log(e)}));e.payment>0&&se.update(e.id,t).then((function(e){console.log(e.data)})).catch((function(e){console.log(e)}))}(e[t.indexes])}(e,t),r(e)},defaultColumnOptions:{sortable:!0,resizable:!0},rows:P,sortColumns:l,onSortColumnsChange:d})}),Object(x.jsxs)(ne.a,{open:y,onClose:Q,"aria-labelledby":"alert-dialog-title","aria-describedby":"alert-dialog-description",children:[Object(x.jsx)(re.a,{id:"alert-dialog-title",children:"Bills"}),Object(x.jsx)(ie.a,{children:Object(x.jsx)(ce.a,{id:"alert-dialog-description",children:q})}),Object(x.jsxs)(ae.a,{children:[M?Object(x.jsx)(te.a,{onClick:function(){Y(!1),z(m.currentDate.format("MMM-YYYY")),v(!1)},children:"Confirm"}):"",Object(x.jsx)(te.a,{onClick:Q,children:"Close"})]})]})]})},ct=function(e){Object(l.a)(n,e);var t=Object(d.a)(n);function n(e){var a;return Object(o.a)(this,n),(a=t.call(this,e)).saveExpense=a.saveExpense.bind(Object(m.a)(a)),a.onChangeQuantity=a.onChangeQuantity.bind(Object(m.a)(a)),a.onChangeAmount=a.onChangeAmount.bind(Object(m.a)(a)),a.onChangePayment=a.onChangePayment.bind(Object(m.a)(a)),a.newExpense=a.newExpense.bind(Object(m.a)(a)),a.onChangeCategory=a.onChangeCategory.bind(Object(m.a)(a)),a.onDate=a.onDate.bind(Object(m.a)(a)),a.myRef=i.a.createRef(),a.state={id:null,partyId:null,quantity:null,date:null,month:null,type:"expense",category:null,amount:null,payment:null,submitted:!1,routes:[],inputDate:b()().format("DD-MMM-YYYY")},a}return Object(s.a)(n,[{key:"onChangeQuantity",value:function(e){this.setState({quantity:e.target.value})}},{key:"onChangePayment",value:function(e){this.setState({payment:e.target.value})}},{key:"onChangeAmount",value:function(e){this.setState({amount:e.target.value})}},{key:"onDate",value:function(e){this.setState({inputDate:e.target.value})}},{key:"onChangeCategory",value:function(e){this.setState({category:e.target.value})}},{key:"saveExpense",value:function(e){var t=this;e.target.disabled=!0;var n={partyId:this.myRef.current.value,quantity:this.state.quantity,date:b()(this.state.inputDate,"DD-MMM-YYYY").format("DD"),month:b()(this.state.inputDate,"DD-MMM-YYYY").format("MMM-YYYY"),type:"expense",category:this.state.category,amount:this.state.amount,payment:this.state.payment,active:!0};this.state.amount>0&&w.create(n).then((function(e){t.setState({id:e.data.id,amount:e.data.amount,submitted:!0}),console.log(e.data)})).catch((function(e){console.log(e)})),this.state.payment>0&&se.create(n).then((function(n){t.setState({id:n.data.id,payment:n.data.payment,submitted:!0}),console.log(n.data),e.target.disabled=!1})).catch((function(e){console.log(e)}))}},{key:"newExpense",value:function(){this.setState({id:null,partyId:null,quantity:null,date:null,month:null,type:"expense",category:null,amount:null,payment:null,submitted:!1,inputDate:b()().format("DD-MMM-YYYY")})}},{key:"componentDidMount",value:function(){this.getRoute()}},{key:"getRoute",value:function(){var e=this;p.getAll({searchFlag:"non-customer"}).then((function(t){e.setState({routes:t.data})})).catch((function(e){console.log(e)}))}},{key:"render",value:function(){var e=this.state.routes;return Object(x.jsx)("div",{className:"submit-form",children:this.state.submitted?Object(x.jsxs)("div",{children:[Object(x.jsx)("h4",{children:"You submitted successfully!"}),Object(x.jsx)("button",{className:"btn btn-success",onClick:this.newExpense,children:"Add"})]}):Object(x.jsxs)("div",{children:[Object(x.jsxs)("div",{className:"form-group",children:[Object(x.jsx)("label",{htmlFor:"name",children:"Vendor/Staff Name"}),Object(x.jsx)("div",{className:"select-container",children:Object(x.jsx)("select",{className:"form-control",value:this.state.partyId,onChange:this.onChangeRoute,ref:this.myRef,name:"partyId",children:e&&e.map((function(e){return Object(x.jsx)("option",{value:e.id,children:e.name})}))})})]}),Object(x.jsxs)("div",{className:"form-group",children:[Object(x.jsx)("label",{htmlFor:"quantity",children:"Quantity"}),Object(x.jsx)("input",{type:"number",className:"form-control",id:"quantity",required:!0,value:this.state.quantity,onChange:this.onChangeQuantity,name:"quantity"})]}),Object(x.jsxs)("div",{className:"form-group",children:[Object(x.jsx)("label",{htmlFor:"amount",children:"Bill Amount"}),Object(x.jsx)("input",{type:"number",className:"form-control",id:"amount",required:!0,value:this.state.amount,onChange:this.onChangeAmount,name:"amount"})]}),Object(x.jsxs)("div",{className:"form-group",children:[Object(x.jsx)("label",{htmlFor:"payment",children:"Payment Amount"}),Object(x.jsx)("input",{type:"number",className:"form-control",id:"payment",required:!0,value:this.state.payment,onChange:this.onChangePayment,name:"payment"})]}),Object(x.jsxs)("div",{className:"form-group",children:[Object(x.jsx)("label",{htmlFor:"category",children:"Category "}),Object(x.jsx)("input",{type:"text",className:"form-control",id:"category",required:!0,value:this.state.category,onChange:this.onChangeCategory,name:"category"})]}),Object(x.jsxs)("div",{className:"form-group",children:[Object(x.jsx)("label",{htmlFor:"inputDate",children:"Date"}),Object(x.jsx)("input",{type:"text",className:"form-control",id:"inputDate",required:!0,readOnly:"readOnly",value:this.state.inputDate,onChange:this.onDate,name:"inputDate"})]}),Object(x.jsx)("button",{onClick:this.saveExpense,className:"btn btn-success",children:"Submit"})]})})}}]),n}(a.Component),rt=new(function(){function e(){Object(o.a)(this,e)}return Object(s.a)(e,[{key:"getCurrentUser",value:function(){return JSON.parse(localStorage.getItem("user"))}},{key:"setCurrentUser",value:function(e){if("Alok"==e){localStorage.setItem("user",JSON.stringify({id:"alok",roles:["ROLE_ADMIN","ROLE_MODERATOR"]}))}}}]),e}()),ot=function(e){Object(l.a)(n,e);var t=Object(d.a)(n);function n(e){return Object(o.a)(this,n),t.call(this,e)}return Object(s.a)(n,[{key:"componentDidMount",value:function(){rt.setCurrentUser("Alok"),console.log(rt.getCurrentUser()),this.props.history.push("/gui/routes"),window.location.reload()}},{key:"render",value:function(){return""}}]),n}(a.Component),st=function(e){Object(l.a)(n,e);var t=Object(d.a)(n);function n(e){var a;return Object(o.a)(this,n),(a=t.call(this,e)).state={showModeratorBoard:!0,showAdminBoard:!1,currentUser:void 0},console.log(e),a}return Object(s.a)(n,[{key:"componentDidMount",value:function(){var e=rt.getCurrentUser();e&&this.setState({currentUser:e,showModeratorBoard:e.roles.includes("ROLE_MODERATOR"),showAdminBoard:e.roles.includes("ROLE_ADMIN")})}},{key:"render",value:function(){var e=this.state,t=(e.currentUser,e.showModeratorBoard),n=e.showAdminBoard;return Object(x.jsx)(u.a,{children:Object(x.jsxs)("div",{children:[Object(x.jsx)("nav",{className:"navbar navbar-expand navbar-dark bg-dark",children:Object(x.jsxs)("div",{className:"navbar-nav mr-auto",children:[t&&Object(x.jsx)("li",{className:"nav-item",children:Object(x.jsx)(u.b,{to:"/gui/routes",className:"nav-link",children:"Routes"})}),t&&Object(x.jsx)("li",{className:"nav-item",children:Object(x.jsx)(u.b,{to:"/gui/customerDaily/"+b()().format("DD-MMM-YYYY"),className:"nav-link",children:"Today"})}),n&&Object(x.jsx)("li",{className:"nav-item",children:Object(x.jsx)(u.b,{to:"/gui/customerCalendar/"+b()().format("MMM-YYYY"),className:"nav-link",children:"Calendar"})}),t&&Object(x.jsx)("li",{className:"nav-item",children:Object(x.jsx)(u.b,{to:"/gui/expense/"+b()().format("MMM-YYYY"),className:"nav-link",children:"Expense"})}),n&&Object(x.jsx)("li",{className:"nav-item",children:Object(x.jsx)(u.b,{to:"/gui/customers",className:"nav-link",children:"Party"})}),t&&Object(x.jsx)("li",{className:"nav-item",children:Object(x.jsx)(u.b,{to:"/gui/collectionDaily/"+b()().format("DD-MMM-YYYY"),className:"nav-link",children:"Collection"})}),t&&Object(x.jsx)("li",{className:"nav-item",children:Object(x.jsx)(u.b,{to:"/gui/CollectionBillsList/"+b()().format("DD-MMM-YYYY"),className:"nav-link",children:"CollectionBillsList"})}),n&&Object(x.jsx)("li",{className:"nav-item",children:Object(x.jsx)(u.b,{to:"/gui/productlist",className:"nav-link",children:"ProductList"})}),n&&Object(x.jsx)("li",{className:"nav-item",children:Object(x.jsx)(u.b,{to:"/gui/sellerProduct",className:"nav-link",children:"SellerProduct"})})]})}),Object(x.jsx)("div",{className:"container mt-3",children:Object(x.jsxs)(j.c,{children:[Object(x.jsx)(j.a,{exact:!0,path:["/","/gui/routes"],component:z}),Object(x.jsx)(j.a,{exact:!0,path:"/gui/customers",component:$e}),Object(x.jsx)(j.a,{exact:!0,path:"/gui/addCustomer",component:v}),Object(x.jsx)(j.a,{exact:!0,path:"/gui/productlist",component:L}),Object(x.jsx)(j.a,{exact:!0,path:"/gui/addProduct",component:C}),Object(x.jsx)(j.a,{exact:!0,path:"/gui/sellerProduct",component:G}),Object(x.jsx)(j.a,{exact:!0,path:"/gui/dailyDelivery/:id",component:de}),Object(x.jsx)(j.a,{exact:!0,path:"/gui/dailyDelivery/:id/:pending",component:de}),Object(x.jsx)(j.a,{exact:!0,path:"/gui/route",component:he}),Object(x.jsx)(j.a,{exact:!0,path:"/gui/routes",component:z}),Object(x.jsx)(j.a,{exact:!0,path:"/gui/customerCalendar/:date",component:Ce}),Object(x.jsx)(j.a,{exact:!0,path:"/gui/customerDaily/:date",component:Ie}),Object(x.jsx)(j.a,{exact:!0,path:"/gui/bills/:month",component:Ze}),Object(x.jsx)(j.a,{exact:!0,path:"/gui/collectionbills/:from/:to",component:et}),Object(x.jsx)(j.a,{exact:!0,path:"/gui/collectionbills/:from/:to/:partyId",component:et}),Object(x.jsx)(j.a,{exact:!0,path:"/gui/expenseBills/:month",component:tt}),Object(x.jsx)(j.a,{exact:!0,path:"/gui/bills/:month/:partyId",component:Ze}),Object(x.jsx)(j.a,{exact:!0,path:"/gui/expense/:month",component:it}),Object(x.jsx)(j.a,{exact:!0,path:"/gui/addExpense",component:ct}),Object(x.jsx)(j.a,{exact:!0,path:"/gui/login",component:ot}),Object(x.jsx)(j.a,{exact:!0,path:"/gui/collectionDaily/:date",component:Ue}),Object(x.jsx)(j.a,{exact:!0,path:"/gui/CollectionBillsList/:date",component:Te}),Object(x.jsx)(j.a,{exact:!0,path:"/gui/employeeDaily/:date",component:Ie})]})})]})})}}]),n}(a.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var lt=n(172);r.a.render(Object(x.jsx)(lt.a,{injectFirst:!0,children:Object(x.jsx)(st,{})}),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[143,1,2]]]);
//# sourceMappingURL=main.0d9c1150.chunk.js.map