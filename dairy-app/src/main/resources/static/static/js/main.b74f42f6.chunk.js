(this["webpackJsonpreact-pagination"]=this["webpackJsonpreact-pagination"]||[]).push([[0],{104:function(e,t,a){e.exports=a(144)},109:function(e,t,a){},111:function(e,t,a){},144:function(e,t,a){"use strict";a.r(t);var n=a(0),l=a.n(n),r=a(41),o=a.n(r),i=(a(109),a(11)),c=a(12),u=a(23),s=a(22),m=a(16),d=a(25),h=(a(110),a(111),a(10)),f=a.n(h),p=a(4),y=a(92),b=a.n(y).a.create({baseURL:"http://dairyweb-env.eba-rp2mcr7k.ap-south-1.elasticbeanstalk.com/api",headers:{"Content-type":"application/json","Access-Control-Allow-Origin":"*"}}),g=new(function(){function e(){Object(i.a)(this,e)}return Object(c.a)(e,[{key:"getAll",value:function(e){return b.get("/partys",{params:e})}},{key:"get",value:function(e){return b.get("/partys/".concat(e))}},{key:"create",value:function(e){return b.post("/partys",e)}},{key:"update",value:function(e,t){return b.put("/partys/".concat(e),t)}},{key:"updateMobNo",value:function(e,t,a){return b.put("/partys/".concat(e,"/").concat(t),a)}},{key:"delete",value:function(e){return b.delete("/partys/".concat(e))}},{key:"deleteAll",value:function(){return b.delete("/partys")}}]),e}()),v=new(function(){function e(){Object(i.a)(this,e)}return Object(c.a)(e,[{key:"getAll",value:function(e){return b.get("/routes",{params:e})}},{key:"get",value:function(e){return b.get("/routes/".concat(e))}},{key:"create",value:function(e){return b.post("/routes",e)}},{key:"update",value:function(e,t){return b.put("/routes/".concat(e),t)}},{key:"delete",value:function(e){return b.delete("/routes/".concat(e))}},{key:"deleteAll",value:function(){return b.delete("/routes")}}]),e}()),E=function(e){Object(u.a)(a,e);var t=Object(s.a)(a);function a(e){var n;Object(i.a)(this,a),(n=t.call(this,e)).onChangeName=n.onChangeName.bind(Object(p.a)(n)),n.onChangeAddress=n.onChangeAddress.bind(Object(p.a)(n)),n.onChangeMobNo=n.onChangeMobNo.bind(Object(p.a)(n)),n.onChangeStartDate=n.onChangeStartDate.bind(Object(p.a)(n)),n.onChangeActive=n.onChangeActive.bind(Object(p.a)(n)),n.onChangeRoute=n.onChangeRoute.bind(Object(p.a)(n)),n.onChangeType=n.onChangeType.bind(Object(p.a)(n)),n.onChangeDefaultQuantity=n.onChangeDefaultQuantity.bind(Object(p.a)(n)),n.onChangeRouteSeq=n.onChangeRouteSeq.bind(Object(p.a)(n)),n.saveTutorial=n.saveTutorial.bind(Object(p.a)(n)),n.newTutorial=n.newTutorial.bind(Object(p.a)(n)),n.getRoute=n.getRoute.bind(Object(p.a)(n)),n.myRef=l.a.createRef(),n.myRefType=l.a.createRef();var r=f()();return n.state={id:null,name:"",address:"",mobNo:"",type:"",active:!0,startDate:r.format("DD-MMM-YYYY"),routeId:"",defaultQuantity:1,routes:[],routeSeq:null,submitted:!1},n}return Object(c.a)(a,[{key:"onChangeType",value:function(e){this.setState({type:e.target.value})}},{key:"onChangeName",value:function(e){this.setState({name:e.target.value})}},{key:"onChangeAddress",value:function(e){this.setState({address:e.target.value})}},{key:"onChangeMobNo",value:function(e){e.target.value.length<11&&this.setState({mobNo:e.target.value})}},{key:"onChangeRouteSeq",value:function(e){this.setState({routeSeq:e.target.value})}},{key:"onChangeStartDate",value:function(e){this.setState({startDate:e.target.value})}},{key:"onChangeActive",value:function(e){this.setState({active:e.target.checked})}},{key:"onChangeRoute",value:function(e){this.setState({routeId:e.target.value})}},{key:"onChangeDefaultQuantity",value:function(e){this.setState({defaultQuantity:e.target.value})}},{key:"saveTutorial",value:function(e){var t=this;e.target.disabled=!0;var a={name:this.state.name,address:this.state.address,mobNo:this.state.mobNo,startDate:this.state.startDate,active:this.state.active,routeId:this.myRef.current.value,type:this.myRefType.current.value,defaultQuantity:this.state.defaultQuantity,routeSeq:this.state.routeSeq};console.log(a),this.setState({submitted:!0}),g.create(a).then((function(a){t.setState({id:a.data.id,name:a.data.name,address:a.data.address,mobNo:Response.data.mobNo,active:a.data.active,startDate:a.data.startDate,routeId:a.data.routeId,type:a.data.type,defaultQuantity:a.data.defaultQuantity,routeSeq:a.data.routeSeq,submitted:!0}),e.target.disabled=!1,console.log(a.data)})).catch((function(e){console.log(e)}))}},{key:"newTutorial",value:function(){this.setState({id:null,name:"",address:"",mobNo:"",startDate:f()().format("DD-MMM-YYYY"),active:!0,routeId:"",type:"",defaultQuantity:1,routeSeq:null,submitted:!1})}},{key:"componentDidMount",value:function(){this.getRoute()}},{key:"getRoute",value:function(){var e=this;v.getAll().then((function(t){e.setState({routes:t.data}),console.log(t.data)})).catch((function(e){console.log(e)}))}},{key:"render",value:function(){var e=this.state.routes;return l.a.createElement("div",{className:"submit-form"},this.state.submitted?l.a.createElement("div",null,l.a.createElement("h4",null,"You submitted successfully!"),l.a.createElement("button",{className:"btn btn-success",onClick:this.newTutorial},"Add")):l.a.createElement("div",null,l.a.createElement("div",{className:"form-group"},l.a.createElement("label",{htmlFor:"name"},"Customer Name"),l.a.createElement("input",{type:"text",className:"form-control",id:"name",required:!0,value:this.state.name,onChange:this.onChangeName,name:"name"})),l.a.createElement("div",{className:"form-group"},l.a.createElement("label",{htmlFor:"address"},"Address"),l.a.createElement("input",{type:"text",className:"form-control",id:"address",required:!0,value:this.state.address,onChange:this.onChangeAddress,name:"address"})),l.a.createElement("div",{className:"form-group"},l.a.createElement("label",{htmlFor:"mobNo"},"MobNo"),l.a.createElement("input",{type:"number",className:"form-control phone validate",id:"mobNo",required:!0,value:this.state.mobNo,onChange:this.onChangeMobNo,name:"mobNo"})),l.a.createElement("div",{className:"form-group"},l.a.createElement("label",{htmlFor:"startDate"},"Start Date"),l.a.createElement("input",{type:"text",className:"form-control",id:"startDate",required:!0,value:this.state.startDate,onChange:this.onChangeStartDate,name:"startDate"})),l.a.createElement("div",{className:"form-group"},l.a.createElement("label",{htmlFor:"defaultQuantity"},"Default Quantity"),l.a.createElement("input",{type:"number",className:"form-control",id:"defaultQuantity",required:!0,value:this.state.defaultQuantity,onChange:this.onChangeDefaultQuantity,name:"defaultQuantity"})),l.a.createElement("div",{className:"form-group"},l.a.createElement("label",{htmlFor:"routeId"},"Route"),l.a.createElement("div",{className:"select-container"},l.a.createElement("select",{className:"form-control",value:this.state.routeId,onChange:this.onChangeRoute,ref:this.myRef,name:"routeId"},e.map((function(e){return l.a.createElement("option",{value:e.id},e.name)}))))),l.a.createElement("div",{className:"form-group"},l.a.createElement("label",{htmlFor:"routeSeq"},"Route Sequene"),l.a.createElement("input",{type:"number",className:"form-control",id:"routeSeq",required:!0,value:this.state.routeSeq,onChange:this.onChangeRouteSeq,name:"routeSeq"})),l.a.createElement("div",{className:"form-group"},l.a.createElement("label",{htmlFor:"type"},"Type"),l.a.createElement("div",{className:"select-container"},l.a.createElement("select",{className:"form-control",value:this.state.type,onChange:this.onChangeType,ref:this.myRefType,name:"type"},l.a.createElement("option",{value:"customer"},"Customer"),l.a.createElement("option",{value:"staff"},"Staff"),l.a.createElement("option",{value:"vendor"},"Vendor"),l.a.createElement("option",{value:"farmer"},"Farmer"),l.a.createElement("option",{value:"chicken"},"Chicken"),l.a.createElement("option",{value:"car"},"Car"),l.a.createElement("option",{value:"ace"},"Ace"),l.a.createElement("option",{value:"vegetable"},"Vegetable"),l.a.createElement("option",{value:"grains"},"Grains"),l.a.createElement("option",{value:"fuel"},"Fuel")))),l.a.createElement("div",{className:"form-group"},l.a.createElement("label",{htmlFor:"active"},"Active"),l.a.createElement("input",{type:"checkbox",className:"form-control",id:"active",name:"active",onChange:this.onChangeActive,defaultChecked:this.state.active})),l.a.createElement("button",{onClick:this.saveTutorial,className:"btn btn-success"},"Submit")))}}]),a}(n.Component),C=new(function(){function e(){Object(i.a)(this,e)}return Object(c.a)(e,[{key:"getAll",value:function(e){return b.get("/products",{params:e})}},{key:"get",value:function(e){return b.get("/products/".concat(e))}},{key:"create",value:function(e){return b.post("/products",e)}},{key:"update",value:function(e,t){return b.put("/products/".concat(e),t)}},{key:"delete",value:function(e){return b.delete("/products/".concat(e))}},{key:"deleteAll",value:function(){return b.delete("/products")}}]),e}()),O=function(e){Object(u.a)(a,e);var t=Object(s.a)(a);function a(e){var n;Object(i.a)(this,a),(n=t.call(this,e)).onChangeName=n.onChangeName.bind(Object(p.a)(n)),n.onChangeminRate=n.onChangeminRate.bind(Object(p.a)(n)),n.onChangemaxRate=n.onChangemaxRate.bind(Object(p.a)(n)),n.onChangephoto=n.onChangephoto.bind(Object(p.a)(n)),n.onChangedescription=n.onChangedescription.bind(Object(p.a)(n)),n.onChangeunitOfQuantity=n.onChangeunitOfQuantity.bind(Object(p.a)(n)),n.onChangeType=n.onChangeType.bind(Object(p.a)(n)),n.saveTutorial=n.saveTutorial.bind(Object(p.a)(n)),n.newTutorial=n.newTutorial.bind(Object(p.a)(n));f()();return n.state={id:null,name:"",minRate:"",maxRate:"",photo:"",description:"",unitOfQuantity:"",submitted:!1},n}return Object(c.a)(a,[{key:"onChangeType",value:function(e){this.setState({type:e.target.value})}},{key:"onChangeName",value:function(e){this.setState({name:e.target.value})}},{key:"onChangeminRate",value:function(e){this.setState({minRate:e.target.value})}},{key:"onChangemaxRate",value:function(e){this.setState({maxRate:e.target.value})}},{key:"onChangephoto",value:function(e){this.setState({photo:e.target.value})}},{key:"onChangedescription",value:function(e){this.setState({description:e.target.value})}},{key:"onChangeunitOfQuantity",value:function(e){this.setState({unitOfQuantity:e.target.checked})}},{key:"saveTutorial",value:function(e){var t=this;e.target.disabled=!0;var a={name:this.state.name,minRate:this.state.minRate,maxRate:this.state.maxRate,photo:this.state.photo,description:this.state.description,unitOfQuantity:this.state.unitOfQuantity};console.log(a),this.setState({submitted:!0}),C.create(a).then((function(a){t.setState({id:a.data.id,name:a.data.name,minRate:a.data.minRate,maxRate:Response.data.maxRate,photo:a.data.photo,description:a.data.description,submitted:!0}),e.target.disabled=!1,console.log(a.data)})).catch((function(e){console.log(e)}))}},{key:"newTutorial",value:function(){this.setState({id:null,name:"",minRate:"",maxRate:"",photo:"",description:"",unitOfQuantity:"",submitted:!1})}},{key:"componentDidMount",value:function(){}},{key:"render",value:function(){this.state.products;return l.a.createElement("div",{className:"submit-form"},this.state.submitted?l.a.createElement("div",null,l.a.createElement("h4",null,"You submitted successfully!"),l.a.createElement("button",{className:"btn btn-success",onClick:this.newTutorial},"Add")):l.a.createElement("div",null,l.a.createElement("div",{className:"form-group"},l.a.createElement("label",{htmlFor:"name"},"Product Name"),l.a.createElement("input",{type:"text",className:"form-control",id:"name",required:!0,value:this.state.name,onChange:this.onChangeName,name:"name"})),l.a.createElement("div",{className:"form-group"},l.a.createElement("label",{htmlFor:"minRate"},"MinRate"),l.a.createElement("input",{type:"number",className:"form-control",id:"minRate",required:!0,value:this.state.minRate,onChange:this.onChangeminRate,name:"minRate"})),l.a.createElement("div",{className:"form-group"},l.a.createElement("label",{htmlFor:"maxRate"},"MaxRate"),l.a.createElement("input",{type:"number",className:"form-control",id:"maxRate",required:!0,value:this.state.maxRate,onChange:this.onChangemaxRate,name:"maxRate"})),l.a.createElement("div",{className:"form-group"},l.a.createElement("label",{htmlFor:"photo"},"Photo"),l.a.createElement("input",{type:"text",className:"form-control",id:"photo",required:!0,value:this.state.photo,onChange:this.onChangephoto,name:"photo"})),l.a.createElement("div",{className:"form-group"},l.a.createElement("label",{htmlFor:"description"},"Description"),l.a.createElement("input",{type:"text",className:"form-control",id:"description",required:!0,value:this.state.description,onChange:this.onChangedescription,name:"description"})),l.a.createElement("div",{className:"form-group"},l.a.createElement("label",{htmlFor:"unitOfQuantity"},"Unit Of Quantity Quantity"),l.a.createElement("input",{type:"text",className:"form-control",id:"unitOfQuantity",required:!0,value:this.state.unitOfQuantity,onChange:this.onChangeunitOfQuantity,name:"unitOfQuantity"})),l.a.createElement("button",{onClick:this.saveTutorial,className:"btn btn-success"},"Submit")))}}]),a}(n.Component),k=a(15),j=a(13),D=a(8),M=a(26),Y=a(3),N=a(20),x=new(function(){function e(){Object(i.a)(this,e)}return Object(c.a)(e,[{key:"getAll",value:function(e){return b.get("/dailyBills",{params:e})}},{key:"get",value:function(e){return b.get("/dailyBills/".concat(e))}},{key:"create",value:function(e){return b.post("/dailyBills",e)}},{key:"update",value:function(e,t){return b.put("/dailyBills/".concat(e),t)}},{key:"delete",value:function(e){return b.delete("/dailyBills/".concat(e))}},{key:"deleteAll",value:function(){return b.delete("/dailyBills")}}]),e}()),S=new(function(){function e(){Object(i.a)(this,e)}return Object(c.a)(e,[{key:"getAll",value:function(e){return b.get("/routeStocks",{params:e})}},{key:"get",value:function(e){return b.get("/routeStocks/".concat(e))}},{key:"create",value:function(e){return b.post("/routeStocks",e)}},{key:"update",value:function(e,t){return b.put("/routeStocks/".concat(e),t)}},{key:"delete",value:function(e){return b.delete("/routeStocks/".concat(e))}},{key:"deleteAll",value:function(){return b.delete("/routeStocks")}}]),e}()),w=a(7);function R(e){e&&e.select(),e&&e.focus()}function q(e){var t=e.row,a=e.column,n=e.onRowChange,r=e.onClose;return l.a.createElement("input",{type:"number",inputmode:"numeric",className:"rdg-text-editor textEditor",ref:R,value:t[a.key],onChange:function(e){return n(Object(D.a)(Object(D.a)({},t),{},Object(w.a)({},a.key,e.target.value)))},onBlur:function(){return r(!0)}})}var A=a(177),I=[{key:"quantity",name:"Stock Q",width:40,editor:q,editorOptions:{editOnClick:!0},resizable:!0},{key:"routeId",name:"Action",width:40,resizable:!0,formatter:function(e){return l.a.createElement(l.a.Fragment,null,l.a.createElement(m.b,{disable:"true",to:e.row.quantity?"/gui/dailyDelivery/"+e.row.id:"",className:"badge badge-warning"},"Start"))}},{key:"delivered",name:"Delivered Q",width:100,resizable:!0},{key:"pending",name:"Pending",width:80,resizable:!0,formatter:function(e){return l.a.createElement(l.a.Fragment,null,l.a.createElement(m.b,{disable:"true",to:e.row.quantity?"/gui/dailyDelivery/"+e.row.id+"/"+e.row.pending:"",className:"badge badge-warning"},"Pending - ",e.row.pending))}},{key:"served",name:"Customer Served",width:140,resizable:!0},{key:"totalCustomer",name:"Total Customer",width:130,resizable:!0},{key:"customerQuantity",name:"Required Q",width:100,resizable:!0},{key:"id",name:"Route ID",width:80,resizable:!0},{key:"name",name:"Name",editor:N.b,editorOptions:{editOnClick:!0},resizable:!0},{key:"address",name:"Address",editor:N.b,editorOptions:{editOnClick:!0},resizable:!0}],B=function(e){Object(u.a)(a,e);var t=Object(s.a)(a);function a(e){var n;return Object(i.a)(this,a),(n=t.call(this,e)).rowChange=n.rowChange.bind(Object(p.a)(n)),n.saveRoute=n.saveRoute.bind(Object(p.a)(n)),n.routeStockService=n.routeStockService.bind(Object(p.a)(n)),n.state={rows:[]},n}return Object(c.a)(a,[{key:"componentDidMount",value:function(){this.retrieveRoutes()}},{key:"retrieveRoutes",value:function(){var e=this,t=f()(),a=null,n={date:t.format("DD"),month:t.format("MMM-YYYY"),type:"income"};v.getAll(n).then((function(t){var l=t.data;console.log(l),a=new Array(l.length),l.map((function(e,t){a[t]={},a[t].id=e.id,a[t].name=e.name,a[t].address=e.address,e.extraInfo&&(a[t].totalCustomer=e.extraInfo.customerCount,a[t].customerQuantity=e.extraInfo.customerTotalQuantity,a[t].served=e.extraInfo.customerDeliveredCount,a[t].delivered=e.extraInfo.customerDeliveredQuantity,a[t].pending=e.extraInfo.customerPendingCount)})),e.routeStockService(n,a)})).catch((function(e){console.log(e)}))}},{key:"routeStockService",value:function(e,t){var a=this;S.getAll(e).then((function(e){var n=e.data;n&&n.map((function(e,a){var n,l=Object(k.a)(t);try{for(l.s();!(n=l.n()).done;){var r=n.value;if(r.id==e.routeId){r.quantity=e.quantity,r.routeStockId=e.id;break}}}catch(o){l.e(o)}finally{l.f()}})),a.setState({rows:t})})).catch((function(e){console.log(e)}))}},{key:"rowChange",value:function(e,t){this.saveRoute(e[t.indexes],t),this.setState({rows:e})}},{key:"saveRoute",value:function(e,t){if("quantity"!=t.column.key){var a={id:e.id,name:e.name,address:e.address};v.update(e.id,a).then((function(e){console.log(e.data)})).catch((function(e){console.log(e)}))}else{(a={id:e.routeStockId,routeId:e.id,quantity:+e.quantity,date:f()().format("DD"),month:f()().format("MMM-YYYY")}).id?S.update(a.id,a).then((function(t){console.log(t.data),e.routeStockId=t.data.id})).catch((function(e){console.log(e)})):S.create(a).then((function(t){console.log(t.data),e.routeStockId=t.data.id})).catch((function(e){console.log(e)}))}}},{key:"render",value:function(){var e=this.state.rows;return l.a.createElement("div",null,l.a.createElement(A.a,{container:!0,spacing:{xs:4}},l.a.createElement(A.a,{item:!0,xs:6,sm:6},l.a.createElement(m.b,{to:"/gui/route",className:"nav-link"},"Add Route")),l.a.createElement(A.a,{item:!0,xs:6,sm:6},l.a.createElement(m.b,{className:"nav-link"},f()().format("DD-MMM-YYYY")))),l.a.createElement(N.c,{columns:I,rows:e,onRowsChange:this.rowChange}))}}]),a}(n.Component);function P(e){var t=e.row,a=e.onRowChange,r=function(){var e=Object(n.useState)(),t=Object(Y.a)(e,2),a=t[0],l=t[1];return Object(n.useEffect)((function(){a&&0!==a.length||v.getAll().then((function(e){l(e.data),console.log(a)})).catch((function(e){console.log(e)}))}),[a]),{selectData:a}}().selectData;return l.a.createElement("select",{className:N.b.textEditorClassname,value:t.routeId,onChange:function(e){return a(Object(D.a)(Object(D.a)({},t),{},{routeId:e.target.value}),!0)},autoFocus:!0},r&&r.map((function(e){return l.a.createElement("option",{key:e.id,value:e.id},e.name)})))}var z=["filters"],T=Object(n.createContext)(void 0);function Q(e){["ArrowLeft","ArrowRight"].includes(e.key)&&e.stopPropagation()}function W(e){switch(e){case"name":case"description":return function(t,a){return t[e].localeCompare(a[e])};default:return function(t,a){return t[e]-a[e]}}}var F=function(e){var t=Object(n.useState)([]),a=Object(Y.a)(t,2),r=a[0],o=a[1],i=Object(n.useState)([]),c=Object(Y.a)(i,2),u=c[0],s=c[1],d=Object(n.useState)({name:"",enabled:!0}),h=Object(Y.a)(d,2),f=h[0],p=h[1],y=[{key:"id",name:"ID",width:40,resizable:!0,headerCellClass:"filter-cell",headerRenderer:function(e){return l.a.createElement(L,e,(function(e){var t=e.filters,a=Object(M.a)(e,z);return l.a.createElement("input",Object.assign({},a,{className:"filterClassname",value:t.name,onChange:function(e){return p(Object(D.a)(Object(D.a)({},t),{},{name:e.target.value}))},onKeyDown:Q}))}))}},{key:"name",name:"Name",editor:N.b,editorOptions:{editOnClick:!0},resizable:!0},{key:"minRate",name:"minRate",editor:q,editorOptions:{editOnClick:!0},resizable:!0},{key:"maxRate",name:"maxRate",editor:q,editorOptions:{editOnClick:!0},resizable:!0},{key:"photo",name:"Photo",editor:N.b,editorOptions:{editOnClick:!0},resizable:!0},{key:"description",name:"Description",editor:N.b,editorOptions:{editOnClick:!0},resizable:!0}];Object(n.useEffect)((function(){var e=null;C.getAll({_sort:"routeId",_order:"asc"}).then((function(t){var a=t.data;e=new Array(a.length),a.map((function(t,a){e[a]={},e[a].id=t.id,e[a].name=t.name,e[a].minRate=t.minRate,e[a].maxRate=t.maxRate,e[a].photo=t.photo,e[a].description=t.description})),o(e)})).catch((function(e){console.log(e)}))}),[]);var b=Object(n.useMemo)((function(){return function(){var e=null;return e=r.filter((function(e){return!f.name||e.name.includes(f.name)})),0===u.length?e:e=Object(j.a)(e).sort((function(e,t){var a,n=Object(k.a)(u);try{for(n.s();!(a=n.n()).done;){var l=a.value,r=W(l.columnKey)(e,t);if(0!==r)return"ASC"===l.direction?r:-r}}catch(o){n.e(o)}finally{n.f()}return 0}))}()}),[r,f,u]);return l.a.createElement("div",null,l.a.createElement(m.b,{to:"/gui/addProduct",className:"nav-link"},"Add Product"),l.a.createElement("div",{className:"rootClassname"},l.a.createElement(T.Provider,{value:f},l.a.createElement(N.c,{columns:y,onRowsChange:function(e,t){!function(e,t){console.log(e[t.indexes].id+" - "+e[t.indexes][t.column.key]),function(e){var t={id:e.id,name:e.name,minRate:e.minRate,maxRate:e.maxRate,photo:e.photo,description:e.description};console.log(t),C.update(e.id,t).then((function(e){console.log(e.data)})).catch((function(e){console.log(e)}))}(e[t.indexes])}(e,t),o(e)},defaultColumnOptions:{sortable:!0,resizable:!0},className:f.enabled?"filterContainerClassname":void 0,rows:b,sortColumns:u,onSortColumnsChange:s,headerRowHeight:f.enabled?50:void 0}))))};function L(e){var t=e.isCellSelected,a=e.column,r=e.children,o=Object(n.useContext)(T),i=function(e){var t=Object(n.useRef)(null);return Object(n.useLayoutEffect)((function(){e&&t.current&&t.current.focus({preventScroll:!0})}),[e]),{ref:t,tabIndex:e?0:-1}}(t),c=i.ref,u=i.tabIndex;return l.a.createElement(l.a.Fragment,null,l.a.createElement("div",null,a.name),o.enabled&&l.a.createElement("div",null,r({ref:c,tabIndex:u,filters:o})))}var U=new(function(){function e(){Object(i.a)(this,e)}return Object(c.a)(e,[{key:"getAll",value:function(e){return b.get("/sellerProducts",{params:e})}},{key:"get",value:function(e){return b.get("/sellerProducts/".concat(e))}},{key:"create",value:function(e){return b.post("/sellerProducts",e)}},{key:"update",value:function(e,t){return b.put("/sellerProducts/".concat(e),t)}},{key:"delete",value:function(e){return b.delete("/sellerProducts/".concat(e))}},{key:"deleteAll",value:function(){return b.delete("/sellerProducts")}}]),e}()),K=function(e){Object(u.a)(a,e);var t=Object(s.a)(a);function a(e){var n;Object(i.a)(this,a),(n=t.call(this,e)).onChangeName=n.onChangeName.bind(Object(p.a)(n)),n.onChangeDescription=n.onChangeDescription.bind(Object(p.a)(n)),n.onChangeBrand=n.onChangeBrand.bind(Object(p.a)(n)),n.onChangeCompany=n.onChangeCompany.bind(Object(p.a)(n)),n.onChangeMRP=n.onChangeMRP.bind(Object(p.a)(n)),n.onChangeUnit=n.onChangeUnit.bind(Object(p.a)(n)),n.onChangeWeight=n.onChangeWeight.bind(Object(p.a)(n)),n.onChangeMeasurment=n.onChangeMeasurment.bind(Object(p.a)(n)),n.onChangeQuantity=n.onChangeQuantity.bind(Object(p.a)(n)),n.onChangeRate=n.onChangeRate.bind(Object(p.a)(n)),n.onChangeDiscount=n.onChangeDiscount.bind(Object(p.a)(n)),n.onChangeDiscountType=n.onChangeDiscountType.bind(Object(p.a)(n)),n.onChangeDeliveryCharge=n.onChangeDeliveryCharge.bind(Object(p.a)(n)),n.saveTutorial=n.saveTutorial.bind(Object(p.a)(n)),n.newTutorial=n.newTutorial.bind(Object(p.a)(n)),n.onChangeproduct=n.onChangeproduct.bind(Object(p.a)(n)),n.getproduct=n.getproduct.bind(Object(p.a)(n)),n.myRef=l.a.createRef();f()();return n.state={id:null,name:"",description:"",brand:"",company:"",MRP:"",unit:"",weight:"",measurment:"",quantity:"",rate:"",discount:"",discountType:"",deliveryCharge:"",products:[],productId:"",submitted:!1},n}return Object(c.a)(a,[{key:"onChangeType",value:function(e){this.setState({type:e.target.value})}},{key:"onChangeName",value:function(e){this.setState({name:e.target.value})}},{key:"onChangeDescription",value:function(e){this.setState({description:e.target.value})}},{key:"onChangeBrand",value:function(e){e.target.value.length<11&&this.setState({brand:e.target.value})}},{key:"onChangeCompany",value:function(e){this.setState({company:e.target.value})}},{key:"onChangeMRP",value:function(e){this.setState({MRP:e.target.value})}},{key:"onChangeUnit",value:function(e){this.setState({unit:e.target.value})}},{key:"onChangeWeight",value:function(e){this.setState({weight:e.target.value})}},{key:"onChangeMeasurment",value:function(e){this.setState({measurment:e.target.value})}},{key:"onChangeQuantity",value:function(e){this.setState({quantity:e.target.value})}},{key:"onChangeRate",value:function(e){this.setState({rate:e.target.value})}},{key:"onChangeDiscount",value:function(e){this.setState({discount:e.target.value})}},{key:"onChangeDiscountType",value:function(e){this.setState({discountType:e.target.value})}},{key:"onChangeDeliveryCharge",value:function(e){this.setState({deliveryCharge:e.target.value})}},{key:"onChangeproduct",value:function(e){this.setState({productId:e.target.value})}},{key:"onChangeActive",value:function(e){this.setState({active:e.target.checked})}},{key:"saveTutorial",value:function(e){var t=this;e.target.disabled=!0;var a={name:this.myRef.current.value,description:this.state.description,brand:this.state.brand,company:this.state.company,MRP:this.state.MRP,unit:this.state.unit,weight:this.state.weight,measurment:this.state.measurment,quantity:this.state.quantity,rate:this.state.rate,discount:this.state.discount,discountType:this.state.discountType,deliveryCharge:this.state.deliveryCharge,active:this.state.active,productId:this.myRef.current.value};console.log(a),this.setState({submitted:!0}),U.create(a).then((function(a){var n;t.setState((n={id:a.data.id,name:a.data.name},Object(w.a)(n,"name",a.data.name),Object(w.a)(n,"description",a.data.description),Object(w.a)(n,"brand",a.data.brand),Object(w.a)(n,"company",a.data.company),Object(w.a)(n,"MRP",a.data.MRP),Object(w.a)(n,"unit",a.data.unit),Object(w.a)(n,"weight",a.data.weight),Object(w.a)(n,"measurment",a.data.measurment),Object(w.a)(n,"quantity",a.data.quantity),Object(w.a)(n,"rate",a.data.rate),Object(w.a)(n,"discount",a.data.discount),Object(w.a)(n,"discountType",a.data.discountType),Object(w.a)(n,"deliveryCharge",a.data.deliveryCharge),Object(w.a)(n,"active",a.data.active),Object(w.a)(n,"productId",a.data.productId),Object(w.a)(n,"submitted",!0),n)),e.target.disabled=!1,console.log(a.data)})).catch((function(e){console.log(e)}))}},{key:"newTutorial",value:function(){this.setState({id:null,name:"",description:"",brand:"",company:"",MRP:"",unit:"",weight:"",measurment:"",quantity:"",rate:"",discount:"",discountType:"",deliveryCharge:"",productId:"",submitted:!1})}},{key:"componentDidMount",value:function(){this.getproduct()}},{key:"getproduct",value:function(){var e=this;C.getAll().then((function(t){e.setState({products:t.data}),console.log(t.data)})).catch((function(e){console.log(e)}))}},{key:"render",value:function(){var e=this.state.products;return l.a.createElement("div",{className:"submit-form"},this.state.submitted?l.a.createElement("div",null,l.a.createElement("h4",null,"You submitted successfully!"),l.a.createElement("button",{className:"btn btn-success",onClick:this.newTutorial},"Add")):l.a.createElement("div",null,l.a.createElement("div",{className:"form-group"},l.a.createElement("label",{htmlFor:"productId"},"Product Name"),l.a.createElement("div",{className:"select-container"},l.a.createElement("select",{className:"form-control",value:this.state.productId,onChange:this.onChangeproduct,ref:this.myRef,name:"productId"},e&&e.map((function(e){return l.a.createElement("option",{value:e.name},e.name)}))))),l.a.createElement("div",{className:"form-group"},l.a.createElement("label",{htmlFor:"description"},"Description"),l.a.createElement("input",{type:"text",className:"form-control",id:"description",required:!0,value:this.state.description,onChange:this.onChangeDescription,name:"description"})),l.a.createElement("div",{className:"form-group"},l.a.createElement("label",{htmlFor:"brand"},"Brand"),l.a.createElement("input",{type:"text",className:"form-control",id:"brand",required:!0,value:this.state.brand,onChange:this.onChangeBrand,name:"brand"})),l.a.createElement("div",{className:"form-group"},l.a.createElement("label",{htmlFor:"company"},"Company Name"),l.a.createElement("input",{type:"text",className:"form-control",id:"company",required:!0,value:this.state.company,onChange:this.onChangeCompany,name:"company"})),l.a.createElement("div",{className:"form-group"},l.a.createElement("label",{htmlFor:"MRP"},"MRP"),l.a.createElement("input",{type:"text",className:"form-control",id:"MRP",required:!0,value:this.state.MRP,onChange:this.onChangeMRP,name:"MRP"})),l.a.createElement("div",{className:"form-group"},l.a.createElement("label",{htmlFor:"unit"},"unit"),l.a.createElement("input",{type:"text",className:"form-control",id:"unit",required:!0,value:this.state.unit,onChange:this.onChangeUnit,name:"unit"})),l.a.createElement("div",{className:"form-group"},l.a.createElement("label",{htmlFor:"weight"},"Weight"),l.a.createElement("input",{type:"text",className:"form-control",id:"weight",required:!0,value:this.state.weight,onChange:this.onChangeWeight,name:"unit"})),l.a.createElement("div",{className:"form-group"},l.a.createElement("label",{htmlFor:"measurment"},"Measurment"),l.a.createElement("input",{type:"text",className:"form-control",id:"measurment",required:!0,value:this.state.measurment,onChange:this.onChangeMeasurment,name:"measurment"})),l.a.createElement("div",{className:"form-group"},l.a.createElement("label",{htmlFor:"quantity"},"Quantity"),l.a.createElement("input",{type:"text",className:"form-control",id:"quantity",required:!0,value:this.state.quantity,onChange:this.onChangeQuantity,name:"quantity"})),l.a.createElement("div",{className:"form-group"},l.a.createElement("label",{htmlFor:"rate"},"Product Rate"),l.a.createElement("input",{type:"text",className:"form-control",id:"rate",required:!0,value:this.state.rate,onChange:this.onChangeRate,name:"rate"})),l.a.createElement("div",{className:"form-group"},l.a.createElement("label",{htmlFor:"discount"},"Discount "),l.a.createElement("input",{type:"text",className:"form-control",id:"discount",required:!0,value:this.state.discount,onChange:this.onChangeDiscount,name:"discount"})),l.a.createElement("div",{className:"form-group"},l.a.createElement("label",{htmlFor:"discountType"},"DiscountType "),l.a.createElement("input",{type:"text",className:"form-control",id:"discountType",required:!0,value:this.state.discountType,onChange:this.onChangeDiscountType,name:"discountType"})),l.a.createElement("div",{className:"form-group"},l.a.createElement("label",{htmlFor:"deliveryCharge"},"DeliveryCharge "),l.a.createElement("input",{type:"text",className:"form-control",id:"deliveryCharge",required:!0,value:this.state.deliveryCharge,onChange:this.onChangeDeliveryCharge,name:"deliveryCharge"})),l.a.createElement("button",{onClick:this.saveTutorial,className:"btn btn-success"},"Submit")))}}]),a}(n.Component),G=a(14),V=a(178),_=a(183),H=a(187),J=a(186),$=a(182),X=a(184),Z=a(185),ee=a(175),te=a(174),ae=a(181),ne=a(179),le=a(180),re=a(172),oe=new(function(){function e(){Object(i.a)(this,e)}return Object(c.a)(e,[{key:"getAll",value:function(e){return b.get("/bills",{params:e})}},{key:"generateBillsCollection",value:function(e){return b.get("/generateBillsCollection",{params:e})}},{key:"validateCollectionBillsGeneration",value:function(e,t){return b.get("/generateBillsCollection/".concat(e),{params:t})}},{key:"generateBills",value:function(e){return b.get("/generateBills",{params:e})}},{key:"validateBillGeneration",value:function(e,t){return b.get("/generateBills/".concat(e,"/").concat(t))}},{key:"get",value:function(e){return b.get("/bills/".concat(e))}},{key:"create",value:function(e){return b.post("/bills",e)}},{key:"update",value:function(e,t){return b.put("/bills/".concat(e),t)}},{key:"delete",value:function(e){return b.delete("/bills/".concat(e))}},{key:"deleteAll",value:function(){return b.delete("/bills")}}]),e}()),ie=new(function(){function e(){Object(i.a)(this,e)}return Object(c.a)(e,[{key:"getAll",value:function(e){return b.get("/payments",{params:e})}},{key:"get",value:function(e){return b.get("/payments/".concat(e))}},{key:"create",value:function(e){return b.post("/payments",e)}},{key:"update",value:function(e,t){return b.put("/payments/".concat(e),t)}},{key:"delete",value:function(e){return b.delete("/payments/".concat(e))}},{key:"deleteAll",value:function(){return b.delete("/payments")}}]),e}()),ce=function(e){Object(u.a)(a,e);var t=Object(s.a)(a);function a(e){var n;return Object(i.a)(this,a),(n=t.call(this,e)).handleClickOpen=function(){n.setState({open:!0})},n.handleClose=function(){n.setState({open:!1})},n.getCustomerBill=n.getCustomerBill.bind(Object(p.a)(n)),n.savePayment=n.savePayment.bind(Object(p.a)(n)),n.saveMobNo=n.saveMobNo.bind(Object(p.a)(n)),n.onChangePayment=n.onChangePayment.bind(Object(p.a)(n)),n.onChangeMobNo=n.onChangeMobNo.bind(Object(p.a)(n)),n.handleClickOpen=n.handleClickOpen.bind(Object(p.a)(n)),n.handleClose=n.handleClose.bind(Object(p.a)(n)),n.getPayment=n.getPayment.bind(Object(p.a)(n)),n.getBill=n.getBill.bind(Object(p.a)(n)),n.state={partyId:e.partyId,payment:null,prevBill:{},currentBill:{},open:!1,mobNo:null},n}return Object(c.a)(a,[{key:"componentDidMount",value:function(){this.getCustomerBill(this.props)}},{key:"onChangePayment",value:function(e){this.setState({payment:+e.target.value})}},{key:"onChangeMobNo",value:function(e){e.target.value.length<11&&this.setState({mobNo:+e.target.value})}},{key:"saveMobNo",value:function(e){if(e.target.disabled=!0,this.state.mobNo){var t={id:this.props.partyId};g.updateMobNo(this.props.partyId,this.state.mobNo,t).then((function(t){console.log(t.data),e.target.disabled=!1})).catch((function(e){console.log(e)}))}}},{key:"savePayment",value:function(e){var t=this;if(e.target.disabled=!0,this.state.payment){var a={partyId:this.props.partyId,month:f()(this.props.date,"DD-MMM-YYYY").format("MMM-YYYY"),date:f()(this.props.date,"DD-MMM-YYYY").format("DD"),active:!0,payment:this.state.payment,type:"income"};ie.create(a).then((function(a){t.setState({currentBill:{quantity:t.state.currentBill.quantity,rate:t.state.currentBill.rate,bill:t.state.currentBill.bill,dues:t.state.currentBill.dues,month:f()(t.props.date,"DD-MMM-YYYY").format("MMM-YYYY"),payment:(t.state.currentBill.payment?t.state.currentBill.payment:0)+a.data.payment}}),console.log(a.data),e.target.disabled=!1,t.handleClickOpen(),t.state.payment=""})).catch((function(e){console.log(e)}))}}},{key:"getCustomerBill",value:function(e){var t=f()(e.date,"DD-MMM-YYYY"),a=t.format("MMM-YYYY"),n={month:a};this.getPayment(a,e.partyId,n),this.getBill(a,e.partyId,"currentBill",n);var l=t.clone().subtract(1,"months").format("MMM-YYYY"),r={month:l};this.getPayment(l,e.partyId,r),this.getBill(l,e.partyId,"prevBill",r)}},{key:"getBill",value:function(e,t,a,n){var l=this,r={partyId:t,month:e,active:!0,type:"income"};oe.getAll(r).then((function(e){var t=e.data;t&&t.map((function(e){n.quantity=e.quantity,n.rate=e.rate,n.bill=e.bill,n.dues=e.dues})),l.setState(Object(w.a)({},a,n)),console.log(l.state)})).catch((function(e){console.log(e)}))}},{key:"getPayment",value:function(e,t,a){var n={partyId:t,month:e,active:!0,type:"income"};ie.getAll(n).then((function(e){var t=e.data;t&&t.map((function(e){"discount"==e.category?a.discount=e.payment:a.payment?a.payment=a.payment+e.payment:a.payment=+e.payment}))})).catch((function(e){console.log(e)}))}},{key:"render",value:function(){var e=this.state,t=e.prevBill,a=e.currentBill;return this.props.partyId!=this.state.partyId&&(this.getCustomerBill(this.props),this.setState({partyId:this.props.partyId})),l.a.createElement("div",null,l.a.createElement("h1",{align:"center"},this.props.name),l.a.createElement(A.a,{container:!0,spacing:{xs:4}},l.a.createElement(A.a,{item:!0,xs:12,sm:6},l.a.createElement("div",{className:"form-group"},l.a.createElement("label",{htmlFor:"date"}," Date"),l.a.createElement("input",{type:"text",className:"form-control",id:"date",required:!0,readOnly:"readOnly",value:this.props.date,onChange:this.props.onDate,name:"date"})),l.a.createElement("div",{className:"form-group"},l.a.createElement("label",{htmlFor:"amount"},"Amount"),l.a.createElement("input",{type:"number",className:"form-control",id:"amount",required:!0,value:this.props.amount,onChange:this.props.onAmount,name:"amount"})),l.a.createElement("div",{className:"form-group"},l.a.createElement("label",{htmlFor:"defaultQuantity"},"Quantity"),l.a.createElement("input",{type:"number",className:"form-control",id:"defaultQuantity",required:!0,value:this.props.defaultQuantity,onChange:this.props.onQuantity,name:"defaultQuantity"})),l.a.createElement("div",{className:"form-group",style:{textAlign:"center"}},l.a.createElement("button",{className:"btn btn-success",onClick:this.props.onUpdate},"Update & Next")),l.a.createElement("div",{className:"form-group",style:{textAlign:"center"}},l.a.createElement("button",{className:"btn btn-success",onClick:this.props.onModalClose},"Back")," ",l.a.createElement("button",{className:"btn btn-success",onClick:this.props.onPrev},"\u2b05",this.props.previousTitle," ")," ",l.a.createElement("button",{className:"btn btn-success",onClick:this.props.onNext},this.props.nextTitle," ","\u27a1"))),l.a.createElement(A.a,{item:!0,xs:12,sm:6},l.a.createElement("div",{className:"form-group"},l.a.createElement($.a,{component:V.a},l.a.createElement(_.a,{sx:{minWidth:200},"aria-label":"simple table"},l.a.createElement(X.a,null,l.a.createElement(Z.a,null,l.a.createElement(J.a,null,"Billing"),l.a.createElement(J.a,{align:"right"},"Prev Month (",t.month,")"),l.a.createElement(J.a,{align:"right"},"Current Month (",a.month,")"))),l.a.createElement(H.a,null,l.a.createElement(Z.a,null,l.a.createElement(J.a,{component:"th",scope:"row"},"Quantity"),l.a.createElement(J.a,{align:"right"},t.quantity),l.a.createElement(J.a,{align:"right"},a.quantity)),l.a.createElement(Z.a,null,l.a.createElement(J.a,{component:"th",scope:"row"},"Rate"),l.a.createElement(J.a,{align:"right"},t.rate),l.a.createElement(J.a,{align:"right"},a.rate)),l.a.createElement(Z.a,null,l.a.createElement(J.a,{component:"th",scope:"row"},"Bill"),l.a.createElement(J.a,{align:"right"},t.bill),l.a.createElement(J.a,{align:"right"},a.bill)),l.a.createElement(Z.a,null,l.a.createElement(J.a,{component:"th",scope:"row"},"Payment"),l.a.createElement(J.a,{align:"right"},t.payment),l.a.createElement(J.a,{align:"right"},a.payment)),l.a.createElement(Z.a,null,l.a.createElement(J.a,{component:"th",scope:"row"},"Dues"),l.a.createElement(J.a,{align:"right"},t.dues),l.a.createElement(J.a,{align:"right"},a.dues)))))),l.a.createElement("div",{className:"form-group"},l.a.createElement("label",{htmlFor:"payment"},"Payment"),l.a.createElement("input",{className:"form-control",id:"payment",required:!0,value:this.state.payment,onChange:this.onChangePayment,name:"payment",type:"number"})),l.a.createElement("button",{className:"btn btn-success",onClick:this.savePayment},"Payment Received"),l.a.createElement("div",{className:"form-group"},l.a.createElement("label",{htmlFor:"mobNo"},"MobileNo"),l.a.createElement("input",{className:"form-control",id:"mobNo",required:!0,value:this.state.mobNo,onChange:this.onChangeMobNo,name:"mobNo",type:"number"})),l.a.createElement("button",{className:"btn btn-success",onClick:this.saveMobNo},"Set Mob No"))),l.a.createElement(te.a,{open:this.state.open,onClose:this.handleClose,"aria-labelledby":"alert-dialog-title","aria-describedby":"alert-dialog-description"},l.a.createElement(re.a,{id:"alert-dialog-title"},"Payments"),l.a.createElement(ne.a,null,l.a.createElement(le.a,{id:"alert-dialog-description"},"Payment of amount ",this.state.payment," is confirmed.")),l.a.createElement(ae.a,null,l.a.createElement(ee.a,{onClick:this.handleClose},"Close"))))}}]),a}(l.a.Component),ue=function(e){Object(u.a)(a,e);var t=Object(s.a)(a);function a(e){var n;return Object(i.a)(this,a),(n=t.call(this,e)).handleModalOpen=function(e){n.setState({activeProject:e,modalTitle:n.state.projects[e].name,quantity:n.state.projects[e].defaultQuantity,amount:n.state.projects[e].amount,date:n.state.date,partyId:n.state.projects[e].id})},n.handleModalClose=function(){n.setState({activeProject:""})},n.handleNextProject=function(){var e=n.state.projects.length,t=(t=n.state.activeProject+1)%e;n.setState({activeProject:t,modalTitle:n.state.projects[t].name,quantity:n.state.projects[t].defaultQuantity,amount:n.state.projects[t].amount,date:n.state.date,partyId:n.state.projects[t].id})},n.handlePrevProject=function(){var e=n.state.projects.length;if(0===(t=n.state.activeProject))var t=e-1;else t=t-1;n.setState({activeProject:t,modalTitle:n.state.projects[t].name,quantity:n.state.projects[t].defaultQuantity,amount:n.state.projects[t].amount,date:n.state.date,partyId:n.state.projects[t].id})},n.handleModalUpdate=function(e){e.target.disabled=!0,n.saveDelivery(n.state.partyId,n.state.date,n.state.quantity,n.state.amount,e)},n.getProjects=n.getProjects.bind(Object(p.a)(n)),n.saveDelivery=n.saveDelivery.bind(Object(p.a)(n)),n.onChangeDate=n.onChangeDate.bind(Object(p.a)(n)),n.handleNextProject=n.handleNextProject.bind(Object(p.a)(n)),n.onChangeDefaultQuantity=n.onChangeDefaultQuantity.bind(Object(p.a)(n)),n.onChangeAmount=n.onChangeAmount.bind(Object(p.a)(n)),n.state={projects:[],activeProject:"",modalTitle:"",partyId:null,quantity:null,amount:null,date:f()().format("DD-MMM-YYYY")},n}return Object(c.a)(a,[{key:"componentDidMount",value:function(){this.getProjects(this.props.match.params.id,this.props.match.params.pending)}},{key:"getProjects",value:function(e,t){var a=this;if(t){var n={routeId:e,type:"customer",searchFlag:"pending"};g.getAll(n).then((function(e){console.log(e.data),a.setState({projects:e.data})})).catch((function(e){console.log(e)}))}else{var l={routeId:e,type:"customer"};g.getAll(l).then((function(e){console.log(e.data),a.setState({projects:e.data})})).catch((function(e){console.log(e)}))}}},{key:"onChangeDefaultQuantity",value:function(e){this.setState({quantity:e.target.value})}},{key:"onChangeAmount",value:function(e){this.setState({amount:e.target.value})}},{key:"onChangeDate",value:function(e){this.setState({date:e.target.value})}},{key:"saveDelivery",value:function(e,t,a,n,l){var r=this,o=f()(t,"DD-MMM-YYYY"),i={partyId:e,date:o.format("DD"),month:o.format("MMM-YYYY"),quantity:a,amount:n,type:"income"},c={partyId:e,date:i.date,month:i.month,type:"income"};x.getAll(c).then((function(e){e.data&&e.data.length>0?(i.id=e.data[0].id,x.update(i.id,i).then((function(e){console.log(e.data),l.target.disabled=!1,r.handleNextProject()})).catch((function(e){console.log(e)}))):x.create(i).then((function(e){console.log(e.data),l.target.disabled=!1,r.handleNextProject()})).catch((function(e){console.log(e)}))})).catch((function(e){console.log(e)})),this.state.date=f()().format("DD-MMM-YYYY")}},{key:"render",value:function(){var e=this,t=this.state.projects;var a,n,r=t&&t.map((function(t,a,n){return l.a.createElement(me,{key:"project-"+t.id,index:a,name:t.name,url:t.address,onModalOpen:e.handleModalOpen})}));return""===this.state.activeProject?l.a.createElement("div",null,l.a.createElement("div",{style:{textAlign:"center"}},l.a.createElement("h1",null,"Route - ",t&&t[0]&&t[0].route.name)),l.a.createElement(A.a,{container:!0,spacing:{xs:1,md:1},columns:{xs:4,sm:8,md:12}},r)):l.a.createElement("div",null,l.a.createElement(ce,{name:this.state.modalTitle,defaultQuantity:this.state.quantity,amount:this.state.amount,date:this.state.date,partyId:this.state.partyId,previousTitle:function(e,t){if(0===e)var a=t.length-1;else a=e-1;return t[a].name}(this.state.activeProject,t),nextTitle:(a=this.state.activeProject,n=t,n[(a+1)%n.length].name),onModalClose:this.handleModalClose,onNext:this.handleNextProject,onPrev:this.handlePrevProject,onDate:this.onChangeDate,onQuantity:this.onChangeDefaultQuantity,onAmount:this.onChangeAmount,onUpdate:this.handleModalUpdate}))}}]),a}(n.Component),se=Object(G.a)(V.a)((function(e){var t=e.theme;return Object(D.a)(Object(D.a)({},t.typography.body2),{},{padding:t.spacing(2),textAlign:"center",color:t.palette.text.secondary})})),me=function(e){Object(u.a)(a,e);var t=Object(s.a)(a);function a(){return Object(i.a)(this,a),t.apply(this,arguments)}return Object(c.a)(a,[{key:"render",value:function(){return l.a.createElement(A.a,{item:!0,xs:2,sm:4,md:4,key:this.props.index,onClick:this.props.onModalOpen.bind(this,this.props.index)},l.a.createElement(se,null,l.a.createElement("h1",null,this.props.name)))}}]),a}(l.a.Component),de=function(e){Object(u.a)(a,e);var t=Object(s.a)(a);function a(e){var n;Object(i.a)(this,a),(n=t.call(this,e)).onChangeName=n.onChangeName.bind(Object(p.a)(n)),n.onChangeAddress=n.onChangeAddress.bind(Object(p.a)(n)),n.onChangeStartDate=n.onChangeStartDate.bind(Object(p.a)(n)),n.onChangeActive=n.onChangeActive.bind(Object(p.a)(n)),n.saveTutorial=n.saveTutorial.bind(Object(p.a)(n)),n.newTutorial=n.newTutorial.bind(Object(p.a)(n));var l=new Date;return n.state={id:null,name:"",address:"",active:!0,startDate:l.getDate()+"-"+parseInt(l.getMonth()+1)+"-"+l.getFullYear(),submitted:!1},n}return Object(c.a)(a,[{key:"onChangeName",value:function(e){this.setState({name:e.target.value})}},{key:"onChangeAddress",value:function(e){this.setState({address:e.target.value})}},{key:"onChangeStartDate",value:function(e){this.setState({startDate:e.target.value})}},{key:"onChangeActive",value:function(e){console.log(e.target.checked),this.setState({active:e.target.checked})}},{key:"saveTutorial",value:function(){var e=this,t={name:this.state.name,address:this.state.address,startDate:this.state.startDate,active:this.state.active};console.log(this.state.active),v.create(t).then((function(t){e.setState({id:t.data.id,name:t.data.name,address:t.data.address,active:t.data.active,startDate:t.data.startDate,submitted:!0}),console.log(t.data)})).catch((function(e){console.log(e)}))}},{key:"newTutorial",value:function(){this.today=new Date,this.setState({id:null,name:"",address:"",startDate:this.today.getDate()+"-"+parseInt(this.today.getMonth()+1)+"-"+this.today.getFullYear(),active:!0,submitted:!1})}},{key:"render",value:function(){return l.a.createElement("div",{className:"submit-form"},this.state.submitted?l.a.createElement("div",null,l.a.createElement("h4",null,"You submitted successfully!"),l.a.createElement("button",{className:"btn btn-success",onClick:this.newTutorial},"Add")):l.a.createElement("div",null,l.a.createElement("div",{className:"form-group"},l.a.createElement("label",{htmlFor:"name"},"Route Name"),l.a.createElement("input",{type:"text",className:"form-control",id:"name",required:!0,value:this.state.name,onChange:this.onChangeName,name:"name"})),l.a.createElement("div",{className:"form-group"},l.a.createElement("label",{htmlFor:"address"},"Address"),l.a.createElement("input",{type:"text",className:"form-control",id:"address",required:!0,value:this.state.address,onChange:this.onChangeAddress,name:"address"})),l.a.createElement("button",{onClick:this.saveTutorial,className:"btn btn-success"},"Submit")))}}]),a}(n.Component),he=new(function(){function e(){Object(i.a)(this,e)}return Object(c.a)(e,[{key:"getAll",value:function(e){return b.get("/rates",{params:e})}},{key:"get",value:function(e){return b.get("/rates/".concat(e))}},{key:"create",value:function(e){return b.post("/rates",e)}},{key:"update",value:function(e,t){return b.put("/rates/".concat(e),t)}},{key:"delete",value:function(e){return b.delete("/rates/".concat(e))}},{key:"deleteAll",value:function(){return b.delete("/rates")}}]),e}());function fe(e){this.limit=e,this.count=0,this.waitBlock=function(){}}fe.prototype.countDown=function(){if(this.count=this.count+1,this.limit<=this.count)return this.waitBlock()},fe.prototype.await=function(e){this.waitBlock=e};var pe=fe,ye=a(36),be=["filters"],ge=["filters"],ve=Object(n.createContext)(void 0);function Ee(e){["ArrowLeft","ArrowRight"].includes(e.key)&&e.stopPropagation()}function Ce(e){switch(e){case"name":return function(t,a){return t[e].localeCompare(a[e])};default:return function(t,a){return t[e]-a[e]}}}var Oe=function(e){var t=Object(n.useState)({name:"",route:"",enabled:!0}),a=Object(Y.a)(t,2),r=a[0],o=a[1],i={currentDate:f()()},c=Object(n.useState)([]),u=Object(Y.a)(c,2),s=u[0],d=u[1],h=Object(n.useState)(),p=Object(Y.a)(h,2),y=p[0],b=p[1],v=Object(n.useState)({}),E=Object(Y.a)(v,2),C=E[0],O=E[1],S=Object(n.useState)(!1),w=Object(Y.a)(S,2),R=w[0],I=w[1],B=Object(n.useState)(!1),P=Object(Y.a)(B,2),z=P[0],T=P[1],Q=Object(n.useState)(i),W=Object(Y.a)(Q,2),F=W[0],L=W[1],U=Object(n.useState)([]),K=Object(Y.a)(U,2),G=K[0],V=K[1],_=[{key:"id",name:"ID",minWidth:60,resizable:!0,frozen:!0,headerCellClass:"filter-cell",headerRenderer:function(e){return l.a.createElement(ke,e,(function(e){var t=e.filters,a=Object(M.a)(e,be);return l.a.createElement("input",Object.assign({},a,{className:"filterClassname",value:t.name,onChange:function(e){return o(Object(D.a)(Object(D.a)({},t),{},{name:e.target.value}))},onKeyDown:Ee}))}))}},{key:"name",name:"Name",width:200,resizable:!0,frozen:!0},{key:"route",name:"Route",minWidth:100,resizable:!0,headerCellClass:"filter-cell",headerRenderer:function(e){return l.a.createElement(ke,e,(function(e){var t=e.filters,a=Object(M.a)(e,ge);return l.a.createElement("input",Object.assign({},a,{className:"filterClassname",value:t.route,onChange:function(e){return o(Object(D.a)(Object(D.a)({},t),{},{route:e.target.value}))},onKeyDown:Ee}))}))}},{key:"01",name:"1",editor:q,editorOptions:{editOnClick:!0},minWidth:40,resizable:!0},{key:"02",name:"2",editor:q,editorOptions:{editOnClick:!0},minWidth:40,resizable:!0},{key:"03",name:"3",editor:q,editorOptions:{editOnClick:!0},minWidth:40,resizable:!0},{key:"04",name:"4",editor:q,editorOptions:{editOnClick:!0},minWidth:40,resizable:!0},{key:"05",name:"5",editor:q,editorOptions:{editOnClick:!0},minWidth:40,resizable:!0},{key:"06",name:"6",editor:q,editorOptions:{editOnClick:!0},minWidth:40,resizable:!0},{key:"07",name:"7",editor:q,editorOptions:{editOnClick:!0},minWidth:40,resizable:!0},{key:"08",name:"8",editor:q,editorOptions:{editOnClick:!0},minWidth:40,resizable:!0},{key:"09",name:"9",editor:q,editorOptions:{editOnClick:!0},minWidth:40,resizable:!0},{key:"10",name:"10",editor:q,editorOptions:{editOnClick:!0},minWidth:40,resizable:!0},{key:"11",name:"11",editor:q,editorOptions:{editOnClick:!0},minWidth:40,resizable:!0},{key:"12",name:"12",editor:q,editorOptions:{editOnClick:!0},minWidth:40,resizable:!0},{key:"13",name:"13",editor:q,editorOptions:{editOnClick:!0},minWidth:40,resizable:!0},{key:"14",name:"14",editor:q,editorOptions:{editOnClick:!0},minWidth:40,resizable:!0},{key:"15",name:"15",editor:q,editorOptions:{editOnClick:!0},minWidth:40,resizable:!0},{key:"16",name:"16",editor:q,editorOptions:{editOnClick:!0},minWidth:40,resizable:!0},{key:"17",name:"17",editor:q,editorOptions:{editOnClick:!0},minWidth:40,resizable:!0},{key:"18",name:"18",editor:q,editorOptions:{editOnClick:!0},minWidth:40,resizable:!0},{key:"19",name:"19",editor:q,editorOptions:{editOnClick:!0},minWidth:40,resizable:!0},{key:"20",name:"20",editor:q,editorOptions:{editOnClick:!0},minWidth:40,resizable:!0},{key:"21",name:"21",editor:q,editorOptions:{editOnClick:!0},minWidth:40,resizable:!0},{key:"22",name:"22",editor:q,editorOptions:{editOnClick:!0},minWidth:40,resizable:!0},{key:"23",name:"23",editor:q,editorOptions:{editOnClick:!0},minWidth:40,resizable:!0},{key:"24",name:"24",editor:q,editorOptions:{editOnClick:!0},minWidth:40,resizable:!0},{key:"25",name:"25",editor:q,editorOptions:{editOnClick:!0},minWidth:40,resizable:!0},{key:"26",name:"26",editor:q,editorOptions:{editOnClick:!0},minWidth:40,resizable:!0},{key:"27",name:"27",editor:q,editorOptions:{editOnClick:!0},minWidth:40,resizable:!0},{key:"28",name:"28",editor:q,editorOptions:{editOnClick:!0},minWidth:40,resizable:!0},{key:"29",name:"29",editor:q,editorOptions:{editOnClick:!0},minWidth:40,resizable:!0},{key:"30",name:"30",editor:q,editorOptions:{editOnClick:!0},minWidth:40,resizable:!0},{key:"31",name:"31",editor:q,editorOptions:{editOnClick:!0},minWidth:40,resizable:!0},{key:"qty",name:"Qty",minWidth:40,resizable:!0},{key:"rate",name:"Rate",minWidth:40,resizable:!0},{key:"bill",name:"Bill",minWidth:60,resizable:!0},{key:"dues",name:"Dues",minWidth:40,resizable:!0},{key:"totalBill",name:"Total",minWidth:60,resizable:!0},{key:"prevBill",name:"P-Bill",minWidth:75,resizable:!0},{key:"paid",name:"Paid",minWidth:60,resizable:!0},{key:"currentDue",name:"C-Due",minWidth:60,resizable:!0},{key:"discount",name:"Discount",width:80,editor:q,editorOptions:{editOnClick:!0},minWidth:40,resizable:!0},{key:"pay",name:"Pay",minWidth:60,resizable:!0,editor:q,editorOptions:{editOnClick:!0}}];function H(){I(!0)}function J(){T(!1),I(!1)}function $(e){var t={month:e,type:"income"};oe.generateBills(t).then((function(t){var a=t.data;a&&a.map((function(e){var t,a=Object(k.a)(s);try{for(a.s();!(t=a.n()).done;){var n=t.value;if(n.id==e.partyId){n.qty=e.quantity,n.rate=e.rate,n.bill=e.bill,n.dues=e.dues,n.totalBill=n.bill+(n.dues?n.dues:0);break}}}catch(l){a.e(l)}finally{a.f()}})),b("Bill generated for the month "+e+"."),H(),d(s)})).catch((function(e){console.log(e.response.data)}))}Object(n.useEffect)((function(){var t={currentDate:f()(e.match.params.date,"MMM-YYYY")};L(t);var a=null,n={active:!0,type:"customer"};he.getAll(n).then((function(e){var t=e.data,a={};t&&t.map((function(e,t){a={id:e.id,rate:e.rate,startDate:e.startDate}})),O(a)})).catch((function(e){console.log(e)}));var l=new pe(3);g.getAll(n).then((function(e){var n=e.data;a=new Array(n.length),n.map((function(e,t){a[t]={},a[t].id=e.id,a[t].name=e.name,a[t].route=e.route.name})),function(e,t,a){var n={month:e.currentDate.format("MMM-YYYY"),active:!0,type:"income"};oe.getAll(n).then((function(n){var l=n.data;l&&l.map((function(e){var a,n=Object(k.a)(t);try{for(n.s();!(a=n.n()).done;){var l=a.value;if(l.id==e.partyId){e.rate&&(l.qty=e.quantity,l.rate=e.rate,l.bill=e.bill,l.dues=e.dues,l.totalBill=l.bill+(l.dues?l.dues:0),l.prevBill=e.lastBillTotal,l.currentDue=l.prevBill-(l.paid?l.paid:0));break}}}catch(r){n.e(r)}finally{n.f()}})),a.countDown();var r={month:e.currentDate.clone().subtract(1,"months").format("MMM-YYYY"),active:!0,type:"income"};oe.getAll(r).then((function(e){var a=e.data;a&&a.map((function(e){var a,n=Object(k.a)(t);try{for(n.s();!(a=n.n()).done;){var l=a.value;if(l.id==e.partyId){e.rate&&(l.prevBill=e.bill+e.dues,l.prevDues=e.dues,l.currentDue=l.prevBill-(l.paid?l.paid:0));break}}}catch(r){n.e(r)}finally{n.f()}}))})).catch((function(e){console.log(e)}))})).catch((function(e){console.log(e)}))}(t,a,l),function(e,t,a){var n={month:e.currentDate.format("MMM-YYYY"),active:!0,type:"income"};ie.getAll(n).then((function(e){var n=e.data;t&&t.map((function(e){n&&n.map((function(t){t.partyId==e.id&&("discount"==t.category?(e.discount=t.payment,e.iddiscount=t.id):e.paid?e.paid=e.paid+t.payment:e.paid=+t.payment)}))})),a.countDown()})).catch((function(e){console.log(e)}))}(t,a,l),function(e,t,a){var n={month:e.currentDate.format("MMM-YYYY"),type:"income"};x.getAll(n).then((function(e){var n=e.data;n&&n.map((function(e){var a,n=Object(k.a)(t);try{for(n.s();!(a=n.n()).done;){var l=a.value;if(l.id==e.partyId){l[e.date]=e.quantity,l["id"+e.date]=e.id;break}}}catch(r){n.e(r)}finally{n.f()}})),a.countDown()})).catch((function(e){console.log(e)}))}(t,a,l)})).catch((function(e){console.log(e)})),l.await((function(){d(a),console.log("done all")}))}),[e.match.params.date]);var X=Object(n.useMemo)((function(){return function(){var e=null;return e=s.filter((function(e){return(!r.name||e.name.includes(r.name))&&(!r.route||e.route.includes(r.route))})),0===G.length?e:e=Object(j.a)(e).sort((function(e,t){var a,n=Object(k.a)(G);try{for(n.s();!(a=n.n()).done;){var l=a.value,r=Ce(l.columnKey)(e,t);if(0!==r)return"ASC"===l.direction?r:-r}}catch(o){n.e(o)}finally{n.f()}return 0}))}()}),[s,r,G]);return l.a.createElement("div",null,F?l.a.createElement("div",null,l.a.createElement(A.a,{container:!0,spacing:{xs:1}},l.a.createElement(A.a,{item:!0,xs:6,sm:3},l.a.createElement(m.b,{to:"/gui/customerCalendar/"+F.currentDate.clone().subtract(1,"months").format("MMM-YYYY"),className:"badge badge-warning"},"Prev"),F.currentDate.format("DD-MMM-YYYY"),l.a.createElement(m.b,{to:"/gui/customerCalendar/"+F.currentDate.clone().add(1,"months").format("MMM-YYYY"),className:"badge badge-warning"},"Next")),l.a.createElement(A.a,{item:!0,xs:6,sm:3},l.a.createElement(m.b,{to:"#",onClick:function(){return e=F.currentDate.format("MMM-YYYY"),void oe.validateBillGeneration(e,"income").then((function(t){t.data.rate?(T(!0),b("Bill already generated for the month "+e+". Do you want to continue? Please confirm to proceed."),H()):$(e)})).catch((function(t){console.log(t),404==t.response.status&&$(e)}));var e},className:"badge"},"Generate Bill Month - ",F.currentDate.format("MMM-YYYY"))),l.a.createElement(A.a,{item:!0,xs:6,sm:3},l.a.createElement("input",{type:"number",id:"rate",required:!0,defaultValue:C.rate,onChange:function(e){C.rate=e.target.value,O(C)},name:"rate",style:{width:60,height:20}}),l.a.createElement(m.b,{to:"#",onClick:function(){var e={id:C.id,rate:C.rate,active:!1,startDate:C.startDate,endDate:F.currentDate.format("DD-MMM-YYYY")};C.id&&he.update(e.id,e).then((function(e){console.log(e.data)})).catch((function(e){console.log(e)}));var t={rate:C.rate,active:!0,startDate:F.currentDate.format("DD-MMM-YYYY")};he.create(t).then((function(e){O(e.data),b("New rate saved."),H()})).catch((function(e){console.log(e)}))},className:"badge"},"Set Rate")),l.a.createElement(A.a,{item:!0,xs:3,sm:2},l.a.createElement(m.b,{to:"/gui/bills/"+F.currentDate.format("MMM-YYYY"),className:"badge"},"Print - ",F.currentDate.format("MMM-YYYY"))),l.a.createElement(A.a,{item:!0,xs:3,sm:1},"\xa0",l.a.createElement(ee.a,{variant:"warning",className:"badge"},l.a.createElement(ye.CSVLink,{data:X,filename:"income.txt"},"Export"))))):l.a.createElement("div",null,l.a.createElement("br",null),l.a.createElement("p",null,"Please click on a Customer...")),l.a.createElement("div",{className:"rootClassname"},l.a.createElement(ve.Provider,{value:r},l.a.createElement(N.c,{columns:_,onRowsChange:function(e,t){!function(e,t){var a=e[t.indexes][t.column.key],n=e[t.indexes]["id"+t.column.key];console.log(e[t.indexes].id+" - "+a+" - "+n),function(e,t,a,n,l,r){var o={id:l,partyId:e,date:t,month:a.format("MMM-YYYY"),quantity:n,type:"income",category:null,active:!0,payment:null};"discount"!=t&&"pay"!=t?l?x.update(l,o).then((function(e){console.log(e.data)})).catch((function(e){console.log(e)})):x.create(o).then((function(e){r["id"+t]=e.data.id,console.log(r)})).catch((function(e){console.log(e)})):("discount"==t&&(o.category="discount"),o.payment=n,o.date=f()().format("DD"),l?ie.update(l,o).then((function(e){console.log(e.data)})).catch((function(e){console.log(e)})):ie.create(o).then((function(e){r["id"+t]=e.data.id,console.log(r)})).catch((function(e){console.log(e)})))}(e[t.indexes].id,t.column.key,F.currentDate,a,n,e[t.indexes]),s[t.indexes]=e[t.indexes],d(s.slice())}(e,t)},defaultColumnOptions:{sortable:!0,resizable:!0},className:r.enabled?"filterContainerClassname":void 0,rows:X,sortColumns:G,onSortColumnsChange:V,headerRowHeight:r.enabled?50:void 0}))),l.a.createElement(te.a,{open:R,onClose:J,"aria-labelledby":"alert-dialog-title","aria-describedby":"alert-dialog-description"},l.a.createElement(re.a,{id:"alert-dialog-title"},"Bills"),l.a.createElement(ne.a,null,l.a.createElement(le.a,{id:"alert-dialog-description"},y)),l.a.createElement(ae.a,null,z?l.a.createElement(ee.a,{onClick:function(){T(!1),$(F.currentDate.format("MMM-YYYY")),I(!1)}},"Confirm"):"",l.a.createElement(ee.a,{onClick:J},"Close"))))};function ke(e){var t=e.isCellSelected,a=e.column,r=e.children,o=Object(n.useContext)(ve),i=function(e){var t=Object(n.useRef)(null);return Object(n.useLayoutEffect)((function(){e&&t.current&&t.current.focus({preventScroll:!0})}),[e]),{ref:t,tabIndex:e?0:-1}}(t),c=i.ref,u=i.tabIndex;return l.a.createElement(l.a.Fragment,null,l.a.createElement("div",null,a.name),o.enabled&&l.a.createElement("div",null,r({ref:c,tabIndex:u,filters:o})))}var je=["filters"],De=["filters"],Me=Object(n.createContext)(void 0);function Ye(e){["ArrowLeft","ArrowRight"].includes(e.key)&&e.stopPropagation()}function Ne(e){switch(e){case"name":return function(t,a){return t[e].localeCompare(a[e])};default:return function(t,a){return t[e]-a[e]}}}var xe=function(e){var t=Object(n.useState)({name:"",route:"",enabled:!0}),a=Object(Y.a)(t,2),r=a[0],o=a[1],i={currentDate:f()()},c=Object(n.useState)([]),u=Object(Y.a)(c,2),s=u[0],m=u[1],d=Object(n.useState)(i),h=Object(Y.a)(d,2),p=h[0],y=h[1],b=Object(n.useState)([]),v=Object(Y.a)(b,2),E=v[0],C=v[1],O=[{key:"id",name:"ID",minWidth:40,resizable:!0,headerCellClass:"filter-cell",headerRenderer:function(e){return l.a.createElement(Se,e,(function(e){var t=e.filters,a=Object(M.a)(e,je);return l.a.createElement("input",Object.assign({},a,{className:"filterClassname",value:t.name,onChange:function(e){return o(Object(D.a)(Object(D.a)({},t),{},{name:e.target.value}))},onKeyDown:Ye}))}))}},{key:"name",name:"Name",width:200,resizable:!0},{key:"today",name:"Today Quantity",editor:q,editorOptions:{editOnClick:!0},minWidth:80,resizable:!0},{key:"dailyQuantity",name:"Daily Quantity",minWidth:80,resizable:!0},{key:"route",name:"Route",minWidth:100,resizable:!0,headerCellClass:"filter-cell",headerRenderer:function(e){return l.a.createElement(Se,e,(function(e){var t=e.filters,a=Object(M.a)(e,De);return l.a.createElement("input",Object.assign({},a,{className:"filterClassname",value:t.route,onChange:function(e){return o(Object(D.a)(Object(D.a)({},t),{},{route:e.target.value}))},onKeyDown:Ye}))}))}},{key:"qty",name:"Qty",minWidth:40,resizable:!0},{key:"rate",name:"Rate",minWidth:40,resizable:!0},{key:"bill",name:"Bill",minWidth:40,resizable:!0},{key:"dues",name:"Dues",minWidth:40,resizable:!0},{key:"totalBill",name:"Total",minWidth:60,resizable:!0},{key:"prevBill",name:"P-Bill",minWidth:75,resizable:!0},{key:"prevDues",name:"P-Dues",minWidth:70,resizable:!0},{key:"paid",name:"Paid",minWidth:60,resizable:!0}];Object(n.useEffect)((function(){var t={currentDate:f()(e.match.params.date,"DD-MMM-YYYY")};y(t);var a=null;g.getAll({active:!0,type:"customer"}).then((function(e){var n=e.data;a=new Array(n.length),n.map((function(e,t){a[t]={},a[t].id=e.id,a[t].name=e.name,a[t].dailyQuantity=e.defaultQuantity,a[t].route=e.route.name})),function(e,t){var a={month:e.currentDate.format("MMM-YYYY"),active:!0,type:"income"};ie.getAll(a).then((function(e){var a=e.data;t&&t.map((function(e){a&&a.map((function(t){t.partyId==e.id&&("discount"==t.category?(e.discount=t.payment,e.iddiscount=t.id):e.paid?e.paid=e.paid+t.payment:e.paid=+t.payment)}))}))})).catch((function(e){console.log(e)}))}(t,a),function(e,t){var a={date:e.currentDate.format("DD"),month:e.currentDate.format("MMM-YYYY"),type:"income"};x.getAll(a).then((function(e){var a=e.data;a&&a.map((function(e){var a,n=Object(k.a)(t);try{for(n.s();!(a=n.n()).done;){var l=a.value;if(l.id==e.partyId){l.today=e.quantity,l.idtoday=e.id;break}}}catch(r){n.e(r)}finally{n.f()}})),console.log(t),m(t)})).catch((function(e){console.log(e)}))}(t,a),function(e,t){var a={month:e.currentDate.format("MMM-YYYY"),active:!0,type:"income"};oe.getAll(a).then((function(e){var a=e.data;a&&a.map((function(e){var a,n=Object(k.a)(t);try{for(n.s();!(a=n.n()).done;){var l=a.value;if(l.id==e.partyId){e.rate&&(l.qty=e.quantity,l.rate=e.rate,l.bill=e.bill,l.dues=e.dues,l.totalBill=l.bill+(l.dues?l.dues:0));break}}}catch(r){n.e(r)}finally{n.f()}}))})).catch((function(e){console.log(e)}));var n={month:e.currentDate.clone().subtract(1,"months").format("MMM-YYYY"),active:!0,type:"income"};oe.getAll(n).then((function(e){var a=e.data;a&&a.map((function(e){var a,n=Object(k.a)(t);try{for(n.s();!(a=n.n()).done;){var l=a.value;if(l.id==e.partyId){e.rate&&(l.prevBill=e.bill,l.prevDues=e.dues);break}}}catch(r){n.e(r)}finally{n.f()}}))})).catch((function(e){console.log(e)}))}(t,a)})).catch((function(e){console.log(e)}))}),[e.match.params.date]);var S=Object(n.useMemo)((function(){return function(){var e=null;return e=s.filter((function(e){return(!r.name||e.name.includes(r.name))&&(!r.route||e.route.includes(r.route))})),0===E.length?e:e=Object(j.a)(e).sort((function(e,t){var a,n=Object(k.a)(E);try{for(n.s();!(a=n.n()).done;){var l=a.value,r=Ne(l.columnKey)(e,t);if(0!==r)return"ASC"===l.direction?r:-r}}catch(o){n.e(o)}finally{n.f()}return 0}))}()}),[s,r,E]);return l.a.createElement("div",null,p?l.a.createElement("div",null,l.a.createElement(A.a,{container:!0,spacing:{xs:1}},l.a.createElement(A.a,{item:!0,xs:3,sm:1},"\xa0",l.a.createElement(ee.a,{variant:"warning",className:"badge"},l.a.createElement(ye.CSVLink,{data:S,filename:"dailyIncome.txt"},"Export"))))):l.a.createElement("div",null,l.a.createElement("br",null),l.a.createElement("p",null,"Please click on a Customer...")),l.a.createElement("div",{className:"rootClassname"},l.a.createElement(Me.Provider,{value:r},l.a.createElement(N.c,{columns:O,onRowsChange:function(e,t){!function(e,t){var a=e[t.indexes][t.column.key],n=e[t.indexes].idtoday;console.log(e[t.indexes].id+" - "+a+" - "+n+" - "+t.column.key),function(e,t,a,n,l,r){var o={id:l,partyId:e,date:t.format("DD"),month:a.format("MMM-YYYY"),quantity:n,type:"income"};l?x.update(l,o).then((function(e){console.log(e.data)})).catch((function(e){console.log(e)})):x.create(o).then((function(e){r.idtoday=e.data.id,console.log(r)})).catch((function(e){console.log(e)}))}(e[t.indexes].id,p.currentDate,p.currentDate,a,n,e[t.indexes]),s[t.indexes]=e[t.indexes],m(s.slice())}(e,t)},defaultColumnOptions:{sortable:!0,resizable:!0},className:r.enabled?"filterContainerClassname":void 0,rows:S,sortColumns:E,onSortColumnsChange:C,headerRowHeight:r.enabled?50:void 0}))))};function Se(e){var t=e.isCellSelected,a=e.column,r=e.children,o=Object(n.useContext)(Me),i=function(e){var t=Object(n.useRef)(null);return Object(n.useLayoutEffect)((function(){e&&t.current&&t.current.focus({preventScroll:!0})}),[e]),{ref:t,tabIndex:e?0:-1}}(t),c=i.ref,u=i.tabIndex;return l.a.createElement(l.a.Fragment,null,l.a.createElement("div",null,a.name),o.enabled&&l.a.createElement("div",null,r({ref:c,tabIndex:u,filters:o})))}var we=["filters"],Re=Object(n.createContext)(void 0);function qe(e){["ArrowLeft","ArrowRight"].includes(e.key)&&e.stopPropagation()}function Ae(e){switch(e){case"name":return function(t,a){return t[e].localeCompare(a[e])};default:return function(t,a){return t[e]-a[e]}}}var Ie=function(e){var t=Object(n.useState)({enabled:!0}),a=Object(Y.a)(t,2),r=a[0],o=a[1],i={currentDate:f()()},c=Object(n.useState)([]),u=Object(Y.a)(c,2),s=u[0],d=u[1],h=Object(n.useState)(i),p=Object(Y.a)(h,2),y=p[0],b=p[1],g=Object(n.useState)([]),v=Object(Y.a)(g,2),E=v[0],C=v[1],O=Object(n.useState)(),S=Object(Y.a)(O,2),w=S[0],R=S[1],q=Object(n.useState)(),I=Object(Y.a)(q,2),B=I[0],P=I[1],z=Object(n.useState)(!1),T=Object(Y.a)(z,2),Q=T[0],W=T[1],F=Object(n.useState)(!1),L=Object(Y.a)(F,2),U=L[0],K=L[1],G=Object(n.useState)(),V=Object(Y.a)(G,2),_=V[0],H=V[1],J=[{key:"print",name:"PRINT",width:70,resizable:!0,formatter:function(e){return l.a.createElement(l.a.Fragment,null,l.a.createElement(m.b,{disable:"true",to:"/gui/collectionBills/"+f()(e.row.from,"YYYY-MMM-DD").format("YYYY-MM-DD")+"/"+f()(e.row.to,"YYYY-MMM-DD").format("YYYY-MM-DD")+"/"+e.row.partyId,className:"badge badge-warning"},"Print"))}},{key:"id",name:"ID",width:50,resizable:!0,headerCellClass:"filter-cell",headerRenderer:function(e){return l.a.createElement(Be,e,(function(e){var t=e.filters,a=Object(M.a)(e,we);return l.a.createElement("input",Object.assign({},a,{className:"filterClassname",value:t.name,onChange:function(e){return o(Object(D.a)(Object(D.a)({},t),{},{name:e.target.value}))},onKeyDown:qe}))}))}},{key:"name",name:"Name",resizable:!0},{key:"from",name:"FROM",resizable:!0},{key:"to",name:"TO",resizable:!0},{key:"qty",name:"Quantity",resizable:!0},{key:"bill",name:"Total",resizable:!0}];function $(){var t={currentDate:f()(e.match.params.date,"DD-MMM-YYYY")};b(t);var a=null;oe.getAll({active:!0,type:"expense",category:"collection"}).then((function(e){var n=e.data;console.log(n),a=new Array(n.length),n&&n.map((function(e,t){a[t]={},a[t].id=e.id,a[t].name=e.party,a[t].qty=e.quantity,a[t].rate=e.rate,a[t].from=e.from,a[t].to=e.to,a[t].bill=e.bill,a[t].partyId=e.partyId})),function(e,t){oe.getAll({active:!0,type:"expense",category:"collection"}).then((function(a){var n=a.data;console.log(n),n&&n.map((function(e){var a,n=Object(k.a)(t);try{for(n.s();!(a=n.n()).done;){var l=a.value;if(l.id==e.partyId){e.from&&(l.qty=e.quantity,l.rate=e.rate,l.bill=e.bill,l.from=e.from,l.to=e.to);break}}}catch(r){n.e(r)}finally{n.f()}})),function(e,t){var a={date:e.currentDate.format("DD"),type:"expence"};x.getAll(a).then((function(e){var a=e.data;a&&a.map((function(e){var a,n=Object(k.a)(t);try{for(n.s();!(a=n.n()).done;){var l=a.value;if(l.id==e.partyId){l.today=e.quantity,l.idtoday=e.id;break}}}catch(r){n.e(r)}finally{n.f()}})),console.log(t),d(t)})).catch((function(e){console.log(e)}))}(e,t)})).catch((function(e){console.log(e)}))}(t,a)})).catch((function(e){console.log(e)}))}function X(){K(!0)}function Z(){W(!1),K(!1)}function ie(){var e={type:"expense",from:w,to:B,category:"collection"};oe.generateBillsCollection(e).then((function(e){var t=e.data;t&&t.map((function(e){var t,a=Object(k.a)(s);try{for(a.s();!(t=a.n()).done;){var n=t.value;if(n.id==e.partyId){n.qty=e.quantity,n.rate=e.rate,n.bill=e.bill;break}}}catch(l){a.e(l)}finally{a.f()}})),$(),H("Bill generated for the period ."),X(),console.log(s),d(s)})).catch((function(e){404==e.response.status&&(H("Bill could not be generated for the period as there are overlapping bills."),W(!1),X())}))}Object(n.useEffect)((function(){$()}),[e.match.params.date]);var ce=Object(n.useMemo)((function(){return function(){var e=null;return e=s.filter((function(e){return!r.name||e.name.includes(r.name)})),0===E.length?e:e=Object(j.a)(e).sort((function(e,t){var a,n=Object(k.a)(E);try{for(n.s();!(a=n.n()).done;){var l=a.value,r=Ae(l.columnKey)(e,t);if(0!==r)return"ASC"===l.direction?r:-r}}catch(o){n.e(o)}finally{n.f()}return 0}))}()}),[s,r,E]);return l.a.createElement("div",null,y?l.a.createElement("div",null,l.a.createElement(A.a,{container:!0,spacing:{xs:1}},l.a.createElement(A.a,{item:!0,xs:3,sm:1},"\xa0",l.a.createElement(ee.a,{variant:"warning",className:"badge"},l.a.createElement(ye.CSVLink,{data:ce,filename:"dailyIncome.txt"},"Export"))),l.a.createElement(A.a,{item:!0,xs:3,sm:2},l.a.createElement(m.b,{to:w&&B?"/gui/collectionBills/"+w+"/"+B:"",hidden:!w||!B,className:"badge"},"Print Collection")),l.a.createElement(A.a,{item:!0,xs:6,sm:3},l.a.createElement(m.b,{to:"#",onClick:w&&B?function(){return function(){var e={type:"expense",from:w,to:B};oe.validateCollectionBillsGeneration("expense",e).then((function(e){console.log(e.data),e.data.from?(W(!0),H("Bill already generated for the period. Do you want to continue? Please confirm to proceed."),X()):ie()})).catch((function(e){console.log(e),404==e.response.status&&ie()}))}(y.currentDate.format("DD-MM-YYYY"))}:"",className:"badge"},"Generate Collection Bill")),l.a.createElement(A.a,{item:!0,xs:6,sm:6},l.a.createElement("input",{type:"date",id:"from",required:!0,onChange:function(e){R(e.target.value)},name:"from",style:{width:150,height:20},placeholder:"From"}),l.a.createElement("input",{type:"date",id:"to",required:!0,onChange:function(e){P(e.target.value)},name:"to",style:{width:150,height:20},placeholder:"To"})))):l.a.createElement("div",null,l.a.createElement("br",null),l.a.createElement("p",null,"Please click on a Customer...")),l.a.createElement("div",{className:"rootClassname"},l.a.createElement(Re.Provider,{value:r},l.a.createElement(N.c,{columns:J,onRowsChange:function(e,t){!function(e,t){var a=e[t.indexes][t.column.key],n=e[t.indexes].idtoday;console.log(e[t.indexes].id+" - "+a+" - "+n+" - "+t.column.key),function(e,t,a,n,l,r){var o={id:l,partyId:e,date:t.format("DD"),month:a.format("MMM-YYYY"),quantity:n,type:"expence"};l?x.update(l,o).then((function(e){console.log(e.data)})).catch((function(e){console.log(e)})):x.create(o).then((function(e){r.idtoday=e.data.id,console.log(r)})).catch((function(e){console.log(e)}))}(e[t.indexes].id,y.currentDate,y.currentDate,a,n,e[t.indexes]),s[t.indexes]=e[t.indexes],d(s.slice())}(e,t)},defaultColumnOptions:{sortable:!0,resizable:!0},className:r.enabled?"filterContainerClassname":void 0,rows:ce,sortColumns:E,onSortColumnsChange:C,headerRowHeight:r.enabled?50:void 0}))),l.a.createElement(te.a,{open:U,onClose:Z,"aria-labelledby":"alert-dialog-title","aria-describedby":"alert-dialog-description"},l.a.createElement(re.a,{id:"alert-dialog-title"},"Bills"),l.a.createElement(ne.a,null,l.a.createElement(le.a,{id:"alert-dialog-description"},_)),l.a.createElement(ae.a,null,Q?l.a.createElement(ee.a,{onClick:function(){W(!1),ie(y.currentDate.format("MMM-YYYY")),K(!1)}},"Confirm"):"",l.a.createElement(ee.a,{onClick:Z},"Close"))))};function Be(e){var t=e.isCellSelected,a=e.column,r=e.children,o=Object(n.useContext)(Re),i=function(e){var t=Object(n.useRef)(null);return Object(n.useLayoutEffect)((function(){e&&t.current&&t.current.focus({preventScroll:!0})}),[e]),{ref:t,tabIndex:e?0:-1}}(t),c=i.ref,u=i.tabIndex;return l.a.createElement(l.a.Fragment,null,l.a.createElement("div",null,a.name),o.enabled&&l.a.createElement("div",null,r({ref:c,tabIndex:u,filters:o})))}var Pe=["filters"],ze=["filters"],Te=Object(n.createContext)(void 0);function Qe(e){["ArrowLeft","ArrowRight"].includes(e.key)&&e.stopPropagation()}function We(e){switch(e){case"name":return function(t,a){return t[e].localeCompare(a[e])};default:return function(t,a){return t[e]-a[e]}}}var Fe=function(e){var t=Object(n.useState)({name:"",route:"",enabled:!0}),a=Object(Y.a)(t,2),r=a[0],o=a[1],i={currentDate:f()()},c=Object(n.useState)([]),u=Object(Y.a)(c,2),s=u[0],d=u[1],h=Object(n.useState)(),p=Object(Y.a)(h,2),y=(p[0],p[1],Object(n.useState)({})),b=Object(Y.a)(y,2),v=(b[0],b[1],Object(n.useState)(!1)),E=Object(Y.a)(v,2),C=(E[0],E[1],Object(n.useState)(!1)),O=Object(Y.a)(C,2),S=(O[0],O[1],Object(n.useState)(i)),w=Object(Y.a)(S,2),R=w[0],I=w[1],B=Object(n.useState)([]),P=Object(Y.a)(B,2),z=P[0],T=P[1],Q=Object(n.useState)(),W=Object(Y.a)(Q,2),F=(W[0],W[1],Object(n.useState)()),L=Object(Y.a)(F,2),U=(L[0],L[1],[{key:"id",name:"ID",minWidth:40,resizable:!0,headerCellClass:"filter-cell",headerRenderer:function(e){return l.a.createElement(Le,e,(function(e){var t=e.filters,a=Object(M.a)(e,Pe);return l.a.createElement("input",Object.assign({},a,{className:"filterClassname",value:t.name,onChange:function(e){return o(Object(D.a)(Object(D.a)({},t),{},{name:e.target.value}))},onKeyDown:Qe}))}))}},{key:"name",name:"Name",width:200,resizable:!0,formatter:function(e){return l.a.createElement(l.a.Fragment,null,e.row.name,l.a.createElement(m.b,{disable:"true",to:"#",onClick:function(){return function(e,t,a){var n={id:a.id,name:a.name,route:a.route,index:a.index,qty:a.quantity,bill:a.bill,paid:a.paid};a.index=t+1,s.splice(t,0,n),d(s.slice())}(e.row.id,e.row.index,e.row)},className:"badge badge-warning"},"Add"))}},{key:"today",name:"Quantity",editor:q,editorOptions:{editOnClick:!0},minWidth:80,resizable:!0},{key:"fat",name:"Fat",minWidth:20,resizable:!0,editor:q,editorOptions:{editOnClick:!0}},{key:"snf",name:"Snf",minWidth:20,resizable:!0,editor:q,editorOptions:{editOnClick:!0}},{key:"water",name:"Water",minWidth:40,resizable:!0,editor:q,editorOptions:{editOnClick:!0}},{key:"rate",name:"Rate",minWidth:40,resizable:!0,editor:q,editorOptions:{editOnClick:!0}},{key:"amount",name:"Amount",minWidth:40,resizable:!0},{key:"route",name:"Route",minWidth:40,resizable:!0,headerCellClass:"filter-cell",headerRenderer:function(e){return l.a.createElement(Le,e,(function(e){var t=e.filters,a=Object(M.a)(e,ze);return l.a.createElement("input",Object.assign({},a,{className:"filterClassname",value:t.route,onChange:function(e){return o(Object(D.a)(Object(D.a)({},t),{},{route:e.target.value}))},onKeyDown:Qe}))}))}},{key:"bill",name:"Bill",minWidth:40,resizable:!0},{key:"qty",name:"Bill Qty",minWidth:70,resizable:!0},{key:"paid",name:"Paid",minWidth:60,resizable:!0}]);Object(n.useEffect)((function(){var t={currentDate:f()(e.match.params.date,"DD-MMM-YYYY")};I(t);var a=null;g.getAll({active:!0,type:"farmer"}).then((function(e){var n=e.data;a=new Array(n.length),n.map((function(e,t){a[t]={},a[t].id=e.id,a[t].name=e.name,a[t].route=e.route.name,a[t].index=t})),function(e,t){var a={date:e.currentDate.format("DD"),month:e.currentDate.format("MMM-YYYY"),type:"expense"};x.getAll(a).then((function(a){var n=a.data;n&&n.map((function(e){var a,n=Object(k.a)(t);try{for(n.s();!(a=n.n()).done;){var l=a.value;if(l.id==e.partyId){if(l.idtoday){var r={id:l.id,name:l.name,route:l.route,index:l.index+1,today:e.quantity,idtoday:e.id,fat:e.fat,snf:e.snf,water:e.water,rate:e.rate,amount:e.amount};t.splice(l.index,0,r)}else l.today=e.quantity,l.idtoday=e.id,l.fat=e.fat,l.snf=e.snf,l.water=e.water,l.rate=e.rate,l.amount=e.amount;break}}}catch(o){n.e(o)}finally{n.f()}})),function(e,t){var a={from:e.currentDate.format("YYYY-MM-DD"),month:e.currentDate.format("MMM-YYYY"),active:!0,type:"expense"};oe.getAll(a).then((function(a){var n=a.data;t&&t.map((function(e){var t,a=Object(k.a)(n);try{for(a.s();!(t=a.n()).done;){var l=t.value;if(e.id==l.partyId){l.bill&&(e.qty=l.quantity,e.bill=l.bill);break}}}catch(r){a.e(r)}finally{a.f()}})),function(e,t){var a={month:e.currentDate.format("MMM-YYYY"),active:!0,type:"expense"};ie.getAll(a).then((function(e){var a=e.data;t&&t.map((function(e){a&&a.map((function(t){t.partyId==e.id&&(e.paid?e.paid=e.paid+t.payment:e.paid=+t.payment)}))})),console.log(t),d(t)})).catch((function(e){console.log(e)}))}(e,t)})).catch((function(e){console.log(e)}))}(e,t)})).catch((function(e){console.log(e)}))}(t,a)})).catch((function(e){console.log(e)}))}),[e.match.params.date]);var K=Object(n.useMemo)((function(){return function(){var e=null;return e=s.filter((function(e){return(!r.name||e.name.includes(r.name))&&(!r.route||e.route.includes(r.route))})),0===z.length?e:e=Object(j.a)(e).sort((function(e,t){var a,n=Object(k.a)(z);try{for(n.s();!(a=n.n()).done;){var l=a.value,r=We(l.columnKey)(e,t);if(0!==r)return"ASC"===l.direction?r:-r}}catch(o){n.e(o)}finally{n.f()}return 0}))}()}),[s,r,z]);return l.a.createElement("div",null,R?l.a.createElement("div",null,l.a.createElement(A.a,{container:!0,spacing:{xs:1}},l.a.createElement(A.a,{item:!0,xs:6,sm:3},l.a.createElement(m.b,{to:"/gui/collectionDaily/"+R.currentDate.clone().subtract(1,"days").format("DD-MMM-YYYY"),className:"badge badge-warning"},"Prev"),R.currentDate.format("DD-MMM-YYYY"),l.a.createElement(m.b,{to:"/gui/collectionDaily/"+R.currentDate.clone().add(1,"days").format("DD-MMM-YYYY"),className:"badge badge-warning"},"Next")),l.a.createElement(A.a,{item:!0,xs:3,sm:1},"\xa0",l.a.createElement(ee.a,{variant:"warning",className:"badge"},l.a.createElement(ye.CSVLink,{data:K,filename:"dailyCollectionExpense.txt"},"Export"))))):l.a.createElement("div",null,l.a.createElement("br",null),l.a.createElement("p",null,"Please click on a Customer...")),l.a.createElement("div",{className:"rootClassname"},l.a.createElement(Te.Provider,{value:r},l.a.createElement(N.c,{columns:U,onRowsChange:function(e,t){!function(e,t){var a=e[t.indexes],n=a[t.column.key],l=a.idtoday;console.log(a.id+" - "+n+" - "+l+" - "+t.column.key),function(e,t,a,n,l,r,o,i,c,u){var s,m=0;u&&(u<30?30:u);n&&(m=n);s=u*m,r.amount=s;var d={id:l,partyId:e,date:t.format("DD"),deliveryDate:t.format("DD-MMM-YYYY"),month:a.format("MMM-YYYY"),fat:o,snf:i,water:c,quantity:n,rate:u,type:"expense",amount:s,category:"collection"};console.log(d),l?x.update(l,d).then((function(e){console.log(e.data)})).catch((function(e){console.log(e)})):x.create(d).then((function(e){r.idtoday=e.data.id,console.log(r)})).catch((function(e){console.log(e)}))}(a.id,R.currentDate,R.currentDate,a.today,l,a,a.fat,a.snf,a.water,a.rate)}(e,t),d(e)},defaultColumnOptions:{sortable:!0,resizable:!0},className:r.enabled?"filterContainerClassname":void 0,rows:K,sortColumns:z,onSortColumnsChange:T,headerRowHeight:r.enabled?50:void 0}))))};function Le(e){var t=e.isCellSelected,a=e.column,r=e.children,o=Object(n.useContext)(Te),i=function(e){var t=Object(n.useRef)(null);return Object(n.useLayoutEffect)((function(){e&&t.current&&t.current.focus({preventScroll:!0})}),[e]),{ref:t,tabIndex:e?0:-1}}(t),c=i.ref,u=i.tabIndex;return l.a.createElement(l.a.Fragment,null,l.a.createElement("div",null,a.name),o.enabled&&l.a.createElement("div",null,r({ref:c,tabIndex:u,filters:o})))}var Ue=["filters"],Ke=Object(n.createContext)(void 0);function Ge(e){["ArrowLeft","ArrowRight"].includes(e.key)&&e.stopPropagation()}function Ve(e){e.stopPropagation()}function _e(e){switch(e){case"name":case"address":case"startDate":case"endDate":case"type":return function(t,a){return t[e].localeCompare(a[e])};default:return function(t,a){return t[e]-a[e]}}}var He=function(e){var t=Object(n.useState)([]),a=Object(Y.a)(t,2),r=a[0],o=a[1],i=Object(n.useState)([]),c=Object(Y.a)(i,2),u=c[0],s=c[1],d=Object(n.useState)({name:"",enabled:!0}),h=Object(Y.a)(d,2),f=h[0],p=h[1],y=[{key:"id",name:"ID",width:40,resizable:!0,frozen:!0,headerCellClass:"filter-cell",headerRenderer:function(e){return l.a.createElement(Je,e,(function(e){var t=e.filters,a=Object(M.a)(e,Ue);return l.a.createElement("input",Object.assign({},a,{className:"filterClassname",value:t.name,onChange:function(e){return p(Object(D.a)(Object(D.a)({},t),{},{name:e.target.value}))},onKeyDown:Ge}))}))}},{key:"name",name:"Name",editor:N.b,editorOptions:{editOnClick:!0},resizable:!0,frozen:!0},{key:"address",name:"Address",editor:N.b,editorOptions:{editOnClick:!0},resizable:!0},{key:"mobNo",name:"MobNo",editor:q,editorOptions:{editOnClick:!0},resizable:!0},{key:"startDate",name:"StartDate",editor:N.b,editorOptions:{editOnClick:!0},resizable:!0},{key:"endDate",name:"EndDate",editor:N.b,editorOptions:{editOnClick:!0},resizable:!0},{key:"defaultQuantity",name:"Quantity",width:40,editor:q,editorOptions:{editOnClick:!0},resizable:!0},{key:"active",name:"Active",width:40,formatter:function(e){var t=e.row,a=e.onRowChange,n=e.isCellSelected;return l.a.createElement(N.a,{value:t.active,onChange:function(){a(Object(D.a)(Object(D.a)({},t),{},{active:!t.active}))},onClick:Ve,isCellSelected:n})}},{key:"routeId",name:"Route",resizable:!0,formatter:function(e){return l.a.createElement(l.a.Fragment,null,e.row.routeName)},editor:P,editorOptions:{editOnClick:!0}},{key:"routeSeq",name:"Seq",width:40,editor:q,editorOptions:{editOnClick:!0},resizable:!0},{key:"type",name:"Type",width:80,editor:N.b,editorOptions:{editOnClick:!0},resizable:!0}];Object(n.useEffect)((function(){var e=null,t={_sort:"routeId",_order:"asc"};console.log(t),g.getAll(t).then((function(t){var a=t.data;e=new Array(a.length),a.map((function(t,a){e[a]={},e[a].id=t.id,e[a].name=t.name,e[a].address=t.address,e[a].mobNo=t.mobNo,e[a].startDate=t.startDate,e[a].endDate=t.endDate,e[a].defaultQuantity=t.defaultQuantity,e[a].active=t.active,e[a].routeId=t.routeId,e[a].routeSeq=t.routeSeq,e[a].type=t.type,t.route&&(e[a].routeName=t.route.name)})),o(e)})).catch((function(e){console.log(e)}))}),[]);var b=Object(n.useMemo)((function(){return function(){var e=null;return e=r.filter((function(e){return!f.name||e.name.includes(f.name)})),0===u.length?e:e=Object(j.a)(e).sort((function(e,t){var a,n=Object(k.a)(u);try{for(n.s();!(a=n.n()).done;){var l=a.value,r=_e(l.columnKey)(e,t);if(0!==r)return"ASC"===l.direction?r:-r}}catch(o){n.e(o)}finally{n.f()}return 0}))}()}),[r,f,u]);return l.a.createElement("div",null,l.a.createElement(m.b,{to:"/gui/addCustomer",className:"nav-link"},"Add Customer"),l.a.createElement("div",{className:"rootClassname"},l.a.createElement(Ke.Provider,{value:f},l.a.createElement(N.c,{columns:y,onRowsChange:function(e,t){!function(e,t){console.log(e[t.indexes].id+" - "+e[t.indexes][t.column.key]),function(e){var t={id:e.id,name:e.name,address:e.address,mobNo:e.mobNo,startDate:e.startDate,endDate:e.endDate,active:e.active,routeId:e.routeId,defaultQuantity:e.defaultQuantity,routeSeq:e.routeSeq,type:e.type};console.log(t),g.update(e.id,t).then((function(e){console.log(e.data)})).catch((function(e){console.log(e)}))}(e[t.indexes])}(e,t),o(e)},defaultColumnOptions:{sortable:!0,resizable:!0},className:f.enabled?"filterContainerClassname":void 0,rows:b,sortColumns:u,onSortColumnsChange:s,headerRowHeight:f.enabled?50:void 0}))))};function Je(e){var t=e.isCellSelected,a=e.column,r=e.children,o=Object(n.useContext)(Ke),i=function(e){var t=Object(n.useRef)(null);return Object(n.useLayoutEffect)((function(){e&&t.current&&t.current.focus({preventScroll:!0})}),[e]),{ref:t,tabIndex:e?0:-1}}(t),c=i.ref,u=i.tabIndex;return l.a.createElement(l.a.Fragment,null,l.a.createElement("div",null,a.name),o.enabled&&l.a.createElement("div",null,r({ref:c,tabIndex:u,filters:o})))}var $e=function(e){Object(u.a)(a,e);var t=Object(s.a)(a);function a(e){var n;return Object(i.a)(this,a),(n=t.call(this,e)).state={bills:null},n}return Object(c.a)(a,[{key:"componentDidMount",value:function(){this.getBills(this.props.match.params.month)}},{key:"getBills",value:function(e){var t=this,a={month:e,active:!0,type:"income"},n=[];oe.getAll(a).then((function(a){var l=a.data;l&&l.map((function(t,a){if(t.quantity>0||t.dues>0){var l={};l.id=t.id,l.partyId=t.partyId,l.month=e,l.qty=t.quantity,l.rate=t.rate,l.bill=t.bill,l.dues=t.dues,l.totalBill=l.bill+(l.dues?l.dues:0),l.paid=+t.payment,l.discount=+t.discount,l.lastBillTotal=+t.lastBillTotal,l.name=t.party,n[a]={},n[a]=l}}));var r={month:e,type:"income"};x.getAll(r).then((function(e){var a=e.data;a&&a.map((function(e){var t,a=Object(k.a)(n);try{for(a.s();!(t=a.n()).done;){var l=t.value;if(l&&l.partyId==e.partyId){l[e.date]=e.quantity;break}}}catch(r){a.e(r)}finally{a.f()}})),console.log(n),t.setState({bills:n})})).catch((function(e){console.log(e)})),t.setState({bills:n})})).catch((function(e){console.log(e)}))}},{key:"render",value:function(){var e=this.state.bills;return l.a.createElement("div",{className:"container"},l.a.createElement("table",{className:"table"},e&&e.map((function(e){return l.a.createElement("tr",null,l.a.createElement("td",null,l.a.createElement("table",{className:"table noBorder",border:"1"},l.a.createElement("tr",null,l.a.createElement("th",null,"Name"),l.a.createElement("td",null,l.a.createElement("b",null,e.name?e.name:e.id)),l.a.createElement("th",null,"Month"),l.a.createElement("td",null,e.month),l.a.createElement("th",null,"Last Bill"),l.a.createElement("td",null,e.lastBillTotal),l.a.createElement("th",null,"Payment"),l.a.createElement("td",null,e.paid),l.a.createElement("th",null,"Discount"),l.a.createElement("td",null,e.discount)),l.a.createElement("tr",null,l.a.createElement("th",null,"Quantity"),l.a.createElement("td",null,e.qty+" Ltr"),l.a.createElement("th",null,"Rate"),l.a.createElement("td",null,e.rate),l.a.createElement("th",null,"Bill"),l.a.createElement("td",null,e.bill),l.a.createElement("th",null,"Dues"),l.a.createElement("td",null,e.dues),l.a.createElement("th",null,"Total Bill"),l.a.createElement("td",null,e.totalBill," ")),l.a.createElement("tr",null,l.a.createElement("td",{style:{margin:0,padding:0},colspan:10},l.a.createElement("table",{style:{margin:0,padding:0}},l.a.createElement("tr",null,l.a.createElement("td",null,"Day"),l.a.createElement("td",null,"1"),l.a.createElement("td",null,"2"),l.a.createElement("td",null,"3"),l.a.createElement("td",null,"4"),l.a.createElement("td",null,"5"),l.a.createElement("td",null,"6"),l.a.createElement("td",null,"7"),l.a.createElement("td",null,"8"),l.a.createElement("td",null,"9"),l.a.createElement("td",null,"10"),l.a.createElement("td",null,"11"),l.a.createElement("td",null,"12"),l.a.createElement("td",null,"13"),l.a.createElement("td",null,"14"),l.a.createElement("td",null,"15"),l.a.createElement("td",null,"16"),l.a.createElement("td",{rowSpan:2},l.a.createElement("h1",null,"RAMJI DAIRY"))),l.a.createElement("tr",null,l.a.createElement("td",null,"Quantity"),l.a.createElement("td",null,e["01"]),l.a.createElement("td",null,e["02"]),l.a.createElement("td",null,e["03"]),l.a.createElement("td",null,e["04"]),l.a.createElement("td",null,e["05"]),l.a.createElement("td",null,e["06"]),l.a.createElement("td",null,e["07"]),l.a.createElement("td",null,e["08"]),l.a.createElement("td",null,e["09"]),l.a.createElement("td",null,e[10]),l.a.createElement("td",null,e[11]),l.a.createElement("td",null,e[12]),l.a.createElement("td",null,e[13]),l.a.createElement("td",null,e[14]),l.a.createElement("td",null,e[15]),l.a.createElement("td",null,e[16])),l.a.createElement("tr",null,l.a.createElement("td",null,"Day"),l.a.createElement("td",null,"17"),l.a.createElement("td",null,"18"),l.a.createElement("td",null,"19"),l.a.createElement("td",null,"20"),l.a.createElement("td",null,"21"),l.a.createElement("td",null,"22"),l.a.createElement("td",null,"23"),l.a.createElement("td",null,"24"),l.a.createElement("td",null,"25"),l.a.createElement("td",null,"26"),l.a.createElement("td",null,"27"),l.a.createElement("td",null,"28"),l.a.createElement("td",null,"29"),l.a.createElement("td",null,"30"),l.a.createElement("td",null,"31"),l.a.createElement("td",null," "),l.a.createElement("td",{rowSpan:2},l.a.createElement("h3",null,"9860910995"))),l.a.createElement("tr",null,l.a.createElement("td",null,"quantity"),l.a.createElement("td",null,e[17]),l.a.createElement("td",null,e[18]),l.a.createElement("td",null,e[19]),l.a.createElement("td",null,e[20]),l.a.createElement("td",null,e[21]),l.a.createElement("td",null,e[22]),l.a.createElement("td",null,e[23]),l.a.createElement("td",null,e[24]),l.a.createElement("td",null,e[25]),l.a.createElement("td",null,e[26]),l.a.createElement("td",null,e[27]),l.a.createElement("td",null,e[28]),l.a.createElement("td",null,e[29]),l.a.createElement("td",null,e[30]),l.a.createElement("td",null,e[31]))))))))}))))}}]),a}(n.Component),Xe=function(e){Object(u.a)(a,e);var t=Object(s.a)(a);function a(e){var n;return Object(i.a)(this,a),(n=t.call(this,e)).state={bills:null},n}return Object(c.a)(a,[{key:"componentDidMount",value:function(){this.getBills(this.props.match.params.from,this.props.match.params.to,this.props.match.params.partyId)}},{key:"getBills",value:function(e,t,a){var n=this,l={from:e,to:t,active:!0,type:"expense",category:"collection",partyId:a};console.log(l);var r=[];oe.getAll(l).then((function(a){var l=a.data;console.log(l),l&&l.map((function(e,t){if(e.quantity>0||e.dues>0){var a={};a.id=e.id,a.partyId=e.partyId,a.from=e.from,a.to=e.to,a.qty=e.quantity,a.rate=e.rate,a.bill=e.bill,a.dues=e.dues,a.totalBill=a.bill+(a.dues?a.dues:0),a.paid=+e.payment,a.discount=+e.discount,a.lastBillTotal=+e.lastBillTotal,a.name=e.party,r[t]={},r[t]=a}}));var o={from:e,to:t,type:"expense",category:"collection"};x.getAll(o).then((function(e){var t=e.data;t&&t.map((function(e){var t,a=Object(k.a)(r);try{for(a.s();!(t=a.n()).done;){var n=t.value;if(n&&n.partyId==e.partyId){n.delivery?n.delivery[n.delivery.length]=e:(n.delivery=new Array,n.delivery[0]=e);break}}}catch(l){a.e(l)}finally{a.f()}})),console.log(r),n.setState({bills:r})})).catch((function(e){console.log(e)})),n.setState({bills:r})})).catch((function(e){console.log(e)}))}},{key:"render",value:function(){var e=this.state.bills;return l.a.createElement("div",{className:"container"},l.a.createElement("table",{className:"table"},e&&e.map((function(e){return l.a.createElement("tr",null,l.a.createElement("td",null,l.a.createElement("table",{className:"table noBorder",border:"1"},l.a.createElement("tr",null,l.a.createElement("th",null,"Name"),l.a.createElement("td",null,l.a.createElement("b",null,e.name?e.name:e.id)),l.a.createElement("th",null,"From"),l.a.createElement("td",null,e.from),l.a.createElement("th",null,"To"),l.a.createElement("td",null,e.to),l.a.createElement("th",null,"Last Bill"),l.a.createElement("td",null,e.lastBillTotal),l.a.createElement("th",null,"Payment"),l.a.createElement("td",null,e.paid),l.a.createElement("th",null,"Discount"),l.a.createElement("td",null,e.discount)),l.a.createElement("tr",null,l.a.createElement("th",null,"Quantity"),l.a.createElement("td",{colSpan:3},e.qty+" Ltr"),l.a.createElement("th",null,"Bill"),l.a.createElement("td",null,e.bill),l.a.createElement("th",null,"Dues"),l.a.createElement("td",null,e.dues),l.a.createElement("th",null,"Total Bill"),l.a.createElement("td",{colSpan:3},e.totalBill," ")),l.a.createElement("tr",null,l.a.createElement("td",{style:{margin:0,padding:0},colspan:12},l.a.createElement("table",{style:{margin:0,padding:0}},l.a.createElement("tr",null,l.a.createElement("td",null,l.a.createElement("table",null,l.a.createElement("tr",null,l.a.createElement("th",null,"Date"),l.a.createElement("th",null,"SNF"),l.a.createElement("th",null,"Water"),l.a.createElement("th",null,"Rate"),l.a.createElement("th",null,"Quantity"),l.a.createElement("th",null,"Amount")),e.delivery&&e.delivery.map((function(e,t){return t%2==0?l.a.createElement("tr",null,l.a.createElement("td",null,l.a.createElement("b",null,e.date)),l.a.createElement("td",null,e.snf),l.a.createElement("td",null,e.water),l.a.createElement("td",null,e.rate),l.a.createElement("td",null,e.quantity),l.a.createElement("td",null,e.amount)):""})))),l.a.createElement("td",null,l.a.createElement("table",null,l.a.createElement("tr",null,l.a.createElement("th",null,"Date"),l.a.createElement("th",null,"SNF"),l.a.createElement("th",null,"Water"),l.a.createElement("th",null,"Rate"),l.a.createElement("th",null,"Quantity"),l.a.createElement("th",null,"Amount")),e.delivery&&e.delivery.map((function(e,t){return t%2==1?l.a.createElement("tr",null,l.a.createElement("td",null,l.a.createElement("b",null,e.date)),l.a.createElement("td",null,e.snf),l.a.createElement("td",null,e.water),l.a.createElement("td",null,e.rate),l.a.createElement("td",null,e.quantity),l.a.createElement("td",null,e.amount)):""})))))))))))}))))}}]),a}(n.Component),Ze=function(e){Object(u.a)(a,e);var t=Object(s.a)(a);function a(e){var n;return Object(i.a)(this,a),(n=t.call(this,e)).state={bills:null},n}return Object(c.a)(a,[{key:"componentDidMount",value:function(){this.getBills(this.props.match.params.month)}},{key:"getBills",value:function(e){var t=this,a={month:e,active:!0,type:"expense"},n=[];oe.getAll(a).then((function(a){var l=a.data;l&&l.map((function(a,l){if(a.quantity>0||a.dues>0||a.payment>0){var r={};r.id=a.id,r.partyId=a.partyId,r.month=e,r.qty=a.quantity,r.rate=a.rate,r.bill=a.bill,r.dues=a.dues,r.totalBill=r.bill+(r.dues?r.dues:0),r.paid=+a.payment,a.customer&&(r.name=a.customer.name),n[l]={},n[l]=r;var o={month:e,type:"expense",partyId:a.partyId};x.getAll(o).then((function(e){var a=e.data;n[l].allBills=a,t.setState({bills:n})})).catch((function(e){console.log(e)})),ie.getAll(o).then((function(e){var a=e.data;n[l].allPayments=a,t.setState({bills:n})})).catch((function(e){console.log(e)}))}})),console.log(n),t.setState({bills:n})})).catch((function(e){console.log(e)}))}},{key:"render",value:function(){var e=this.state.bills;return l.a.createElement("div",{className:"container"},l.a.createElement("table",{className:"table"},e&&e.map((function(e){return l.a.createElement("tr",null,l.a.createElement("td",null,l.a.createElement("table",{className:"table noBorder",border:"1"},l.a.createElement("tr",null,l.a.createElement("th",null,"Name"),l.a.createElement("td",{colspan:"3"},l.a.createElement("b",null,e.name?e.name:e.id)),l.a.createElement("th",null,"Month"),l.a.createElement("td",null,e.month),l.a.createElement("th",null,"Quantity"),l.a.createElement("td",null,e.qty)),l.a.createElement("tr",null,l.a.createElement("th",null,"Bill"),l.a.createElement("td",null,e.bill),l.a.createElement("th",null,"Prev Dues"),l.a.createElement("td",null,e.dues),l.a.createElement("th",null,"Total Bill"),l.a.createElement("td",null,e.totalBill," "),l.a.createElement("th",null,"Payment"),l.a.createElement("td",null,e.paid," ")),l.a.createElement("tr",null,l.a.createElement("td",{colspan:4},l.a.createElement("table",{width:"100%"},e.allBills&&e.allBills.map((function(e){return l.a.createElement("tr",null,l.a.createElement("td",null,e.date,"-",e.month),l.a.createElement("td",null,e.amount))})))),l.a.createElement("td",{colspan:4},l.a.createElement("table",{width:"100%"},e.allPayments&&e.allPayments.map((function(e){return l.a.createElement("tr",null,l.a.createElement("td",null,e.date,"-",e.month),l.a.createElement("td",null,e.payment))}))))))))}))))}}]),a}(n.Component);function et(e){switch(e){case"name":case"date":case"month":case"category":return function(t,a){return t[e].localeCompare(a[e])};default:return function(t,a){return t[e]-a[e]}}}var tt=[{key:"id",name:"ID",width:40,resizable:!0},{key:"name",name:"Name",width:50,resizable:!0},{key:"date",name:"Date",editor:N.b,width:20,resizable:!0},{key:"month",name:"Month",editor:N.b,width:40,resizable:!0},{key:"payment",name:"Payment Amount",width:140,editor:q,resizable:!0},{key:"amount",name:"Bill Amount",width:120,editor:q,resizable:!0},{key:"quantity",name:"Quantity",width:80,editor:q,resizable:!0},{key:"category",name:"Category",editor:N.b,resizable:!0}],at=function(e){var t={currentDate:f()()},a=Object(n.useState)([]),r=Object(Y.a)(a,2),o=r[0],i=r[1],c=Object(n.useState)([]),u=Object(Y.a)(c,2),s=u[0],d=u[1],h=Object(n.useState)(t),p=Object(Y.a)(h,2),y=p[0],b=p[1],g=Object(n.useState)(!1),v=Object(Y.a)(g,2),E=v[0],C=v[1],O=Object(n.useState)(!1),D=Object(Y.a)(O,2),M=D[0],S=D[1],w=Object(n.useState)(),R=Object(Y.a)(w,2),q=R[0],I=R[1];Object(n.useEffect)((function(){var t={currentDate:f()(e.match.params.month,"MMM-YYYY")};b(t);var a=null,n={type:"expense",month:e.match.params.month,searchFlag:"not-collection"};x.getAll(n).then((function(t){var n=t.data;console.log(n),a=[],n&&n.map((function(e,t){a[t]={},a[t].id=e.id,a[t].partyId=e.partyId,a[t].date=e.date,a[t].month=e.month,a[t].quantity=e.quantity,a[t].amount=e.amount,a[t].type=e.type,a[t].category=e.category,a[t].name=e.party})),console.log(a),function(e,t){var a={month:e,active:!0,type:"expense"};ie.getAll(a).then((function(e){var a=e.data;a&&a.map((function(e){var a=t.length;t[t.length]={},t[a].id=e.id,t[a].partyId=e.partyId,t[a].date=e.date,t[a].month=e.month,t[a].payment=e.payment,t[a].type=e.type,t[a].category=e.category,t[a].name=e.party})),i(t),console.log(t)})).catch((function(e){console.log(e)}))}(e.match.params.month,a)})).catch((function(e){console.log(e)}))}),[e.match.params.month]);var B=Object(n.useMemo)((function(){return 0===s.length?o:Object(j.a)(o).sort((function(e,t){var a,n=Object(k.a)(s);try{for(n.s();!(a=n.n()).done;){var l=a.value,r=et(l.columnKey)(e,t);if(0!==r)return"ASC"===l.direction?r:-r}}catch(o){n.e(o)}finally{n.f()}return 0}))}),[o,s]);function P(e){var t={month:e,type:"expense"};oe.generateBills(t).then((function(t){var a=t.data;I("Bill generated for the month "+e+"."),z(),console.log(a)})).catch((function(e){console.log(e)}))}function z(){C(!0)}function T(){S(!1),C(!1)}return l.a.createElement("div",null,l.a.createElement("div",null,l.a.createElement(A.a,{container:!0,spacing:{xs:1}},l.a.createElement(A.a,{item:!0,xs:6,sm:3},l.a.createElement(m.b,{to:"/gui/addExpense",className:"badge"},"Add Expense")),l.a.createElement(A.a,{item:!0,xs:6,sm:3},l.a.createElement(m.b,{to:"#",onClick:function(){return e=y.currentDate.format("MMM-YYYY"),void oe.validateBillGeneration(e,"expense").then((function(t){console.log(t.data),t.data.rate?(S(!0),I("Bill already generated for the month "+e+". Do you want to continue? Please confirm to proceed."),z()):P(e)})).catch((function(t){console.log(t),404==t.response.status&&P(e)}));var e},className:"badge"},"Generate Expense Bill Month - ",y.currentDate.format("MMM-YYYY"))),l.a.createElement(A.a,{item:!0,xs:6,sm:3},l.a.createElement(m.b,{to:"/gui/expense/"+y.currentDate.clone().subtract(1,"months").format("MMM-YYYY"),className:"badge badge-warning"},"Prev"),y.currentDate.format("DD-MMM-YYYY"),l.a.createElement(m.b,{to:"/gui/expense/"+y.currentDate.clone().add(1,"months").format("MMM-YYYY"),className:"badge badge-warning"},"Next")),l.a.createElement(A.a,{item:!0,xs:3,sm:2},l.a.createElement(m.b,{to:"/gui/expenseBills/"+y.currentDate.format("MMM-YYYY"),className:"badge"},"Print - ",y.currentDate.format("MMM-YYYY"))),l.a.createElement(A.a,{item:!0,xs:3,sm:1},"\xa0",l.a.createElement(ee.a,{variant:"warning",className:"badge"},l.a.createElement(ye.CSVLink,{data:B,filename:"expense.txt"},"Export"))))),l.a.createElement("div",null,l.a.createElement(N.c,{columns:tt,onRowsChange:function(e,t){!function(e,t){console.log(e[t.indexes].id+" - "+e[t.indexes][t.column.key]),function(e){var t={id:e.id,partyId:e.partyId,month:e.month,date:e.date,quantity:e.quantity,amount:e.amount,payment:e.payment,type:e.type,cotegory:e.category,active:!0};e.amount>0&&x.update(e.id,t).then((function(e){console.log(e.data)})).catch((function(e){console.log(e)}));e.payment>0&&ie.update(e.id,t).then((function(e){console.log(e.data)})).catch((function(e){console.log(e)}))}(e[t.indexes])}(e,t),i(e)},defaultColumnOptions:{sortable:!0,resizable:!0},rows:B,sortColumns:s,onSortColumnsChange:d})),l.a.createElement(te.a,{open:E,onClose:T,"aria-labelledby":"alert-dialog-title","aria-describedby":"alert-dialog-description"},l.a.createElement(re.a,{id:"alert-dialog-title"},"Bills"),l.a.createElement(ne.a,null,l.a.createElement(le.a,{id:"alert-dialog-description"},q)),l.a.createElement(ae.a,null,M?l.a.createElement(ee.a,{onClick:function(){S(!1),P(y.currentDate.format("MMM-YYYY")),C(!1)}},"Confirm"):"",l.a.createElement(ee.a,{onClick:T},"Close"))))},nt=function(e){Object(u.a)(a,e);var t=Object(s.a)(a);function a(e){var n;return Object(i.a)(this,a),(n=t.call(this,e)).saveExpense=n.saveExpense.bind(Object(p.a)(n)),n.onChangeQuantity=n.onChangeQuantity.bind(Object(p.a)(n)),n.onChangeAmount=n.onChangeAmount.bind(Object(p.a)(n)),n.onChangePayment=n.onChangePayment.bind(Object(p.a)(n)),n.newExpense=n.newExpense.bind(Object(p.a)(n)),n.onChangeCategory=n.onChangeCategory.bind(Object(p.a)(n)),n.onDate=n.onDate.bind(Object(p.a)(n)),n.myRef=l.a.createRef(),n.state={id:null,partyId:null,quantity:null,date:null,month:null,type:"expense",category:null,amount:null,payment:null,submitted:!1,routes:[],inputDate:f()().format("DD-MMM-YYYY")},n}return Object(c.a)(a,[{key:"onChangeQuantity",value:function(e){this.setState({quantity:e.target.value})}},{key:"onChangePayment",value:function(e){this.setState({payment:e.target.value})}},{key:"onChangeAmount",value:function(e){this.setState({amount:e.target.value})}},{key:"onDate",value:function(e){this.setState({inputDate:e.target.value})}},{key:"onChangeCategory",value:function(e){this.setState({category:e.target.value})}},{key:"saveExpense",value:function(e){var t=this;e.target.disabled=!0;var a={partyId:this.myRef.current.value,quantity:this.state.quantity,date:f()(this.state.inputDate,"DD-MMM-YYYY").format("DD"),month:f()(this.state.inputDate,"DD-MMM-YYYY").format("MMM-YYYY"),type:"expense",category:this.state.category,amount:this.state.amount,payment:this.state.payment,active:!0};this.state.amount>0&&x.create(a).then((function(e){t.setState({id:e.data.id,amount:e.data.amount,submitted:!0}),console.log(e.data)})).catch((function(e){console.log(e)})),this.state.payment>0&&ie.create(a).then((function(a){t.setState({id:a.data.id,payment:a.data.payment,submitted:!0}),console.log(a.data),e.target.disabled=!1})).catch((function(e){console.log(e)}))}},{key:"newExpense",value:function(){this.setState({id:null,partyId:null,quantity:null,date:null,month:null,type:"expense",category:null,amount:null,payment:null,submitted:!1,inputDate:f()().format("DD-MMM-YYYY")})}},{key:"componentDidMount",value:function(){this.getRoute()}},{key:"getRoute",value:function(){var e=this;g.getAll({searchFlag:"non-customer"}).then((function(t){e.setState({routes:t.data})})).catch((function(e){console.log(e)}))}},{key:"render",value:function(){var e=this.state.routes;return l.a.createElement("div",{className:"submit-form"},this.state.submitted?l.a.createElement("div",null,l.a.createElement("h4",null,"You submitted successfully!"),l.a.createElement("button",{className:"btn btn-success",onClick:this.newExpense},"Add")):l.a.createElement("div",null,l.a.createElement("div",{className:"form-group"},l.a.createElement("label",{htmlFor:"name"},"Vendor/Staff Name"),l.a.createElement("div",{className:"select-container"},l.a.createElement("select",{className:"form-control",value:this.state.partyId,onChange:this.onChangeRoute,ref:this.myRef,name:"partyId"},e&&e.map((function(e){return l.a.createElement("option",{value:e.id},e.name)}))))),l.a.createElement("div",{className:"form-group"},l.a.createElement("label",{htmlFor:"quantity"},"Quantity"),l.a.createElement("input",{type:"number",className:"form-control",id:"quantity",required:!0,value:this.state.quantity,onChange:this.onChangeQuantity,name:"quantity"})),l.a.createElement("div",{className:"form-group"},l.a.createElement("label",{htmlFor:"amount"},"Bill Amount"),l.a.createElement("input",{type:"number",className:"form-control",id:"amount",required:!0,value:this.state.amount,onChange:this.onChangeAmount,name:"amount"})),l.a.createElement("div",{className:"form-group"},l.a.createElement("label",{htmlFor:"payment"},"Payment Amount"),l.a.createElement("input",{type:"number",className:"form-control",id:"payment",required:!0,value:this.state.payment,onChange:this.onChangePayment,name:"payment"})),l.a.createElement("div",{className:"form-group"},l.a.createElement("label",{htmlFor:"category"},"Category "),l.a.createElement("input",{type:"text",className:"form-control",id:"category",required:!0,value:this.state.category,onChange:this.onChangeCategory,name:"category"})),l.a.createElement("div",{className:"form-group"},l.a.createElement("label",{htmlFor:"inputDate"},"Date"),l.a.createElement("input",{type:"text",className:"form-control",id:"inputDate",required:!0,readOnly:"readOnly",value:this.state.inputDate,onChange:this.onDate,name:"inputDate"})),l.a.createElement("button",{onClick:this.saveExpense,className:"btn btn-success"},"Submit")))}}]),a}(n.Component),lt=new(function(){function e(){Object(i.a)(this,e)}return Object(c.a)(e,[{key:"getCurrentUser",value:function(){return JSON.parse(localStorage.getItem("user"))}},{key:"setCurrentUser",value:function(e){if("Alok"==e){localStorage.setItem("user",JSON.stringify({id:"alok",roles:["ROLE_ADMIN","ROLE_MODERATOR"]}))}}}]),e}()),rt=function(e){Object(u.a)(a,e);var t=Object(s.a)(a);function a(e){return Object(i.a)(this,a),t.call(this,e)}return Object(c.a)(a,[{key:"componentDidMount",value:function(){lt.setCurrentUser("Alok"),console.log(lt.getCurrentUser()),this.props.history.push("/gui/routes"),window.location.reload()}},{key:"render",value:function(){return""}}]),a}(n.Component),ot=function(e){Object(u.a)(a,e);var t=Object(s.a)(a);function a(e){var n;return Object(i.a)(this,a),(n=t.call(this,e)).state={showModeratorBoard:!0,showAdminBoard:!1,currentUser:void 0},console.log(e),n}return Object(c.a)(a,[{key:"componentDidMount",value:function(){var e=lt.getCurrentUser();e&&this.setState({currentUser:e,showModeratorBoard:e.roles.includes("ROLE_MODERATOR"),showAdminBoard:e.roles.includes("ROLE_ADMIN")})}},{key:"render",value:function(){var e=this.state,t=(e.currentUser,e.showModeratorBoard),a=e.showAdminBoard;return l.a.createElement(m.a,null,l.a.createElement("div",null,l.a.createElement("nav",{className:"navbar navbar-expand navbar-dark bg-dark"},l.a.createElement("div",{className:"navbar-nav mr-auto"},t&&l.a.createElement("li",{className:"nav-item"},l.a.createElement(m.b,{to:"/gui/routes",className:"nav-link"},"Routes")),t&&l.a.createElement("li",{className:"nav-item"},l.a.createElement(m.b,{to:"/gui/customerDaily/"+f()().format("DD-MMM-YYYY"),className:"nav-link"},"Today")),a&&l.a.createElement("li",{className:"nav-item"},l.a.createElement(m.b,{to:"/gui/customerCalendar/"+f()().format("MMM-YYYY"),className:"nav-link"},"Calendar")),t&&l.a.createElement("li",{className:"nav-item"},l.a.createElement(m.b,{to:"/gui/expense/"+f()().format("MMM-YYYY"),className:"nav-link"},"Expense")),a&&l.a.createElement("li",{className:"nav-item"},l.a.createElement(m.b,{to:"/gui/customers",className:"nav-link"},"Party")),t&&l.a.createElement("li",{className:"nav-item"},l.a.createElement(m.b,{to:"/gui/collectionDaily/"+f()().format("DD-MMM-YYYY"),className:"nav-link"},"Collection")),t&&l.a.createElement("li",{className:"nav-item"},l.a.createElement(m.b,{to:"/gui/CollectionBillsList/"+f()().format("DD-MMM-YYYY"),className:"nav-link"},"CollectionBillsList")),a&&l.a.createElement("li",{className:"nav-item"},l.a.createElement(m.b,{to:"/gui/productlist",className:"nav-link"},"ProductList")),a&&l.a.createElement("li",{className:"nav-item"},l.a.createElement(m.b,{to:"/gui/sellerProduct",className:"nav-link"},"SellerProduct")))),l.a.createElement("div",{className:"container mt-3"},l.a.createElement(d.c,null,l.a.createElement(d.a,{exact:!0,path:["/","/gui/routes"],component:B}),l.a.createElement(d.a,{exact:!0,path:"/gui/customers",component:He}),l.a.createElement(d.a,{exact:!0,path:"/gui/addCustomer",component:E}),l.a.createElement(d.a,{exact:!0,path:"/gui/productlist",component:F}),l.a.createElement(d.a,{exact:!0,path:"/gui/addProduct",component:O}),l.a.createElement(d.a,{exact:!0,path:"/gui/sellerProduct",component:K}),l.a.createElement(d.a,{exact:!0,path:"/gui/dailyDelivery/:id",component:ue}),l.a.createElement(d.a,{exact:!0,path:"/gui/dailyDelivery/:id/:pending",component:ue}),l.a.createElement(d.a,{exact:!0,path:"/gui/route",component:de}),l.a.createElement(d.a,{exact:!0,path:"/gui/routes",component:B}),l.a.createElement(d.a,{exact:!0,path:"/gui/customerCalendar/:date",component:Oe}),l.a.createElement(d.a,{exact:!0,path:"/gui/customerDaily/:date",component:xe}),l.a.createElement(d.a,{exact:!0,path:"/gui/bills/:month",component:$e}),l.a.createElement(d.a,{exact:!0,path:"/gui/collectionbills/:from/:to",component:Xe}),l.a.createElement(d.a,{exact:!0,path:"/gui/collectionbills/:from/:to/:partyId",component:Xe}),l.a.createElement(d.a,{exact:!0,path:"/gui/expenseBills/:month",component:Ze}),l.a.createElement(d.a,{exact:!0,path:"/gui/bills/:month/:partyId",component:$e}),l.a.createElement(d.a,{exact:!0,path:"/gui/expense/:month",component:at}),l.a.createElement(d.a,{exact:!0,path:"/gui/addExpense",component:nt}),l.a.createElement(d.a,{exact:!0,path:"/gui/login",component:rt}),l.a.createElement(d.a,{exact:!0,path:"/gui/collectionDaily/:date",component:Fe}),l.a.createElement(d.a,{exact:!0,path:"/gui/CollectionBillsList/:date",component:Ie}),l.a.createElement(d.a,{exact:!0,path:"/gui/employeeDaily/:date",component:xe})))))}}]),a}(n.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var it=a(173);o.a.render(l.a.createElement(it.a,{injectFirst:!0},l.a.createElement(ot,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[104,1,2]]]);
//# sourceMappingURL=main.b74f42f6.chunk.js.map